<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.30">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Prof.&nbsp;Calvin">

<title>Bits – Systems in Rust</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./31_hamming.html" rel="next">
<link href="./22_wordle.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-a4a11d514c7d463668e07712114998e6.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-70c9a4798e5f6abb0636bcdc3eed0e90.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./30_bits.html">Bits</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Systems in Rust</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00_welcome.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_rustup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Rustup</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_hiworld.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hi world</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11_packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Packages</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12_hicargo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hi cargo</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20_options.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Options</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21_guess.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Guess</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22_wordle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wordle</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./30_bits.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Bits</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./31_hamming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hamming</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./32_macros.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Macros</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#announcements" id="toc-announcements" class="nav-link active" data-scroll-target="#announcements">Announcements</a></li>
  <li><a href="#today" id="toc-today" class="nav-link" data-scroll-target="#today">Today</a></li>
  <li><a href="#bytes" id="toc-bytes" class="nav-link" data-scroll-target="#bytes">Bytes</a>
  <ul class="collapse">
  <li><a href="#good-at" id="toc-good-at" class="nav-link" data-scroll-target="#good-at">“Good at”</a></li>
  <li><a href="#good-at-1" id="toc-good-at-1" class="nav-link" data-scroll-target="#good-at-1">“Good at”</a></li>
  <li><a href="#low-level-langauges" id="toc-low-level-langauges" class="nav-link" data-scroll-target="#low-level-langauges">Low-level langauges</a></li>
  <li><a href="#bit-manipulation" id="toc-bit-manipulation" class="nav-link" data-scroll-target="#bit-manipulation">Bit Manipulation</a></li>
  <li><a href="#support" id="toc-support" class="nav-link" data-scroll-target="#support">Support</a></li>
  <li><a href="#bytes-1" id="toc-bytes-1" class="nav-link" data-scroll-target="#bytes-1">Byte(s)</a></li>
  <li><a href="#bytes-2" id="toc-bytes-2" class="nav-link" data-scroll-target="#bytes-2">Bytes</a></li>
  <li><a href="#example" id="toc-example" class="nav-link" data-scroll-target="#example">Example</a></li>
  <li><a href="#test-it" id="toc-test-it" class="nav-link" data-scroll-target="#test-it">Test it</a></li>
  <li><a href="#simplify" id="toc-simplify" class="nav-link" data-scroll-target="#simplify">Simplify</a></li>
  <li><a href="#fixed" id="toc-fixed" class="nav-link" data-scroll-target="#fixed">Fixed</a></li>
  </ul></li>
  <li><a href="#bitwise-operators" id="toc-bitwise-operators" class="nav-link" data-scroll-target="#bitwise-operators">Bitwise Operators</a>
  <ul class="collapse">
  <li><a href="#operator-reference" id="toc-operator-reference" class="nav-link" data-scroll-target="#operator-reference">Operator Reference</a></li>
  <li><a href="#bitwise" id="toc-bitwise" class="nav-link" data-scroll-target="#bitwise">Bitwise</a></li>
  <li><a href="#conceptual-model" id="toc-conceptual-model" class="nav-link" data-scroll-target="#conceptual-model">Conceptual Model</a></li>
  <li><a href="#python-demo---bytes" id="toc-python-demo---bytes" class="nav-link" data-scroll-target="#python-demo---bytes">Python Demo - Bytes</a></li>
  <li><a href="#python-bit-xor" id="toc-python-bit-xor" class="nav-link" data-scroll-target="#python-bit-xor">Python Bit XOR</a></li>
  <li><a href="#boolean-arrays" id="toc-boolean-arrays" class="nav-link" data-scroll-target="#boolean-arrays">Boolean arrays</a></li>
  <li><a href="#logical-xor" id="toc-logical-xor" class="nav-link" data-scroll-target="#logical-xor">Logical XOR</a></li>
  <li><a href="#map-xor" id="toc-map-xor" class="nav-link" data-scroll-target="#map-xor">Map XOR</a></li>
  <li><a href="#all-operators" id="toc-all-operators" class="nav-link" data-scroll-target="#all-operators">All operators</a></li>
  <li><a href="#rust-operators" id="toc-rust-operators" class="nav-link" data-scroll-target="#rust-operators">Rust operators</a></li>
  <li><a href="#run-it" id="toc-run-it" class="nav-link" data-scroll-target="#run-it">Run it</a></li>
  </ul></li>
  <li><a href="#endianness" id="toc-endianness" class="nav-link" data-scroll-target="#endianness">Endianness</a>
  <ul class="collapse">
  <li><a href="#why" id="toc-why" class="nav-link" data-scroll-target="#why">Why?</a></li>
  <li><a href="#binary" id="toc-binary" class="nav-link" data-scroll-target="#binary">Binary</a></li>
  <li><a href="#binary-1" id="toc-binary-1" class="nav-link" data-scroll-target="#binary-1">Binary</a></li>
  <li><a href="#wait-a-minute." id="toc-wait-a-minute." class="nav-link" data-scroll-target="#wait-a-minute.">Wait a minute.</a></li>
  <li><a href="#languages" id="toc-languages" class="nav-link" data-scroll-target="#languages">Languages</a></li>
  <li><a href="#in-practice" id="toc-in-practice" class="nav-link" data-scroll-target="#in-practice">In Practice</a></li>
  <li><a href="#annoyance" id="toc-annoyance" class="nav-link" data-scroll-target="#annoyance">Annoyance</a></li>
  <li><a href="#stdin" id="toc-stdin" class="nav-link" data-scroll-target="#stdin">Stdin</a></li>
  <li><a href="#test" id="toc-test" class="nav-link" data-scroll-target="#test">Test</a></li>
  <li><a href="#hex-reader" id="toc-hex-reader" class="nav-link" data-scroll-target="#hex-reader">Hex reader</a></li>
  <li><a href="#to-characters" id="toc-to-characters" class="nav-link" data-scroll-target="#to-characters">To characters</a></li>
  <li><a href="#test-it-1" id="toc-test-it-1" class="nav-link" data-scroll-target="#test-it-1">Test it</a></li>
  <li><a href="#missing-pieces" id="toc-missing-pieces" class="nav-link" data-scroll-target="#missing-pieces">Missing pieces</a></li>
  <li><a href="#skip" id="toc-skip" class="nav-link" data-scroll-target="#skip">Skip</a></li>
  <li><a href="#build-up" id="toc-build-up" class="nav-link" data-scroll-target="#build-up">Build up</a></li>
  <li><a href="#uh-oh" id="toc-uh-oh" class="nav-link" data-scroll-target="#uh-oh">Uh oh!</a></li>
  <li><a href="#recurse" id="toc-recurse" class="nav-link" data-scroll-target="#recurse">Recurse</a></li>
  <li><a href="#try-it-out" id="toc-try-it-out" class="nav-link" data-scroll-target="#try-it-out">Try it out!</a></li>
  <li><a href="#pair-it-up" id="toc-pair-it-up" class="nav-link" data-scroll-target="#pair-it-up">Pair it up</a></li>
  <li><a href="#whoops" id="toc-whoops" class="nav-link" data-scroll-target="#whoops">Whoops!</a></li>
  <li><a href="#altogether" id="toc-altogether" class="nav-link" data-scroll-target="#altogether">Altogether</a></li>
  <li><a href="#just-parse-nm" id="toc-just-parse-nm" class="nav-link" data-scroll-target="#just-parse-nm">Just parse <code>{n}{m}</code></a></li>
  <li><a href="#bundle-into-a-vector" id="toc-bundle-into-a-vector" class="nav-link" data-scroll-target="#bundle-into-a-vector">Bundle into a <em>vector</em></a></li>
  <li><a href="#create-vectors" id="toc-create-vectors" class="nav-link" data-scroll-target="#create-vectors">Create vectors</a></li>
  <li><a href="#sketch" id="toc-sketch" class="nav-link" data-scroll-target="#sketch">Sketch</a></li>
  <li><a href="#wrapper" id="toc-wrapper" class="nav-link" data-scroll-target="#wrapper">Wrapper</a></li>
  <li><a href="#vector-handling" id="toc-vector-handling" class="nav-link" data-scroll-target="#vector-handling">Vector handling</a></li>
  <li><a href="#how-do-we-feel-about-this" id="toc-how-do-we-feel-about-this" class="nav-link" data-scroll-target="#how-do-we-feel-about-this">How do we feel about this?</a></li>
  <li><a href="#quoth-wikipedia" id="toc-quoth-wikipedia" class="nav-link" data-scroll-target="#quoth-wikipedia">Quoth Wikipedia</a></li>
  <li><a href="#two-endians" id="toc-two-endians" class="nav-link" data-scroll-target="#two-endians">Two endians</a></li>
  <li><a href="#arrays-to-numbers" id="toc-arrays-to-numbers" class="nav-link" data-scroll-target="#arrays-to-numbers">Arrays to Numbers</a></li>
  <li><a href="#try-it-out-1" id="toc-try-it-out-1" class="nav-link" data-scroll-target="#try-it-out-1">Try it out</a></li>
  <li><a href="#wait-a-minute" id="toc-wait-a-minute" class="nav-link" data-scroll-target="#wait-a-minute">Wait a minute</a></li>
  <li><a href="#shifts" id="toc-shifts" class="nav-link" data-scroll-target="#shifts">Shifts</a></li>
  <li><a href="#script-it" id="toc-script-it" class="nav-link" data-scroll-target="#script-it">Script it</a></li>
  <li><a href="#shift-it" id="toc-shift-it" class="nav-link" data-scroll-target="#shift-it">Shift it</a></li>
  <li><a href="#today-1" id="toc-today-1" class="nav-link" data-scroll-target="#today-1">Today</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="30_bits.rjs.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Bits</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i></button></div></div>
<p class="subtitle lead">Systems in Rust</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Prof.&nbsp;Calvin </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="announcements" class="level2">
<h2 class="anchored" data-anchor-id="announcements">Announcements</h2>
<ul>
<li><strong>Action Items</strong>:
<ul>
<li>Wordle for Friday</li>
<li>“Macros” assignment ready after class.</li>
</ul></li>
</ul>
</section>
<section id="today" class="level2">
<h2 class="anchored" data-anchor-id="today">Today</h2>
<ul>
<li>Encoding
<ul>
<li>Bytes</li>
<li>Bitwise operators</li>
<li>Endianness</li>
</ul></li>
</ul>
</section>
<section id="bytes" class="level1">
<h1>Bytes</h1>
<section id="good-at" class="level2">
<h2 class="anchored" data-anchor-id="good-at">“Good at”</h2>
<ul>
<li>Computers “are good at” storing numerical data.
<ul>
<li>At a high level <em>numerical computing</em>
<ul>
<li>NumPy / Numba</li>
<li>Julia</li>
<li>Fortran</li>
</ul></li>
</ul></li>
<li>These languages excel at wide ranges of mathematical operations, ranging from addition to solving systems of differential equations.</li>
</ul>
</section>
<section id="good-at-1" class="level2">
<h2 class="anchored" data-anchor-id="good-at-1">“Good at”</h2>
<ul>
<li><em>Electronics</em> are good at propagating signals, which we often view as ordered collections of zeros and ones.
<ul>
<li>At a lower level <em>processing</em>
<ul>
<li>C and to a lesser degree C++</li>
<li>Assembly, like AMD/Intel x86 or IBM PowerPC</li>
<li>Rust</li>
</ul></li>
</ul></li>
<li>These languages often have weaker support for say, trigonometry and better support for reading files of arbitrary types, including not just .csv files but e.g.&nbsp;readings from radio telescopes.</li>
</ul>
</section>
<section id="low-level-langauges" class="level2">
<h2 class="anchored" data-anchor-id="low-level-langauges">Low-level langauges</h2>
<ul>
<li>Rust is among the group of languages good at working close to the “hardware-software interface”</li>
<li>Many design in decisions in Rust, such as in how Rust read file data <code>/dev/random</code>, reflect this:</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb1-1"><a href="#cb1-1"></a><span class="dt">usize</span><span class="pp">::</span>from_ne_bytes(buffer)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Direct references to bytes (or bits) are uncommon but present in higher level languages, and increase in popularity in languages that give more control to programs over how the device operates.</li>
</ul>
</section>
<section id="bit-manipulation" class="level2">
<h2 class="anchored" data-anchor-id="bit-manipulation">Bit Manipulation</h2>
<ul>
<li>One common application of lower-level programming is to precisely control the values of individual bits within a byte.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>A <em>byte</em> is a hardware idea - an ordered collection of 8 bits, which themselves are hardware units either containing, or lacking, some electrical charge. We view them as storing zeros or ones.</p>
</div>
</div>
<ul>
<li>Importantly, while we can refer to bits or bytes in software, versus types like integers or strings, we are describing <em>actual physical phenomena</em> rather than mathematical abstractions.</li>
</ul>
</section>
<section id="support" class="level2">
<h2 class="anchored" data-anchor-id="support">Support</h2>
<ul>
<li>Low level support is provided most commonly through two features:
<ul>
<li>A type to represent a byte or bytes.</li>
<li>Bitwise operators - operators like the arithmetic infix operators <code>+</code> or <code>-</code> but that perform operations on pairs of bits rather than pairs of numeric values.</li>
</ul></li>
<li>We explore each in Rust.</li>
</ul>
</section>
<section id="bytes-1" class="level2">
<h2 class="anchored" data-anchor-id="bytes-1">Byte(s)</h2>
<ul>
<li>Bytes are referenced by name within in Rust <code>std</code> in a few places, though there is no formal <code>byte</code> type.</li>
<li>Instead, <code>u8</code> is used.
<ul>
<li>This is common - there is little meaningful difference between 8 bits pretending to be a number and 8 bits that aren’t doing anything in particular.</li>
</ul></li>
</ul>
</section>
<section id="bytes-2" class="level2">
<h2 class="anchored" data-anchor-id="bytes-2">Bytes</h2>
<ul>
<li>Bytes are referenced, both as the function <code>bytes</code> and the data structure <code>Bytes</code>
<ul>
<li>The function produces a Rust iterator the produces <code>u8</code> values.</li>
</ul></li>
<li>In other cases, such as <code>as_bytes</code>, an array of <code>u8</code> is often used (expressed as <code>[u8]</code>.</li>
<li>In any case, collections of <code>u8</code>s.</li>
</ul>
</section>
<section id="example" class="level2">
<h2 class="anchored" data-anchor-id="example">Example</h2>
<ul>
<li>Really, there is no better example than just grabbing some random bits from <code>/dev/random</code> and taking a peek.</li>
<li>Rust helpfully supports printing in binary, using the <code>b</code> format code, to see the individual zeroes and ones of a byte or bytes.</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">let</span> <span class="kw">mut</span> devrnd <span class="op">=</span> <span class="pp">std::fs::File::</span>open(<span class="st">"/dev/urandom"</span>)<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw">let</span> <span class="kw">mut</span> buffer <span class="op">=</span> [<span class="dv">0u8</span><span class="op">;</span> (<span class="dt">usize</span><span class="pp">::</span>BITS <span class="op">/</span> <span class="dv">8</span>) <span class="kw">as</span> <span class="dt">usize</span>]<span class="op">;</span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="pp">std::io::</span><span class="bu">Read</span><span class="pp">::</span>read_exact(<span class="op">&amp;</span><span class="kw">mut</span> devrnd<span class="op">,</span> <span class="op">&amp;</span><span class="kw">mut</span> buffer)<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="kw">let</span> sample <span class="op">=</span> <span class="dt">usize</span><span class="pp">::</span>from_ne_bytes(buffer)<span class="op">;</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="pp">println!</span>(<span class="st">"{:b}"</span><span class="op">,</span> sample)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="test-it" class="level2">
<h2 class="anchored" data-anchor-id="test-it">Test it</h2>
<ul>
<li>You can run a few times to see what a random <em>bitstring</em> (ordered collection of bits) looks like when using <code>:b</code></li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1"></a></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="ex">$</span> cargo run</span>
<span id="cb3-3"><a href="#cb3-3"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="ex">1000111011010011001001000110100010011010101101010111100001010101</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="ex">$</span> cargo run</span>
<span id="cb3-7"><a href="#cb3-7"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb3-8"><a href="#cb3-8"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="ex">1010101000100001011000111011111111011110010001010010101000111010</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="ex">$</span> cargo run</span>
<span id="cb3-11"><a href="#cb3-11"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb3-12"><a href="#cb3-12"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="ex">1001110000001001110011100111110010010101110000010111010111110011</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p></p>
</section>
<section id="simplify" class="level2">
<h2 class="anchored" data-anchor-id="simplify">Simplify</h2>
<ul>
<li>To introduce operators, we’ll use only single <code>u8</code>s, just for simplicity.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">let</span> <span class="kw">mut</span> devrnd <span class="op">=</span> <span class="pp">std::fs::File::</span>open(<span class="st">"/dev/urandom"</span>)<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="kw">let</span> <span class="kw">mut</span> buffer <span class="op">=</span> [<span class="dv">0u8</span><span class="op">;</span> <span class="dv">2</span>]<span class="op">;</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="pp">std::io::</span><span class="bu">Read</span><span class="pp">::</span>read_exact(<span class="op">&amp;</span><span class="kw">mut</span> devrnd<span class="op">,</span> <span class="op">&amp;</span><span class="kw">mut</span> buffer)<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="kw">let</span> x <span class="op">=</span> x[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="kw">let</span> y <span class="op">=</span> y[<span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="pp">println!</span>(<span class="st">"x = {x:08b}, y = {y:08b}"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>By default, <code>:b</code> doesn’t render leading zeros, which is fine for numbers but not great for bytes.</li>
<li>Use <code>:08b</code> - where <code>0</code> specifies to have leading zeros, and <code>8</code> specifies how many digits.</li>
</ul>
</section>
<section id="fixed" class="level2">
<h2 class="anchored" data-anchor-id="fixed">Fixed</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1"></a><span class="ex">$</span> cargo run</span>
<span id="cb5-2"><a href="#cb5-2"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="ex">x</span> = 00101010, y = 01100111</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>With the benefit of some bits, we can explore operators.</li>
</ul>
</section>
</section>
<section id="bitwise-operators" class="level1">
<h1>Bitwise Operators</h1>
<section id="operator-reference" class="level2">
<h2 class="anchored" data-anchor-id="operator-reference">Operator Reference</h2>
<ul>
<li>Rust doesn’t clearly delineate bitwise from other operators.
<ul>
<li>This is pretty reasonable: “bitwise” is something of a social convention.</li>
</ul></li>
<li>The overall operator reference I follow is <a href="https://doc.rust-lang.org/book/appendix-02-operators.html">Rust Book Appendix B</a></li>
<li>The next slide lifts a subset of a .md table on that page.
<ul>
<li>I have included both named bitwise operators and also “shifts”, which are a bit (heh) different.</li>
</ul></li>
</ul>
</section>
<section id="bitwise" class="level2">
<h2 class="anchored" data-anchor-id="bitwise">Bitwise</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 16%">
<col style="width: 36%">
<col style="width: 46%">
</colgroup>
<thead>
<tr class="header">
<th>Operator</th>
<th>Example</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>!</code></td>
<td><code>!expr</code></td>
<td>Bitwise or logical complement</td>
</tr>
<tr class="even">
<td><code>&amp;</code></td>
<td><code>expr &amp; expr</code></td>
<td>Bitwise AND</td>
</tr>
<tr class="odd">
<td><code>&lt;&lt;</code></td>
<td><code>expr &lt;&lt; expr</code></td>
<td>Left-shift</td>
</tr>
<tr class="even">
<td><code>&gt;&gt;</code></td>
<td><code>expr &gt;&gt; expr</code></td>
<td>Right-shift</td>
</tr>
<tr class="odd">
<td><code>^</code></td>
<td><code>expr ^ expr</code></td>
<td>Bitwise exclusive OR</td>
</tr>
<tr class="even">
<td><code>|</code></td>
<td><code>expr | expr</code></td>
<td>Bitwise OR</td>
</tr>
</tbody>
</table>
</section>
<section id="conceptual-model" class="level2">
<h2 class="anchored" data-anchor-id="conceptual-model">Conceptual Model</h2>
<ul>
<li>One way to model how the bitwise operators is to:
<ul>
<li>Imagine a byte as an ordered collection of bits
<ul>
<li>Like a list, array, or vector</li>
</ul></li>
<li>Imagine a bit as a boolean.
<ul>
<li>Zero/one is equally meaningful to False/True</li>
</ul></li>
<li>Loop a logical operator over the booleans.</li>
</ul></li>
<li>We will demonstrate first in Python then in Rust.</li>
</ul>
</section>
<section id="python-demo---bytes" class="level2">
<h2 class="anchored" data-anchor-id="python-demo---bytes">Python Demo - Bytes</h2>
<ul>
<li>We create two bytes using np.uint8.</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource py number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1"></a><span class="im">from</span> numpy <span class="im">import</span> uint8 <span class="im">as</span> byte</span>
<span id="cb6-2"><a href="#cb6-2"></a></span>
<span id="cb6-3"><a href="#cb6-3"></a>x, y <span class="op">=</span> byte(<span class="bn">0x0F</span>), byte(<span class="bn">0x33</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Binary representation using <code>bin</code> or <code>:b</code></li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource {py} number-lines code-with-copy"><code class="sourceCode"><span id="cb7-1"><a href="#cb7-1"></a>print('x = {:08b}, y = {:08b}'.format(x,y))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>You’ll see <code>x = 00001111, y = 00110011</code></li>
</ul>
</section>
<section id="python-bit-xor" class="level2">
<h2 class="anchored" data-anchor-id="python-bit-xor">Python Bit XOR</h2>
<ul>
<li>We can use Pythonic “Bitwise exclusive OR”</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource {py} number-lines code-with-copy"><code class="sourceCode"><span id="cb8-1"><a href="#cb8-1"></a>print('{:08b} ^ {:08b} = {:08b}'.format(x, y, x ^ y))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>What do we see?</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1"></a><span class="ex">00001111</span> ^ 00110011 = 00111100</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Why?</li>
</ul>
</section>
<section id="boolean-arrays" class="level2">
<h2 class="anchored" data-anchor-id="boolean-arrays">Boolean arrays</h2>
<ul>
<li>Convert the bytes to arrays of booleans.</li>
<li>Via string representation:</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource py number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a>to_bool_str <span class="op">=</span> <span class="kw">lambda</span> x : [c <span class="op">==</span> <span class="st">'1'</span> <span class="cf">for</span> c <span class="kw">in</span> `{<span class="fl">.08</span><span class="er">b</span>}.<span class="bu">format</span>(x)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Via numeric representation, which requires a reversal:</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource py number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1"></a>to_bool_num <span class="op">=</span> <span class="kw">lambda</span> x : [<span class="dv">1</span> <span class="op">==</span> (x <span class="op">//</span> <span class="dv">2</span> <span class="op">**</span> i) <span class="op">%</span> <span class="dv">2</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">8</span>)][::<span class="op">-</span><span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="logical-xor" class="level2">
<h2 class="anchored" data-anchor-id="logical-xor">Logical XOR</h2>
<ul>
<li>Python lacks logical XOR as it is equivalent to <code>!=</code></li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource py number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># Print a truth table in markdown</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="bu">print</span>(<span class="st">"| x   | y   | x!=y| x^y |"</span>)</span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="bu">print</span>(<span class="st">"|-----|-----|-----|-----|"</span>)</span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="cf">for</span> left <span class="kw">in</span> (<span class="va">True</span>, <span class="va">False</span>):</span>
<span id="cb12-5"><a href="#cb12-5"></a>    <span class="cf">for</span> rite <span class="kw">in</span> (<span class="va">True</span>, <span class="va">False</span>):</span>
<span id="cb12-6"><a href="#cb12-6"></a>        <span class="bu">print</span>(<span class="st">'|</span><span class="sc">{:&lt;5}</span><span class="st">|</span><span class="sc">{:&lt;5}</span><span class="st">|</span><span class="sc">{:&lt;5}</span><span class="st">|</span><span class="sc">{:&lt;5}</span><span class="st">|'</span>.<span class="bu">format</span>(<span class="op">*</span>[<span class="bu">str</span>(b) <span class="cf">for</span> b <span class="kw">in</span> [left, rite, left <span class="op">!=</span> rite, left <span class="op">^</span> rite]]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Horizontally aligned:</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode email code-with-copy"><code class="sourceCode email"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>| x   | y   | x!=y| x^y |</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>|-----|-----|-----|-----|</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>|True |True |False|False|</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>|True |False|True |True |</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>|False|True |True |True |</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>|False|False|False|False|</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="map-xor" class="level2">
<h2 class="anchored" data-anchor-id="map-xor">Map XOR</h2>
<ul>
<li>Apply XOR to each element of the boolean arrays.</li>
<li>We would get the same numerical presentation.</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource py number-lines code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1"></a><span class="bu">print</span>(to_bool_num(x <span class="op">^</span> y))</span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="bu">print</span>([a <span class="op">!=</span> b <span class="cf">for</span> a, b <span class="kw">in</span> <span class="bu">zip</span>(to_bool_num(x),to_bool_num(y))])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Both will yield the same boolean array.</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource py number-lines code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1"></a>[<span class="va">True</span>, <span class="va">True</span>, <span class="va">False</span>, <span class="va">False</span>, <span class="va">False</span>, <span class="va">False</span>, <span class="va">True</span>, <span class="va">True</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="all-operators" class="level2">
<h2 class="anchored" data-anchor-id="all-operators">All operators</h2>
<ul>
<li>We can loop over all operators to inspect them visually.</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource py number-lines code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1"></a><span class="im">from</span> operator <span class="im">import</span> and_, or_ , xor</span>
<span id="cb16-2"><a href="#cb16-2"></a></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="cf">for</span> op <span class="kw">in</span> [and_, or_ , xor]:</span>
<span id="cb16-4"><a href="#cb16-4"></a>    <span class="bu">print</span>(<span class="st">'f(</span><span class="sc">{:08b}</span><span class="st">, </span><span class="sc">{:08b}</span><span class="st">) = </span><span class="sc">{:08b}</span><span class="st"> for f ='</span>.<span class="bu">format</span>(x, y, op(x,y)), op)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><code>not</code> is similar but unary.</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource py number-lines code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1"></a><span class="bu">print</span>(<span class="st">'~</span><span class="sc">{:08b}</span><span class="st"> = </span><span class="sc">{:08b}</span><span class="st">'</span>.<span class="bu">format</span>(x, <span class="op">~</span>x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>So:</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1"></a><span class="ex">f</span><span class="er">(</span><span class="ex">11110000,</span> 00110011<span class="kw">)</span> <span class="ex">=</span> 00110000 for f = <span class="op">&lt;</span>built-in function and_<span class="op">&gt;</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="ex">f</span><span class="er">(</span><span class="ex">11110000,</span> 00110011<span class="kw">)</span> <span class="ex">=</span> 11110011 for f = <span class="op">&lt;</span>built-in function or_<span class="op">&gt;</span></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="ex">f</span><span class="er">(</span><span class="ex">11110000,</span> 00110011<span class="kw">)</span> <span class="ex">=</span> 11000011 for f = <span class="op">&lt;</span>built-in function xor<span class="op">&gt;</span></span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="ex">~11110000</span> = 00001111</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="rust-operators" class="level2">
<h2 class="anchored" data-anchor-id="rust-operators">Rust operators</h2>
<ul>
<li>More common convention to use <code>!</code> for not (vs.&nbsp;<code>~</code>)</li>
<li>I’m not great with Rust format codes yet, so a bit silly.</li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>src/main.rs</strong></pre>
</div>
<div class="sourceCode" id="cb19" data-filename="src/main.rs"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb19-1"><a href="#cb19-1"></a><span class="kw">fn</span> main() <span class="op">{</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>    <span class="kw">let</span> <span class="kw">mut</span> devrnd <span class="op">=</span> <span class="pp">std::fs::File::</span>open(<span class="st">"/dev/urandom"</span>)<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb19-3"><a href="#cb19-3"></a>    <span class="kw">let</span> <span class="kw">mut</span> buffer <span class="op">=</span> [<span class="dv">0u8</span><span class="op">;</span> <span class="dv">2</span>]<span class="op">;</span></span>
<span id="cb19-4"><a href="#cb19-4"></a>    <span class="pp">std::io::</span><span class="bu">Read</span><span class="pp">::</span>read_exact(<span class="op">&amp;</span><span class="kw">mut</span> devrnd<span class="op">,</span> <span class="op">&amp;</span><span class="kw">mut</span> buffer)<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb19-5"><a href="#cb19-5"></a>    <span class="kw">let</span> x <span class="op">=</span> buffer[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb19-6"><a href="#cb19-6"></a>    <span class="kw">let</span> y <span class="op">=</span> buffer[<span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb19-7"><a href="#cb19-7"></a>    <span class="kw">let</span> <span class="kw">mut</span> z <span class="op">=</span> x <span class="op">|</span> y<span class="op">;</span></span>
<span id="cb19-8"><a href="#cb19-8"></a>    <span class="pp">println!</span>(<span class="st">"x = {x:08b}, y = {y:08b}, x | y = {z:08b}"</span>)<span class="op">;</span></span>
<span id="cb19-9"><a href="#cb19-9"></a>    z <span class="op">=</span> x <span class="op">^</span> y<span class="op">;</span></span>
<span id="cb19-10"><a href="#cb19-10"></a>    <span class="pp">println!</span>(<span class="st">"x = {x:08b}, y = {y:08b}, x ^ y = {z:08b}"</span>)<span class="op">;</span></span>
<span id="cb19-11"><a href="#cb19-11"></a>    z <span class="op">=</span> x <span class="op">&amp;</span> y<span class="op">;</span></span>
<span id="cb19-12"><a href="#cb19-12"></a>    <span class="pp">println!</span>(<span class="st">"x = {x:08b}, y = {y:08b}, x &amp; y = {z:08b}"</span>)<span class="op">;</span></span>
<span id="cb19-13"><a href="#cb19-13"></a>    <span class="kw">let</span> y <span class="op">=</span> <span class="op">!</span>buffer[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb19-14"><a href="#cb19-14"></a>    <span class="pp">println!</span>(<span class="st">"x = {x:08b},!x = {y:08b}"</span>)<span class="op">;</span></span>
<span id="cb19-15"><a href="#cb19-15"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="run-it" class="level2">
<h2 class="anchored" data-anchor-id="run-it">Run it</h2>
<ul>
<li>See how different random bits are combined!</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1"></a><span class="ex">$</span> cargo run</span>
<span id="cb20-2"><a href="#cb20-2"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb20-3"><a href="#cb20-3"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb20-4"><a href="#cb20-4"></a><span class="ex">x</span> = 01110000, y = 10001110, x <span class="kw">|</span> <span class="ex">y</span> = 11111110</span>
<span id="cb20-5"><a href="#cb20-5"></a><span class="ex">x</span> = 01110000, y = 10001110, x ^ y = 11111110</span>
<span id="cb20-6"><a href="#cb20-6"></a><span class="ex">x</span> = 01110000, y = 10001110, x <span class="kw">&amp;</span> <span class="ex">y</span> = 00000000</span>
<span id="cb20-7"><a href="#cb20-7"></a><span class="ex">x</span> = 01110000,!x = 10001111</span>
<span id="cb20-8"><a href="#cb20-8"></a><span class="ex">$</span> cargo run</span>
<span id="cb20-9"><a href="#cb20-9"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb20-10"><a href="#cb20-10"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb20-11"><a href="#cb20-11"></a><span class="ex">x</span> = 10111111, y = 00110110, x <span class="kw">|</span> <span class="ex">y</span> = 10111111</span>
<span id="cb20-12"><a href="#cb20-12"></a><span class="ex">x</span> = 10111111, y = 00110110, x ^ y = 10001001</span>
<span id="cb20-13"><a href="#cb20-13"></a><span class="ex">x</span> = 10111111, y = 00110110, x <span class="kw">&amp;</span> <span class="ex">y</span> = 00110110</span>
<span id="cb20-14"><a href="#cb20-14"></a><span class="ex">x</span> = 10111111,!x = 01000000</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="endianness" class="level1">
<h1>Endianness</h1>
<section id="why" class="level2">
<h2 class="anchored" data-anchor-id="why">Why?</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Imagine thinking in digits.</li>
<li>To store a ~3 digit number, need <span class="math inline">\(3 \times 10 = 30\)</span> “things” that can hold a number.</li>
</ul>
</div><div class="column" style="width:50%;">
<div class="cell" data-fig-width="400px" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<svg width="400" height="480" viewbox="0.00 0.00 206.00 330.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 326)">
<title>finite_automata</title>
<polygon fill="#191919" stroke="transparent" points="-4,4 -4,-326 202,-326 202,4 -4,4"></polygon>
<!-- struct -->
<g id="node1" class="node">
<title>struct</title>
<polygon fill="none" stroke="#ffffff" points="33.65,-285.5 33.65,-321.5 164.35,-321.5 164.35,-285.5 33.65,-285.5"></polygon>
<text text-anchor="middle" x="55.43" y="-299.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">10^0</text>
<polyline fill="none" stroke="#ffffff" points="77.22,-285.7 77.22,-321.5 "></polyline>
<text text-anchor="middle" x="99" y="-299.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">10^1</text>
<polyline fill="none" stroke="#ffffff" points="120.78,-285.7 120.78,-321.5 "></polyline>
<text text-anchor="middle" x="142.57" y="-299.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">10^2</text>
</g>
<!-- struct0 -->
<g id="node2" class="node">
<title>struct0</title>
<polygon fill="none" stroke="#ffffff" points="0,-0.5 0,-248.5 54,-248.5 54,-0.5 0,-0.5"></polygon>
<text text-anchor="middle" x="27" y="-231.9" font-family="Times,serif" font-size="14.00" fill="#ffffff">0</text>
<polyline fill="none" stroke="#ffffff" points="0,-223.7 54,-223.7 "></polyline>
<text text-anchor="middle" x="27" y="-207.1" font-family="Times,serif" font-size="14.00" fill="#ffffff">1</text>
<polyline fill="none" stroke="#ffffff" points="0,-198.9 54,-198.9 "></polyline>
<text text-anchor="middle" x="27" y="-182.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">2</text>
<polyline fill="none" stroke="#ffffff" points="0,-174.1 54,-174.1 "></polyline>
<text text-anchor="middle" x="27" y="-157.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">3</text>
<polyline fill="none" stroke="#ffffff" points="0,-149.3 54,-149.3 "></polyline>
<text text-anchor="middle" x="27" y="-132.7" font-family="Times,serif" font-size="14.00" fill="#ffffff">4</text>
<polyline fill="none" stroke="#ffffff" points="0,-124.5 54,-124.5 "></polyline>
<text text-anchor="middle" x="27" y="-107.9" font-family="Times,serif" font-size="14.00" fill="#ffffff">5</text>
<polyline fill="none" stroke="#ffffff" points="0,-99.7 54,-99.7 "></polyline>
<text text-anchor="middle" x="27" y="-83.1" font-family="Times,serif" font-size="14.00" fill="#ffffff">6</text>
<polyline fill="none" stroke="#ffffff" points="0,-74.9 54,-74.9 "></polyline>
<text text-anchor="middle" x="27" y="-58.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">7</text>
<polyline fill="none" stroke="#ffffff" points="0,-50.1 54,-50.1 "></polyline>
<text text-anchor="middle" x="27" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">8</text>
<polyline fill="none" stroke="#ffffff" points="0,-25.3 54,-25.3 "></polyline>
<text text-anchor="middle" x="27" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff">9</text>
</g>
<!-- struct&#45;&gt;struct0 -->
<g id="edge1" class="edge">
<title>struct:0-&gt;struct0</title>
<path fill="none" stroke="#ffffff" d="M55,-285C55,-276.42 54.6,-267.62 53.9,-258.77"></path>
<polygon fill="#ffffff" stroke="#ffffff" points="57.38,-258.41 52.99,-248.78 50.41,-259.05 57.38,-258.41"></polygon>
</g>
<!-- struct1 -->
<g id="node3" class="node">
<title>struct1</title>
<polygon fill="none" stroke="#ffffff" points="72,-0.5 72,-248.5 126,-248.5 126,-0.5 72,-0.5"></polygon>
<text text-anchor="middle" x="99" y="-231.9" font-family="Times,serif" font-size="14.00" fill="#ffffff">0</text>
<polyline fill="none" stroke="#ffffff" points="72,-223.7 126,-223.7 "></polyline>
<text text-anchor="middle" x="99" y="-207.1" font-family="Times,serif" font-size="14.00" fill="#ffffff">1</text>
<polyline fill="none" stroke="#ffffff" points="72,-198.9 126,-198.9 "></polyline>
<text text-anchor="middle" x="99" y="-182.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">2</text>
<polyline fill="none" stroke="#ffffff" points="72,-174.1 126,-174.1 "></polyline>
<text text-anchor="middle" x="99" y="-157.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">3</text>
<polyline fill="none" stroke="#ffffff" points="72,-149.3 126,-149.3 "></polyline>
<text text-anchor="middle" x="99" y="-132.7" font-family="Times,serif" font-size="14.00" fill="#ffffff">4</text>
<polyline fill="none" stroke="#ffffff" points="72,-124.5 126,-124.5 "></polyline>
<text text-anchor="middle" x="99" y="-107.9" font-family="Times,serif" font-size="14.00" fill="#ffffff">5</text>
<polyline fill="none" stroke="#ffffff" points="72,-99.7 126,-99.7 "></polyline>
<text text-anchor="middle" x="99" y="-83.1" font-family="Times,serif" font-size="14.00" fill="#ffffff">6</text>
<polyline fill="none" stroke="#ffffff" points="72,-74.9 126,-74.9 "></polyline>
<text text-anchor="middle" x="99" y="-58.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">7</text>
<polyline fill="none" stroke="#ffffff" points="72,-50.1 126,-50.1 "></polyline>
<text text-anchor="middle" x="99" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">8</text>
<polyline fill="none" stroke="#ffffff" points="72,-25.3 126,-25.3 "></polyline>
<text text-anchor="middle" x="99" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff">9</text>
</g>
<!-- struct&#45;&gt;struct1 -->
<g id="edge2" class="edge">
<title>struct:1-&gt;struct1</title>
<path fill="none" stroke="#ffffff" d="M99,-285C99,-276.45 99,-267.64 99,-258.76"></path>
<polygon fill="#ffffff" stroke="#ffffff" points="102.5,-258.72 99,-248.72 95.5,-258.72 102.5,-258.72"></polygon>
</g>
<!-- struct2 -->
<g id="node4" class="node">
<title>struct2</title>
<polygon fill="none" stroke="#ffffff" points="144,-0.5 144,-248.5 198,-248.5 198,-0.5 144,-0.5"></polygon>
<text text-anchor="middle" x="171" y="-231.9" font-family="Times,serif" font-size="14.00" fill="#ffffff">0</text>
<polyline fill="none" stroke="#ffffff" points="144,-223.7 198,-223.7 "></polyline>
<text text-anchor="middle" x="171" y="-207.1" font-family="Times,serif" font-size="14.00" fill="#ffffff">1</text>
<polyline fill="none" stroke="#ffffff" points="144,-198.9 198,-198.9 "></polyline>
<text text-anchor="middle" x="171" y="-182.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">2</text>
<polyline fill="none" stroke="#ffffff" points="144,-174.1 198,-174.1 "></polyline>
<text text-anchor="middle" x="171" y="-157.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">3</text>
<polyline fill="none" stroke="#ffffff" points="144,-149.3 198,-149.3 "></polyline>
<text text-anchor="middle" x="171" y="-132.7" font-family="Times,serif" font-size="14.00" fill="#ffffff">4</text>
<polyline fill="none" stroke="#ffffff" points="144,-124.5 198,-124.5 "></polyline>
<text text-anchor="middle" x="171" y="-107.9" font-family="Times,serif" font-size="14.00" fill="#ffffff">5</text>
<polyline fill="none" stroke="#ffffff" points="144,-99.7 198,-99.7 "></polyline>
<text text-anchor="middle" x="171" y="-83.1" font-family="Times,serif" font-size="14.00" fill="#ffffff">6</text>
<polyline fill="none" stroke="#ffffff" points="144,-74.9 198,-74.9 "></polyline>
<text text-anchor="middle" x="171" y="-58.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">7</text>
<polyline fill="none" stroke="#ffffff" points="144,-50.1 198,-50.1 "></polyline>
<text text-anchor="middle" x="171" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">8</text>
<polyline fill="none" stroke="#ffffff" points="144,-25.3 198,-25.3 "></polyline>
<text text-anchor="middle" x="171" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff">9</text>
</g>
<!-- struct&#45;&gt;struct2 -->
<g id="edge3" class="edge">
<title>struct:2-&gt;struct2</title>
<path fill="none" stroke="#ffffff" d="M143,-285C143,-276.42 143.4,-267.62 144.1,-258.77"></path>
<polygon fill="#ffffff" stroke="#ffffff" points="147.59,-259.05 145.01,-248.78 140.62,-258.41 147.59,-259.05"></polygon>
</g>
</g>
</svg>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="binary" class="level2">
<h2 class="anchored" data-anchor-id="binary">Binary</h2>
<ul>
<li>We are familiar with binary encoding.</li>
<li>We note: <span class="math inline">\(\log_2(999) \lt 10\)</span></li>
<li><em>Decimal encoding <strong>squanders</strong> <span class="math inline">\(\dfrac{2}{3}\)</span> of it’s storage space.</em></li>
<li>So we store in binary.</li>
</ul>
<div class="cell" data-fig-width="800px" data-fig-height="200px" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<svg width="800" height="200" viewbox="0.00 0.00 373.69 83.40" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 79.4)">
<title>finite_automata</title>
<polygon fill="#191919" stroke="transparent" points="-4,4 -4,-79.4 369.69,-79.4 369.69,4 -4,4"></polygon>
<!-- struct -->
<g id="node1" class="node">
<title>struct</title>
<polygon fill="none" stroke="#ffffff" points="0,-0.5 0,-74.9 365.69,-74.9 365.69,-0.5 0,-0.5"></polygon>
<text text-anchor="middle" x="18.28" y="-58.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">2^0</text>
<polyline fill="none" stroke="#ffffff" points="36.57,-50.1 36.57,-74.9 "></polyline>
<text text-anchor="middle" x="54.85" y="-58.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">2^1</text>
<polyline fill="none" stroke="#ffffff" points="73.14,-50.1 73.14,-74.9 "></polyline>
<text text-anchor="middle" x="91.42" y="-58.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">2^2</text>
<polyline fill="none" stroke="#ffffff" points="109.71,-50.1 109.71,-74.9 "></polyline>
<text text-anchor="middle" x="127.99" y="-58.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">2^3</text>
<polyline fill="none" stroke="#ffffff" points="146.28,-50.1 146.28,-74.9 "></polyline>
<text text-anchor="middle" x="164.56" y="-58.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">2^4</text>
<polyline fill="none" stroke="#ffffff" points="182.85,-50.1 182.85,-74.9 "></polyline>
<text text-anchor="middle" x="201.13" y="-58.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">2^5</text>
<polyline fill="none" stroke="#ffffff" points="219.42,-50.1 219.42,-74.9 "></polyline>
<text text-anchor="middle" x="237.7" y="-58.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">2^6</text>
<polyline fill="none" stroke="#ffffff" points="255.99,-50.1 255.99,-74.9 "></polyline>
<text text-anchor="middle" x="274.27" y="-58.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">2^7</text>
<polyline fill="none" stroke="#ffffff" points="292.55,-50.1 292.55,-74.9 "></polyline>
<text text-anchor="middle" x="310.84" y="-58.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">2^8</text>
<polyline fill="none" stroke="#ffffff" points="329.12,-50.1 329.12,-74.9 "></polyline>
<text text-anchor="middle" x="347.41" y="-58.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">2^9</text>
<polyline fill="none" stroke="#ffffff" points="0,-50.1 365.69,-50.1 "></polyline>
<text text-anchor="middle" x="18" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">0</text>
<polyline fill="none" stroke="#ffffff" points="36,-25.3 36,-50.1 "></polyline>
<text text-anchor="middle" x="54.5" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">0</text>
<polyline fill="none" stroke="#ffffff" points="73,-25.3 73,-50.1 "></polyline>
<text text-anchor="middle" x="91" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">0</text>
<polyline fill="none" stroke="#ffffff" points="109,-25.3 109,-50.1 "></polyline>
<text text-anchor="middle" x="127.5" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">0</text>
<polyline fill="none" stroke="#ffffff" points="146,-25.3 146,-50.1 "></polyline>
<text text-anchor="middle" x="164" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">0</text>
<polyline fill="none" stroke="#ffffff" points="182,-25.3 182,-50.1 "></polyline>
<text text-anchor="middle" x="200.5" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">0</text>
<polyline fill="none" stroke="#ffffff" points="219,-25.3 219,-50.1 "></polyline>
<text text-anchor="middle" x="237" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">0</text>
<polyline fill="none" stroke="#ffffff" points="255,-25.3 255,-50.1 "></polyline>
<text text-anchor="middle" x="273.5" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">0</text>
<polyline fill="none" stroke="#ffffff" points="292,-25.3 292,-50.1 "></polyline>
<text text-anchor="middle" x="310.5" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">0</text>
<polyline fill="none" stroke="#ffffff" points="329,-25.3 329,-50.1 "></polyline>
<text text-anchor="middle" x="347" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">0</text>
<polyline fill="none" stroke="#ffffff" points="0,-25.3 365.69,-25.3 "></polyline>
<text text-anchor="middle" x="18" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff">1</text>
<polyline fill="none" stroke="#ffffff" points="36,-0.5 36,-25.3 "></polyline>
<text text-anchor="middle" x="54.5" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff">1</text>
<polyline fill="none" stroke="#ffffff" points="73,-0.5 73,-25.3 "></polyline>
<text text-anchor="middle" x="91" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff">1</text>
<polyline fill="none" stroke="#ffffff" points="109,-0.5 109,-25.3 "></polyline>
<text text-anchor="middle" x="127.5" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff">1</text>
<polyline fill="none" stroke="#ffffff" points="146,-0.5 146,-25.3 "></polyline>
<text text-anchor="middle" x="164" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff">1</text>
<polyline fill="none" stroke="#ffffff" points="182,-0.5 182,-25.3 "></polyline>
<text text-anchor="middle" x="200.5" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff">1</text>
<polyline fill="none" stroke="#ffffff" points="219,-0.5 219,-25.3 "></polyline>
<text text-anchor="middle" x="237" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff">1</text>
<polyline fill="none" stroke="#ffffff" points="255,-0.5 255,-25.3 "></polyline>
<text text-anchor="middle" x="273.5" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff">1</text>
<polyline fill="none" stroke="#ffffff" points="292,-0.5 292,-25.3 "></polyline>
<text text-anchor="middle" x="310.5" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff">1</text>
<polyline fill="none" stroke="#ffffff" points="329,-0.5 329,-25.3 "></polyline>
<text text-anchor="middle" x="347" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff">1</text>
</g>
</g>
</svg>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="binary-1" class="level2">
<h2 class="anchored" data-anchor-id="binary-1">Binary</h2>
<ul>
<li>The benefit here is that is sufficient to note the presence or absence of a digit (<code>1</code>)</li>
<li>Versus the specific digit <span class="math inline">\(\in [1,9]\)</span> and presence of absense (<code>0</code>)</li>
</ul>
<div class="cell" data-fig-width="800px" data-fig-height="200px" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<svg width="800" height="200" viewbox="0.00 0.00 373.69 58.60" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 54.6)">
<title>finite_automata</title>
<polygon fill="#191919" stroke="transparent" points="-4,4 -4,-54.6 369.69,-54.6 369.69,4 -4,4"></polygon>
<!-- struct -->
<g id="node1" class="node">
<title>struct</title>
<polygon fill="none" stroke="#ffffff" points="0,-0.5 0,-50.1 365.69,-50.1 365.69,-0.5 0,-0.5"></polygon>
<text text-anchor="middle" x="18.28" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">2^0</text>
<polyline fill="none" stroke="#ffffff" points="36.57,-25.3 36.57,-50.1 "></polyline>
<text text-anchor="middle" x="54.85" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">2^1</text>
<polyline fill="none" stroke="#ffffff" points="73.14,-25.3 73.14,-50.1 "></polyline>
<text text-anchor="middle" x="91.42" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">2^2</text>
<polyline fill="none" stroke="#ffffff" points="109.71,-25.3 109.71,-50.1 "></polyline>
<text text-anchor="middle" x="127.99" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">2^3</text>
<polyline fill="none" stroke="#ffffff" points="146.28,-25.3 146.28,-50.1 "></polyline>
<text text-anchor="middle" x="164.56" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">2^4</text>
<polyline fill="none" stroke="#ffffff" points="182.85,-25.3 182.85,-50.1 "></polyline>
<text text-anchor="middle" x="201.13" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">2^5</text>
<polyline fill="none" stroke="#ffffff" points="219.42,-25.3 219.42,-50.1 "></polyline>
<text text-anchor="middle" x="237.7" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">2^6</text>
<polyline fill="none" stroke="#ffffff" points="255.99,-25.3 255.99,-50.1 "></polyline>
<text text-anchor="middle" x="274.27" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">2^7</text>
<polyline fill="none" stroke="#ffffff" points="292.55,-25.3 292.55,-50.1 "></polyline>
<text text-anchor="middle" x="310.84" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">2^8</text>
<polyline fill="none" stroke="#ffffff" points="329.12,-25.3 329.12,-50.1 "></polyline>
<text text-anchor="middle" x="347.41" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff">2^9</text>
<polyline fill="none" stroke="#ffffff" points="0,-25.3 365.69,-25.3 "></polyline>
<text text-anchor="middle" x="17.25" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="34.5,-0.5 34.5,-25.3 "></polyline>
<text text-anchor="middle" x="54" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff">1</text>
<polyline fill="none" stroke="#ffffff" points="73.5,-0.5 73.5,-25.3 "></polyline>
<text text-anchor="middle" x="91.25" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="109,-0.5 109,-25.3 "></polyline>
<text text-anchor="middle" x="126.25" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="143.5,-0.5 143.5,-25.3 "></polyline>
<text text-anchor="middle" x="163" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff">1</text>
<polyline fill="none" stroke="#ffffff" points="182.5,-0.5 182.5,-25.3 "></polyline>
<text text-anchor="middle" x="202" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff">1</text>
<polyline fill="none" stroke="#ffffff" points="221.5,-0.5 221.5,-25.3 "></polyline>
<text text-anchor="middle" x="238.75" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="256,-0.5 256,-25.3 "></polyline>
<text text-anchor="middle" x="273.75" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="291.5,-0.5 291.5,-25.3 "></polyline>
<text text-anchor="middle" x="311" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff">1</text>
<polyline fill="none" stroke="#ffffff" points="330.5,-0.5 330.5,-25.3 "></polyline>
<text text-anchor="middle" x="347.75" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
</g>
</g>
</svg>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="wait-a-minute." class="level2">
<h2 class="anchored" data-anchor-id="wait-a-minute.">Wait a minute.</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Why is the ones digit (<span class="math inline">\(n^0\)</span>) leftmost ?
<ul>
<li>The “least significant bit” or “lsb”</li>
</ul></li>
<li>In e.g.&nbsp;English place the “lsb” last.
<ul>
<li>CS 276 ⇒</li>
</ul></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="cell" data-fig-width="400px" data-fig-height="400px" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<svg width="400" height="400" viewbox="0.00 0.00 206.00 330.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 326)">
<title>finite_automata</title>
<polygon fill="#191919" stroke="transparent" points="-4,4 -4,-326 202,-326 202,4 -4,4"></polygon>
<!-- struct -->
<g id="node1" class="node">
<title>struct</title>
<polygon fill="none" stroke="#ffffff" points="33.65,-285.5 33.65,-321.5 164.35,-321.5 164.35,-285.5 33.65,-285.5"></polygon>
<text text-anchor="middle" x="55.43" y="-299.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">10^0</text>
<polyline fill="none" stroke="#ffffff" points="77.22,-285.7 77.22,-321.5 "></polyline>
<text text-anchor="middle" x="99" y="-299.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">10^1</text>
<polyline fill="none" stroke="#ffffff" points="120.78,-285.7 120.78,-321.5 "></polyline>
<text text-anchor="middle" x="142.57" y="-299.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">10^2</text>
</g>
<!-- struct0 -->
<g id="node2" class="node">
<title>struct0</title>
<polygon fill="none" stroke="#ffffff" points="0,-0.5 0,-248.5 54,-248.5 54,-0.5 0,-0.5"></polygon>
<text text-anchor="middle" x="27" y="-231.9" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="0,-223.7 54,-223.7 "></polyline>
<text text-anchor="middle" x="27" y="-207.1" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="0,-198.9 54,-198.9 "></polyline>
<text text-anchor="middle" x="27" y="-182.3" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="0,-174.1 54,-174.1 "></polyline>
<text text-anchor="middle" x="27" y="-157.5" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="0,-149.3 54,-149.3 "></polyline>
<text text-anchor="middle" x="27" y="-132.7" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="0,-124.5 54,-124.5 "></polyline>
<text text-anchor="middle" x="27" y="-107.9" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="0,-99.7 54,-99.7 "></polyline>
<text text-anchor="middle" x="27" y="-83.1" font-family="Times,serif" font-size="14.00" fill="#ffffff">6</text>
<polyline fill="none" stroke="#ffffff" points="0,-74.9 54,-74.9 "></polyline>
<text text-anchor="middle" x="27" y="-58.3" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="0,-50.1 54,-50.1 "></polyline>
<text text-anchor="middle" x="27" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="0,-25.3 54,-25.3 "></polyline>
<text text-anchor="middle" x="27" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
</g>
<!-- struct&#45;&gt;struct0 -->
<g id="edge1" class="edge">
<title>struct:0-&gt;struct0</title>
<path fill="none" stroke="#ffffff" d="M55,-285C55,-276.42 54.6,-267.62 53.9,-258.77"></path>
<polygon fill="#ffffff" stroke="#ffffff" points="57.38,-258.41 52.99,-248.78 50.41,-259.05 57.38,-258.41"></polygon>
</g>
<!-- struct1 -->
<g id="node3" class="node">
<title>struct1</title>
<polygon fill="none" stroke="#ffffff" points="72,-0.5 72,-248.5 126,-248.5 126,-0.5 72,-0.5"></polygon>
<text text-anchor="middle" x="99" y="-231.9" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="72,-223.7 126,-223.7 "></polyline>
<text text-anchor="middle" x="99" y="-207.1" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="72,-198.9 126,-198.9 "></polyline>
<text text-anchor="middle" x="99" y="-182.3" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="72,-174.1 126,-174.1 "></polyline>
<text text-anchor="middle" x="99" y="-157.5" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="72,-149.3 126,-149.3 "></polyline>
<text text-anchor="middle" x="99" y="-132.7" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="72,-124.5 126,-124.5 "></polyline>
<text text-anchor="middle" x="99" y="-107.9" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="72,-99.7 126,-99.7 "></polyline>
<text text-anchor="middle" x="99" y="-83.1" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="72,-74.9 126,-74.9 "></polyline>
<text text-anchor="middle" x="99" y="-58.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">7</text>
<polyline fill="none" stroke="#ffffff" points="72,-50.1 126,-50.1 "></polyline>
<text text-anchor="middle" x="99" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="72,-25.3 126,-25.3 "></polyline>
<text text-anchor="middle" x="99" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
</g>
<!-- struct&#45;&gt;struct1 -->
<g id="edge2" class="edge">
<title>struct:1-&gt;struct1</title>
<path fill="none" stroke="#ffffff" d="M99,-285C99,-276.45 99,-267.64 99,-258.76"></path>
<polygon fill="#ffffff" stroke="#ffffff" points="102.5,-258.72 99,-248.72 95.5,-258.72 102.5,-258.72"></polygon>
</g>
<!-- struct2 -->
<g id="node4" class="node">
<title>struct2</title>
<polygon fill="none" stroke="#ffffff" points="144,-0.5 144,-248.5 198,-248.5 198,-0.5 144,-0.5"></polygon>
<text text-anchor="middle" x="171" y="-231.9" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="144,-223.7 198,-223.7 "></polyline>
<text text-anchor="middle" x="171" y="-207.1" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="144,-198.9 198,-198.9 "></polyline>
<text text-anchor="middle" x="171" y="-182.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">2</text>
<polyline fill="none" stroke="#ffffff" points="144,-174.1 198,-174.1 "></polyline>
<text text-anchor="middle" x="171" y="-157.5" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="144,-149.3 198,-149.3 "></polyline>
<text text-anchor="middle" x="171" y="-132.7" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="144,-124.5 198,-124.5 "></polyline>
<text text-anchor="middle" x="171" y="-107.9" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="144,-99.7 198,-99.7 "></polyline>
<text text-anchor="middle" x="171" y="-83.1" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="144,-74.9 198,-74.9 "></polyline>
<text text-anchor="middle" x="171" y="-58.3" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="144,-50.1 198,-50.1 "></polyline>
<text text-anchor="middle" x="171" y="-33.5" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
<polyline fill="none" stroke="#ffffff" points="144,-25.3 198,-25.3 "></polyline>
<text text-anchor="middle" x="171" y="-8.7" font-family="Times,serif" font-size="14.00" fill="#ffffff"> </text>
</g>
<!-- struct&#45;&gt;struct2 -->
<g id="edge3" class="edge">
<title>struct:2-&gt;struct2</title>
<path fill="none" stroke="#ffffff" d="M143,-285C143,-276.42 143.4,-267.62 144.1,-258.77"></path>
<polygon fill="#ffffff" stroke="#ffffff" points="147.59,-259.05 145.01,-248.78 140.62,-258.41 147.59,-259.05"></polygon>
</g>
</g>
</svg>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="languages" class="level2">
<h2 class="anchored" data-anchor-id="languages">Languages</h2>
<ul>
<li>In e.g.&nbsp;spoken word, makes sense to lead with the biggest value.
<ul>
<li>200 of something is closer to 299 of something than 0 of something is to 9 of something.</li>
</ul></li>
<li>In e.g.&nbsp;programming, we often lead with lowest numerical index.
<ul>
<li>We look at the <code>arr[0]</code> of something before the <code>arr[1]</code> of something.</li>
</ul></li>
</ul>
</section>
<section id="in-practice" class="level2">
<h2 class="anchored" data-anchor-id="in-practice">In Practice</h2>
<ul>
<li>We end up with</li>
</ul>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1"></a><span class="co">"276"</span>[<span class="dv">0</span>] <span class="op">==</span> <span class="st">'2'</span> <span class="kw">and</span> <span class="dv">276</span> <span class="op">%</span> (<span class="dv">10</span> <span class="op">**</span> <span class="dv">1</span>) <span class="op">==</span> <span class="dv">6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Confusing!<br>
</li>
<li>Recall:</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource py number-lines code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1"></a><span class="co"># Strings are not reversed.</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>to_bool_str <span class="op">=</span> <span class="kw">lambda</span> x : [c <span class="op">==</span> <span class="st">'1'</span> <span class="cf">for</span> c <span class="kw">in</span> `{<span class="fl">.08</span><span class="er">b</span>}.<span class="bu">format</span>(x)]</span>
<span id="cb22-3"><a href="#cb22-3"></a><span class="co"># Numerics are reversed.</span></span>
<span id="cb22-4"><a href="#cb22-4"></a>to_bool_num <span class="op">=</span> <span class="kw">lambda</span> x : [<span class="dv">1</span> <span class="op">==</span> (x <span class="op">//</span> <span class="dv">2</span> <span class="op">**</span> i) <span class="op">%</span> <span class="dv">2</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">8</span>)][::<span class="op">-</span><span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="annoyance" class="level2">
<h2 class="anchored" data-anchor-id="annoyance">Annoyance</h2>
<ul>
<li>This gets <em>very annoying</em> when trying to move numbers around that don’t quite fit in some number of bits.
<ul>
<li>Say I have <code>0x1234</code> followers on Instagram📷</li>
<li>Boycott Meta etc etc.</li>
<li>And/or follow me <a href="https://www.instagram.com/calvinallegedly/"><span class="citation" data-cites="calvinallegedly">@calvinallegedly</span></a></li>
</ul>
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1"></a><span class="ex">$</span> python3 <span class="at">-c</span> <span class="st">"print(0x1234)"</span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="ex">4660</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li>Also imagine it is 1969 and you only have 8 bit integers.
<ul>
<li>Only 2 digits in hexadecimal representation.</li>
</ul></li>
</ul>
</section>
<section id="stdin" class="level2">
<h2 class="anchored" data-anchor-id="stdin">Stdin</h2>
<ul>
<li>We can use <code>stdin</code> and <code>read_line</code> to read in some values.</li>
<li>Recall:</li>
</ul>
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb24-1"><a href="#cb24-1"></a><span class="kw">let</span> <span class="kw">mut</span> guess <span class="op">=</span> <span class="dt">String</span><span class="pp">::</span>new()<span class="op">;</span></span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="pp">std::io::</span>stdin()<span class="op">.</span>read_line(<span class="op">&amp;</span><span class="kw">mut</span> guess)<span class="op">.</span>unwrap()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="test" class="level2">
<h2 class="anchored" data-anchor-id="test">Test</h2>
<ul>
<li>Test it</li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>src/main.rs</strong></pre>
</div>
<div class="sourceCode" id="cb25" data-filename="src/main.rs"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb25-1"><a href="#cb25-1"></a><span class="kw">fn</span> main() <span class="op">{</span></span>
<span id="cb25-2"><a href="#cb25-2"></a>    <span class="kw">let</span> <span class="kw">mut</span> guess <span class="op">=</span> <span class="dt">String</span><span class="pp">::</span>new()<span class="op">;</span></span>
<span id="cb25-3"><a href="#cb25-3"></a>    <span class="pp">std::io::</span>stdin()<span class="op">.</span>read_line(<span class="op">&amp;</span><span class="kw">mut</span> guess)<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb25-4"><a href="#cb25-4"></a>    <span class="pp">println!</span>(<span class="st">"{:?}"</span><span class="op">,</span> guess)<span class="op">;</span></span>
<span id="cb25-5"><a href="#cb25-5"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><code>cargo run</code> -&gt; type some nonsense -&gt; press ENTER</li>
</ul>
<div class="sourceCode" id="cb26"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1"></a><span class="ex">$</span> cargo run</span>
<span id="cb26-2"><a href="#cb26-2"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb26-3"><a href="#cb26-3"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb26-4"><a href="#cb26-4"></a><span class="ex">some</span> nonsense</span>
<span id="cb26-5"><a href="#cb26-5"></a><span class="st">"some nonsense\n"</span></span>
<span id="cb26-6"><a href="#cb26-6"></a><span class="ex">$</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="hex-reader" class="level2">
<h2 class="anchored" data-anchor-id="hex-reader">Hex reader</h2>
<ul>
<li>To read in hexadecimal values we must:
<ul>
<li>Read in the string.</li>
<li>Break into chunks.</li>
<li>Convert 2 character chunks to numerical values</li>
</ul></li>
</ul>
</section>
<section id="to-characters" class="level2">
<h2 class="anchored" data-anchor-id="to-characters">To characters</h2>
<ul>
<li>We’ll just iterate over the characters and print them in pairs.</li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>src/main.rs</strong></pre>
</div>
<div class="sourceCode" id="cb27" data-filename="src/main.rs"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb27-1"><a href="#cb27-1"></a><span class="kw">fn</span> main() <span class="op">{</span></span>
<span id="cb27-2"><a href="#cb27-2"></a>    <span class="kw">let</span> <span class="kw">mut</span> guess <span class="op">=</span> <span class="dt">String</span><span class="pp">::</span>new()<span class="op">;</span></span>
<span id="cb27-3"><a href="#cb27-3"></a>    <span class="pp">std::io::</span>stdin()<span class="op">.</span>read_line(<span class="op">&amp;</span><span class="kw">mut</span> guess)<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb27-4"><a href="#cb27-4"></a>    <span class="kw">let</span> <span class="kw">mut</span> flip <span class="op">=</span> <span class="cn">false</span><span class="op">;</span></span>
<span id="cb27-5"><a href="#cb27-5"></a>    <span class="cf">for</span> c <span class="kw">in</span> guess<span class="op">.</span>chars() <span class="op">{</span></span>
<span id="cb27-6"><a href="#cb27-6"></a>        <span class="cf">if</span> flip <span class="op">{</span></span>
<span id="cb27-7"><a href="#cb27-7"></a>            <span class="pp">println!</span>(c)<span class="op">;</span></span>
<span id="cb27-8"><a href="#cb27-8"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb27-9"><a href="#cb27-9"></a>            <span class="pp">print!</span>(c)<span class="op">;</span></span>
<span id="cb27-10"><a href="#cb27-10"></a>        <span class="op">}</span></span>
<span id="cb27-11"><a href="#cb27-11"></a>        flip <span class="op">=</span> <span class="op">!</span>flip<span class="op">;</span></span>
<span id="cb27-12"><a href="#cb27-12"></a>    <span class="pp">println!</span>(<span class="st">"{:?}"</span><span class="op">,</span> guess)<span class="op">;</span></span>
<span id="cb27-13"><a href="#cb27-13"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="test-it-1" class="level2">
<h2 class="anchored" data-anchor-id="test-it-1">Test it</h2>
<ul>
<li>Works sometimes better than others</li>
</ul>
<div class="sourceCode" id="cb28"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1"></a><span class="ex">$</span> cargo run</span>
<span id="cb28-2"><a href="#cb28-2"></a>   <span class="ex">Compiling</span> scratch v0.1.0 <span class="er">(</span><span class="ex">/home/user/tmp/scratch</span><span class="kw">)</span></span>
<span id="cb28-3"><a href="#cb28-3"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.23s</span></span>
<span id="cb28-4"><a href="#cb28-4"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb28-5"><a href="#cb28-5"></a><span class="ex">0x1234</span></span>
<span id="cb28-6"><a href="#cb28-6"></a><span class="ex">0x</span></span>
<span id="cb28-7"><a href="#cb28-7"></a><span class="ex">12</span></span>
<span id="cb28-8"><a href="#cb28-8"></a><span class="ex">34</span></span>
<span id="cb28-9"><a href="#cb28-9"></a></span>
<span id="cb28-10"><a href="#cb28-10"></a><span class="ex">$</span> cargo run</span>
<span id="cb28-11"><a href="#cb28-11"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb28-12"><a href="#cb28-12"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb28-13"><a href="#cb28-13"></a><span class="ex">0x123</span></span>
<span id="cb28-14"><a href="#cb28-14"></a><span class="ex">0x</span></span>
<span id="cb28-15"><a href="#cb28-15"></a><span class="ex">12</span></span>
<span id="cb28-16"><a href="#cb28-16"></a><span class="ex">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="missing-pieces" class="level2">
<h2 class="anchored" data-anchor-id="missing-pieces">Missing pieces</h2>
<ul>
<li>We need to throw out the prefix</li>
<li>We need to make sure we begin, rather than end, on a possible singleton.</li>
<li>Here’s the plan:
<ul>
<li>Skip the first two</li>
<li>Traverse to the end of string.</li>
<li>Build doubles back up.</li>
</ul></li>
</ul>
</section>
<section id="skip" class="level2">
<h2 class="anchored" data-anchor-id="skip">Skip</h2>
<ul>
<li>We can apply <code>next()</code> to an iterator to read characters.</li>
<li>It’s basically a pop operation.</li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>src/main.rs</strong></pre>
</div>
<div class="sourceCode" id="cb29" data-filename="src/main.rs"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb29-1"><a href="#cb29-1"></a><span class="kw">fn</span> main() <span class="op">{</span></span>
<span id="cb29-2"><a href="#cb29-2"></a>    <span class="kw">let</span> <span class="kw">mut</span> guess <span class="op">=</span> <span class="dt">String</span><span class="pp">::</span>new()<span class="op">;</span></span>
<span id="cb29-3"><a href="#cb29-3"></a>    <span class="pp">std::io::</span>stdin()<span class="op">.</span>read_line(<span class="op">&amp;</span><span class="kw">mut</span> guess)<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb29-4"><a href="#cb29-4"></a>    <span class="kw">let</span> <span class="kw">mut</span> flip <span class="op">=</span> <span class="cn">false</span><span class="op">;</span></span>
<span id="cb29-5"><a href="#cb29-5"></a>    <span class="kw">let</span> <span class="kw">mut</span> cs <span class="op">=</span> guess<span class="op">.</span>chars()<span class="op">;</span></span>
<span id="cb29-6"><a href="#cb29-6"></a>    cs<span class="op">.</span>next() <span class="co">// 0</span></span>
<span id="cb29-7"><a href="#cb29-7"></a>    cs<span class="op">.</span>next() <span class="co">// x</span></span>
<span id="cb29-8"><a href="#cb29-8"></a>    <span class="cf">for</span> c <span class="kw">in</span> cs <span class="op">{</span></span>
<span id="cb29-9"><a href="#cb29-9"></a>        <span class="cf">if</span> flip <span class="op">{</span></span>
<span id="cb29-10"><a href="#cb29-10"></a>            <span class="pp">println!</span>(c)<span class="op">;</span></span>
<span id="cb29-11"><a href="#cb29-11"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb29-12"><a href="#cb29-12"></a>            <span class="pp">print!</span>(c)<span class="op">;</span></span>
<span id="cb29-13"><a href="#cb29-13"></a>        <span class="op">}</span></span>
<span id="cb29-14"><a href="#cb29-14"></a>        flip <span class="op">=</span> <span class="op">!</span>flip<span class="op">;</span></span>
<span id="cb29-15"><a href="#cb29-15"></a>    <span class="pp">println!</span>(<span class="st">"{:?}"</span><span class="op">,</span> guess)<span class="op">;</span></span>
<span id="cb29-16"><a href="#cb29-16"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="build-up" class="level2">
<h2 class="anchored" data-anchor-id="build-up">Build up</h2>
<ul>
<li>From there we just need to get pairs somehow.</li>
<li>It’s not too bad to get the last character…</li>
</ul>
<div class="sourceCode" id="cb30"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb30-1"><a href="#cb30-1"></a><span class="kw">fn</span> last(cs<span class="op">:</span><span class="pp">std::</span><span class="dt">str</span><span class="pp">::</span>Chars) <span class="op">-&gt;</span> <span class="dt">char</span> <span class="op">{</span></span>
<span id="cb30-2"><a href="#cb30-2"></a>    <span class="kw">let</span> <span class="kw">mut</span> <span class="kw">final</span> <span class="op">=</span> cs<span class="op">.</span>next()</span>
<span id="cb30-3"><a href="#cb30-3"></a>    <span class="cf">for</span> c <span class="kw">in</span> cs <span class="op">{</span></span>
<span id="cb30-4"><a href="#cb30-4"></a>        <span class="kw">final</span> <span class="op">=</span> c<span class="op">;</span></span>
<span id="cb30-5"><a href="#cb30-5"></a>    <span class="op">}</span></span>
<span id="cb30-6"><a href="#cb30-6"></a>    <span class="cf">return</span> <span class="kw">final</span><span class="op">;</span></span>
<span id="cb30-7"><a href="#cb30-7"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="uh-oh" class="level2">
<h2 class="anchored" data-anchor-id="uh-oh">Uh oh!</h2>
<ul>
<li>When looping over an iterator, we get the type itself.
<ul>
<li>The loop just terminates when it has no more elements.</li>
</ul></li>
<li>When calling <code>.next()</code>, we get an option.
<ul>
<li>There is not always a <code>.next()</code> element.</li>
</ul>
<div class="sourceCode" id="cb31"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1"></a><span class="va">error</span><span class="op">[</span>E0308<span class="op">]</span><span class="ex">:</span> mismatched types</span>
<span id="cb31-2"><a href="#cb31-2"></a> <span class="ex">--</span><span class="op">&gt;</span> src/main.rs:4:16</span>
<span id="cb31-3"><a href="#cb31-3"></a><span class="kw">|</span></span>
<span id="cb31-4"><a href="#cb31-4"></a><span class="ex">2</span> <span class="kw">|</span>     <span class="bu">let</span> <span class="va">mut</span> <span class="va">last</span> <span class="op">=</span> <span class="va">cs</span>.next<span class="er">(</span><span class="kw">);</span></span>
<span id="cb31-5"><a href="#cb31-5"></a><span class="kw">|</span>                    <span class="ex">---------</span> expected due to this value</span>
<span id="cb31-6"><a href="#cb31-6"></a><span class="ex">3</span> <span class="kw">|</span>     <span class="cf">for</span> c <span class="kw">in</span> cs {</span>
<span id="cb31-7"><a href="#cb31-7"></a><span class="ex">4</span> <span class="kw">|</span>         <span class="fu">last</span> = c<span class="kw">;</span></span>
<span id="cb31-8"><a href="#cb31-8"></a><span class="kw">|</span>                <span class="ex">^</span> expected <span class="kw">`</span><span class="ex">Option</span><span class="op">&lt;</span>char<span class="op">&gt;</span><span class="kw">`</span>, found <span class="kw">`</span><span class="ex">char</span><span class="kw">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
</section>
<section id="recurse" class="level2">
<h2 class="anchored" data-anchor-id="recurse">Recurse</h2>
<div class="sourceCode" id="cb32"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb32-1"><a href="#cb32-1"></a><span class="kw">fn</span> last(<span class="kw">mut</span> cs<span class="op">:</span><span class="pp">std::</span><span class="dt">str</span><span class="pp">::</span>Chars) <span class="op">-&gt;</span> <span class="dt">Option</span><span class="op">&lt;</span><span class="dt">char</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb32-2"><a href="#cb32-2"></a>    <span class="cf">return</span> <span class="cf">match</span> cs<span class="op">.</span>next() <span class="op">{</span></span>
<span id="cb32-3"><a href="#cb32-3"></a>        <span class="cn">Some</span>(n) <span class="op">=&gt;</span> <span class="cf">match</span> last(cs) <span class="op">{</span>  <span class="co">// if there's digits here, look for more</span></span>
<span id="cb32-4"><a href="#cb32-4"></a>            <span class="cn">Some</span>(m) <span class="op">=&gt;</span> <span class="cn">Some</span>(m)<span class="op">,</span>      <span class="co">// if the last is found, return it</span></span>
<span id="cb32-5"><a href="#cb32-5"></a>            <span class="cn">None</span> <span class="op">=&gt;</span> <span class="cn">Some</span>(n)<span class="op">,</span>         <span class="co">// no more letters - we are last, return n</span></span>
<span id="cb32-6"><a href="#cb32-6"></a>        <span class="op">},</span></span>
<span id="cb32-7"><a href="#cb32-7"></a>        <span class="cn">None</span> <span class="op">=&gt;</span> <span class="cn">None</span><span class="op">,</span>                <span class="co">// required by `rustc` in case we don't input anything</span></span>
<span id="cb32-8"><a href="#cb32-8"></a>    <span class="op">}</span></span>
<span id="cb32-9"><a href="#cb32-9"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="try-it-out" class="level2">
<h2 class="anchored" data-anchor-id="try-it-out">Try it out!</h2>
<div class="sourceCode" id="cb33"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1"></a><span class="ex">$</span> cargo run</span>
<span id="cb33-2"><a href="#cb33-2"></a>   <span class="ex">Compiling</span> scratch v0.1.0 <span class="er">(</span><span class="ex">/home/user/tmp/scratch</span><span class="kw">)</span></span>
<span id="cb33-3"><a href="#cb33-3"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.22s</span></span>
<span id="cb33-4"><a href="#cb33-4"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb33-5"><a href="#cb33-5"></a><span class="ex">0x1234</span></span>
<span id="cb33-6"><a href="#cb33-6"></a><span class="ex">Some</span><span class="er">(</span><span class="st">'\n'</span><span class="kw">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Whoops! Forgot the newline… match <code>Some('\n')</code> to <code>None</code></li>
</ul>
<div class="sourceCode" id="cb34"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb34-1"><a href="#cb34-1"></a><span class="kw">fn</span> last(<span class="kw">mut</span> cs<span class="op">:</span><span class="pp">std::</span><span class="dt">str</span><span class="pp">::</span>Chars) <span class="op">-&gt;</span> <span class="dt">Option</span><span class="op">&lt;</span><span class="dt">char</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb34-2"><a href="#cb34-2"></a>    <span class="cf">return</span> <span class="cf">match</span> cs<span class="op">.</span>next() <span class="op">{</span></span>
<span id="cb34-3"><a href="#cb34-3"></a>        <span class="cn">Some</span>(<span class="ch">'</span><span class="sc">\n</span><span class="ch">'</span>) <span class="op">=&gt;</span> <span class="cn">None</span><span class="op">,</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="pair-it-up" class="level2">
<h2 class="anchored" data-anchor-id="pair-it-up">Pair it up</h2>
<ul>
<li>Let’s find the last two values.</li>
<li>We already found the last one, just now if we’ve found it, pair it up and print it.</li>
</ul>
<div class="sourceCode" id="cb35"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb35-1"><a href="#cb35-1"></a><span class="kw">fn</span> last(<span class="kw">mut</span> cs<span class="op">:</span><span class="pp">std::</span><span class="dt">str</span><span class="pp">::</span>Chars) <span class="op">-&gt;</span> <span class="dt">Option</span><span class="op">&lt;</span><span class="dt">char</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb35-2"><a href="#cb35-2"></a>    <span class="cf">return</span> <span class="cf">match</span> cs<span class="op">.</span>next() <span class="op">{</span></span>
<span id="cb35-3"><a href="#cb35-3"></a>        <span class="cn">Some</span>(n) <span class="op">=&gt;</span> <span class="cf">match</span> last(cs) <span class="op">{</span>  <span class="co">// if there's digits here, look for more</span></span>
<span id="cb35-4"><a href="#cb35-4"></a>            <span class="cn">Some</span>(m) <span class="op">=&gt;</span> <span class="op">{</span></span>
<span id="cb35-5"><a href="#cb35-5"></a>                <span class="pp">println!</span>(<span class="st">"{n}{m}"</span>)<span class="op">;</span>  <span class="co">// If last is found, print this then last</span></span>
<span id="cb35-6"><a href="#cb35-6"></a>                <span class="cn">Some</span>(m)<span class="op">,</span>             <span class="co">// if the last is found, return it</span></span>
<span id="cb35-7"><a href="#cb35-7"></a>            <span class="cn">None</span> <span class="op">=&gt;</span> <span class="cn">Some</span>(n)<span class="op">,</span>         <span class="co">// no more letters - we are last, return n</span></span>
<span id="cb35-8"><a href="#cb35-8"></a>        <span class="op">},</span></span>
<span id="cb35-9"><a href="#cb35-9"></a>        <span class="cn">None</span> <span class="op">=&gt;</span> <span class="cn">None</span><span class="op">,</span>                <span class="co">// required by `rustc` in case we don't input anything</span></span>
<span id="cb35-10"><a href="#cb35-10"></a>    <span class="op">}</span></span>
<span id="cb35-11"><a href="#cb35-11"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="whoops" class="level2">
<h2 class="anchored" data-anchor-id="whoops">Whoops!</h2>
<ul>
<li>We print every digit paired with the last one!</li>
</ul>
<div class="sourceCode" id="cb36"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb36-1"><a href="#cb36-1"></a><span class="op">$</span> cargo run</span>
<span id="cb36-2"><a href="#cb36-2"></a>   Compiling scratch v0<span class="op">.</span><span class="dv">1.0</span> (<span class="op">/</span>home<span class="op">/</span>user<span class="op">/</span>tmp<span class="op">/</span>scratch)</span>
<span id="cb36-3"><a href="#cb36-3"></a>    Finished `dev` profile [unoptimized <span class="op">+</span> debuginfo] target(s) <span class="kw">in</span> <span class="dv">0</span><span class="op">.</span>23s</span>
<span id="cb36-4"><a href="#cb36-4"></a>     Running `target<span class="op">/</span>debug<span class="op">/</span>scratch`</span>
<span id="cb36-5"><a href="#cb36-5"></a><span class="dv">0x1234</span></span>
<span id="cb36-6"><a href="#cb36-6"></a><span class="dv">34</span></span>
<span id="cb36-7"><a href="#cb36-7"></a><span class="dv">24</span></span>
<span id="cb36-8"><a href="#cb36-8"></a><span class="dv">14</span></span>
<span id="cb36-9"><a href="#cb36-9"></a><span class="cn">Some</span>(<span class="ch">'4'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>We can:
<ul>
<li>Remove the print from <code>main</code></li>
<li>Return <code>None</code> after printing a pair.</li>
</ul></li>
</ul>
</section>
<section id="altogether" class="level2">
<h2 class="anchored" data-anchor-id="altogether">Altogether</h2>
<div class="columns">
<div class="column" style="width:40%;">
<ul>
<li>Rename <code>last</code> to <code>pairs</code></li>
<li>Print single digits in <code>main</code>
<ul>
<li>Use <code>if let</code> - kind of a single pattern match.</li>
</ul></li>
</ul>
</div><div class="column" style="width:60%;">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>src/main.rs</strong></pre>
</div>
<div class="sourceCode" id="cb37" data-filename="src/main.rs"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb37-1"><a href="#cb37-1"></a><span class="kw">fn</span> pairs(<span class="kw">mut</span> cs<span class="op">:</span><span class="pp">std::</span><span class="dt">str</span><span class="pp">::</span>Chars) <span class="op">-&gt;</span> <span class="dt">Option</span><span class="op">&lt;</span><span class="dt">char</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb37-2"><a href="#cb37-2"></a>    <span class="cf">return</span> <span class="cf">match</span> cs<span class="op">.</span>next() <span class="op">{</span></span>
<span id="cb37-3"><a href="#cb37-3"></a>        <span class="cn">Some</span>(<span class="ch">'</span><span class="sc">\n</span><span class="ch">'</span>) <span class="op">=&gt;</span> <span class="cn">None</span><span class="op">,</span></span>
<span id="cb37-4"><a href="#cb37-4"></a>        <span class="cn">Some</span>(n) <span class="op">=&gt;</span> <span class="cf">match</span> pairs(cs) <span class="op">{</span></span>
<span id="cb37-5"><a href="#cb37-5"></a>            <span class="cn">Some</span>(m) <span class="op">=&gt;</span> <span class="op">{</span></span>
<span id="cb37-6"><a href="#cb37-6"></a>                <span class="pp">println!</span>(<span class="st">"{n}{m}"</span>)<span class="op">;</span></span>
<span id="cb37-7"><a href="#cb37-7"></a>                <span class="cn">None</span></span>
<span id="cb37-8"><a href="#cb37-8"></a>            <span class="op">}</span></span>
<span id="cb37-9"><a href="#cb37-9"></a>            <span class="cn">None</span> <span class="op">=&gt;</span> <span class="cn">Some</span>(n)<span class="op">,</span></span>
<span id="cb37-10"><a href="#cb37-10"></a>        <span class="op">},</span></span>
<span id="cb37-11"><a href="#cb37-11"></a>        <span class="cn">None</span> <span class="op">=&gt;</span> <span class="cn">None</span><span class="op">,</span></span>
<span id="cb37-12"><a href="#cb37-12"></a>    <span class="op">}</span></span>
<span id="cb37-13"><a href="#cb37-13"></a><span class="op">}</span></span>
<span id="cb37-14"><a href="#cb37-14"></a></span>
<span id="cb37-15"><a href="#cb37-15"></a><span class="kw">fn</span> main() <span class="op">{</span></span>
<span id="cb37-16"><a href="#cb37-16"></a>    <span class="kw">let</span> <span class="kw">mut</span> guess <span class="op">=</span> <span class="dt">String</span><span class="pp">::</span>new()<span class="op">;</span></span>
<span id="cb37-17"><a href="#cb37-17"></a>    <span class="pp">std::io::</span>stdin()<span class="op">.</span>read_line(<span class="op">&amp;</span><span class="kw">mut</span> guess)<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb37-18"><a href="#cb37-18"></a>    <span class="kw">let</span> <span class="kw">mut</span> cs <span class="op">=</span> guess<span class="op">.</span>chars()<span class="op">;</span></span>
<span id="cb37-19"><a href="#cb37-19"></a>    cs<span class="op">.</span>next()<span class="op">;</span></span>
<span id="cb37-20"><a href="#cb37-20"></a>    cs<span class="op">.</span>next()<span class="op">;</span></span>
<span id="cb37-21"><a href="#cb37-21"></a>    <span class="cf">if</span> <span class="kw">let</span> <span class="cn">Some</span>(n) <span class="op">=</span> pairs(cs) <span class="op">{</span></span>
<span id="cb37-22"><a href="#cb37-22"></a>        <span class="pp">println!</span>(<span class="st">"{n}"</span>)<span class="op">;</span></span>
<span id="cb37-23"><a href="#cb37-23"></a>    <span class="op">}</span></span>
<span id="cb37-24"><a href="#cb37-24"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="just-parse-nm" class="level2">
<h2 class="anchored" data-anchor-id="just-parse-nm">Just parse <code>{n}{m}</code></h2>
<ul>
<li>The built-in is <code>from_str_radix</code> for e.g.&nbsp;<code>u8</code>.
<ul>
<li>Turn characters into singleton strings..</li>
<li>(We could pattern match <code>'1' =&gt; 1</code> instead)</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb38"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb38-1"><a href="#cb38-1"></a><span class="kw">fn</span> two_hex(n<span class="op">:</span><span class="dt">char</span><span class="op">,</span> m<span class="op">:</span><span class="dt">char</span>) <span class="op">-&gt;</span> <span class="dt">u8</span> <span class="op">{</span></span>
<span id="cb38-2"><a href="#cb38-2"></a>    <span class="kw">let</span> n <span class="op">=</span> <span class="dt">u8</span><span class="pp">::</span>from_str_radix(<span class="op">&amp;</span>n<span class="op">.</span>to_string()<span class="op">,</span> <span class="dv">16</span>)<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb38-3"><a href="#cb38-3"></a>    <span class="kw">let</span> m <span class="op">=</span> <span class="dt">u8</span><span class="pp">::</span>from_str_radix(<span class="op">&amp;</span>m<span class="op">.</span>to_string()<span class="op">,</span> <span class="dv">16</span>)<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb38-4"><a href="#cb38-4"></a>    <span class="cf">return</span> n <span class="op">*</span> <span class="dv">16</span> <span class="op">+</span> m<span class="op">;</span></span>
<span id="cb38-5"><a href="#cb38-5"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="bundle-into-a-vector" class="level2">
<h2 class="anchored" data-anchor-id="bundle-into-a-vector">Bundle into a <em>vector</em></h2>
<ul>
<li>We introduce vectors.
<ul>
<li>So close to a Pythonic <code>&lt;class 'list'&gt;</code> I can’t tell the difference.</li>
</ul></li>
<li>Vs. printing, toss numeric values into a vectors.</li>
<li>This is slightly complicated by the fact that, uh…</li>
</ul>
<div class="sourceCode" id="cb39"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb39-1"><a href="#cb39-1"></a><span class="kw">fn</span> pairs(<span class="kw">mut</span> cs<span class="op">:</span><span class="pp">std::</span><span class="dt">str</span><span class="pp">::</span>Chars) <span class="op">-&gt;</span> <span class="dt">Option</span><span class="op">&lt;</span><span class="dt">char</span><span class="op">&gt;</span> <span class="op">{</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>There’s no vector there!
<ul>
<li>Can’t just return it (because we’re using recursion #based)</li>
</ul></li>
</ul>
</section>
<section id="create-vectors" class="level2">
<h2 class="anchored" data-anchor-id="create-vectors">Create vectors</h2>
<ul>
<li>True to form in Rust, vectors require specific initialization as they are data structure.
<ul>
<li>In this way they are like big S <code>String</code>s with <code>String::new()</code></li>
</ul></li>
<li>We can use <code>Vec::new()</code> or the macro <code>vec!</code>. <a href="https://doc.rust-lang.org/std/vec/struct.Vec.html">Read more</a></li>
</ul>
<div class="sourceCode" id="cb40"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb40-1"><a href="#cb40-1"></a><span class="kw">let</span> <span class="kw">mut</span> vec1 <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb40-2"><a href="#cb40-2"></a>vec1<span class="op">.</span>push(<span class="dv">4</span>)<span class="op">;</span></span>
<span id="cb40-3"><a href="#cb40-3"></a><span class="kw">let</span> vec2 <span class="op">=</span> <span class="dt">Vec</span><span class="pp">::</span>from([<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span>])<span class="op">;</span></span>
<span id="cb40-4"><a href="#cb40-4"></a><span class="pp">assert_eq!</span>(vec1<span class="op">,</span> vec2)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="sketch" class="level2">
<h2 class="anchored" data-anchor-id="sketch">Sketch</h2>
<ul>
<li>Let’s convert <code>pairs</code> to a helper function.</li>
<li>Let’s move the odd case handlying from main to a wrapper function.
<ul>
<li>And also popping the first two vals.</li>
</ul></li>
<li>Let’s initialize a mutable vector in the wrapper.</li>
<li>We’ll maintain the return type of <code>pairs</code> but add an argument.</li>
<li>We’ll return the vector from the wrapper.</li>
</ul>
</section>
<section id="wrapper" class="level2">
<h2 class="anchored" data-anchor-id="wrapper">Wrapper</h2>
<div class="columns">
<div class="column" style="width:70%;">
<div class="sourceCode" id="cb41"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb41-1"><a href="#cb41-1"></a><span class="kw">fn</span> chars_to_vec(<span class="kw">mut</span> cs<span class="op">:</span><span class="pp">std::</span><span class="dt">str</span><span class="pp">::</span>Chars) <span class="op">-&gt;</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">u8</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb41-2"><a href="#cb41-2"></a>    <span class="kw">let</span> <span class="kw">mut</span> vals <span class="op">=</span> <span class="dt">Vec</span><span class="pp">::</span>new()<span class="op">;</span></span>
<span id="cb41-3"><a href="#cb41-3"></a>    <span class="co">// from old main</span></span>
<span id="cb41-4"><a href="#cb41-4"></a>    cs<span class="op">.</span>next()<span class="op">;</span></span>
<span id="cb41-5"><a href="#cb41-5"></a>    cs<span class="op">.</span>next()<span class="op">;</span></span>
<span id="cb41-6"><a href="#cb41-6"></a>    <span class="cf">if</span> <span class="kw">let</span> <span class="cn">Some</span>(n) <span class="op">=</span> pairs(cs<span class="op">,</span> <span class="op">&amp;</span><span class="kw">mut</span> vals) <span class="op">{</span></span>
<span id="cb41-7"><a href="#cb41-7"></a>        vals<span class="op">.</span>push(two_hex(<span class="ch">'0'</span><span class="op">,</span> n))<span class="op">;</span></span>
<span id="cb41-8"><a href="#cb41-8"></a>    <span class="op">}</span></span>
<span id="cb41-9"><a href="#cb41-9"></a>    <span class="co">// "Prints and returns the value of a given</span></span>
<span id="cb41-10"><a href="#cb41-10"></a>    <span class="co">// expression for quick and dirty debugging."</span></span>
<span id="cb41-11"><a href="#cb41-11"></a>    <span class="pp">dbg!</span>(<span class="op">&amp;</span>vals)<span class="op">;</span></span>
<span id="cb41-12"><a href="#cb41-12"></a>    <span class="cf">return</span> vals<span class="op">;</span></span>
<span id="cb41-13"><a href="#cb41-13"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:30%;">
<ul>
<li>Create a vector.</li>
<li>Let pairs “borrow” the vector mutably - so it can add stuff.</li>
</ul>
</div>
</div>
<ul>
<li>Let <code>dbg!</code> “borrow” the vector to print it.</li>
<li>Return the vector when you’re done!</li>
</ul>
</section>
<section id="vector-handling" class="level2">
<h2 class="anchored" data-anchor-id="vector-handling">Vector handling</h2>
<div class="sourceCode" id="cb42"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb42-1"><a href="#cb42-1"></a><span class="kw">fn</span> pairs(<span class="kw">mut</span> cs<span class="op">:</span><span class="pp">std::</span><span class="dt">str</span><span class="pp">::</span>Chars<span class="op">,</span> vals<span class="op">:&amp;</span><span class="kw">mut</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">u8</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="dt">Option</span><span class="op">&lt;</span><span class="dt">char</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb42-2"><a href="#cb42-2"></a>    <span class="cf">return</span> <span class="cf">match</span> cs<span class="op">.</span>next() <span class="op">{</span></span>
<span id="cb42-3"><a href="#cb42-3"></a>        <span class="cn">Some</span>(<span class="ch">'</span><span class="sc">\n</span><span class="ch">'</span>) <span class="op">=&gt;</span> <span class="cn">None</span><span class="op">,</span></span>
<span id="cb42-4"><a href="#cb42-4"></a>        <span class="cn">Some</span>(n) <span class="op">=&gt;</span> <span class="cf">match</span> pairs(cs<span class="op">,</span> vals) <span class="op">{</span></span>
<span id="cb42-5"><a href="#cb42-5"></a>            <span class="cn">Some</span>(m) <span class="op">=&gt;</span> <span class="op">{</span></span>
<span id="cb42-6"><a href="#cb42-6"></a>                vals<span class="op">.</span>push(two_hex(n<span class="op">,</span>m))<span class="op">;</span>  <span class="co">// only change</span></span>
<span id="cb42-7"><a href="#cb42-7"></a>                <span class="cn">None</span></span>
<span id="cb42-8"><a href="#cb42-8"></a>            <span class="op">},</span></span>
<span id="cb42-9"><a href="#cb42-9"></a>            <span class="cn">None</span> <span class="op">=&gt;</span> <span class="cn">Some</span>(n)<span class="op">,</span></span>
<span id="cb42-10"><a href="#cb42-10"></a>        <span class="op">},</span></span>
<span id="cb42-11"><a href="#cb42-11"></a>        <span class="cn">None</span> <span class="op">=&gt;</span> <span class="cn">None</span><span class="op">,</span></span>
<span id="cb42-12"><a href="#cb42-12"></a>    <span class="op">}</span></span>
<span id="cb42-13"><a href="#cb42-13"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Add a “borrowed mutable vector argument”</li>
<li>Push some <code>u8</code>s into it.</li>
</ul>
</section>
<section id="how-do-we-feel-about-this" class="level2">
<h2 class="anchored" data-anchor-id="how-do-we-feel-about-this">How do we feel about this?</h2>
<div class="sourceCode" id="cb43"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1"></a><span class="ex">$</span> cargo r</span>
<span id="cb43-2"><a href="#cb43-2"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb43-3"><a href="#cb43-3"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb43-4"><a href="#cb43-4"></a><span class="ex">0x01020304</span></span>
<span id="cb43-5"><a href="#cb43-5"></a><span class="ex">[src/main.rs:10:5]</span> <span class="kw">&amp;</span><span class="ex">vals</span> = [</span>
<span id="cb43-6"><a href="#cb43-6"></a>    <span class="ex">4,</span></span>
<span id="cb43-7"><a href="#cb43-7"></a>    <span class="ex">3,</span></span>
<span id="cb43-8"><a href="#cb43-8"></a>    <span class="ex">2,</span></span>
<span id="cb43-9"><a href="#cb43-9"></a>    <span class="ex">1,</span></span>
<span id="cb43-10"><a href="#cb43-10"></a><span class="ex">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="quoth-wikipedia" class="level2">
<h2 class="anchored" data-anchor-id="quoth-wikipedia">Quoth Wikipedia</h2>
<blockquote class="blockquote">
<p><a href="https://en.wikipedia.org/wiki/Endianness">In computing, endianness is the order in which bytes within a word data type are transmitted over a data communication medium or addressed in computer memory, counting only byte significance compared to earliness.</a></p>
</blockquote>
<ul>
<li>We can regard our vector as a 32 bit word of 4 bytes.</li>
<li>We can regard the indices (<code>0..4</code>) as the addresses in computer memory.</li>
</ul>
</section>
<section id="two-endians" class="level2">
<h2 class="anchored" data-anchor-id="two-endians">Two endians</h2>
<blockquote class="blockquote">
<p>A big-endian system stores the most significant byte (MSB) of a word at the smallest memory address and the least significant byte (LSB) at the largest.</p>
</blockquote>
<blockquote class="blockquote">
<p>A little-endian system, in contrast, stores the least-significant byte (LSB) at the smallest address.</p>
</blockquote>
<ul>
<li>In <code>0x01020304</code>, the MSB is <code>1</code>, and LSB is <code>4</code></li>
<li><code>[4, 3, 2, 1]</code>, the smallest memory address contains a <code>4</code>.</li>
</ul>
</section>
<section id="arrays-to-numbers" class="level2">
<h2 class="anchored" data-anchor-id="arrays-to-numbers">Arrays to Numbers</h2>
<ul>
<li>We can reverse the operation by:
<ul>
<li>Looping over the array.</li>
<li>Multiplying by the numerical base, some power of two</li>
<li>Adding up the different values.</li>
</ul>
<div class="sourceCode" id="cb44"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb44-1"><a href="#cb44-1"></a>fn custom_u8s_to_u32(vals <span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">u8</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="dt">u32</span> <span class="op">{</span></span>
<span id="cb44-2"><a href="#cb44-2"></a>  <span class="co">// We'll just take the first four for now</span></span>
<span id="cb44-3"><a href="#cb44-3"></a>  <span class="kw">let</span> <span class="kw">mut</span> ret <span class="op">:</span> <span class="dt">u32</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb44-4"><a href="#cb44-4"></a>  <span class="cf">for</span> i <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span><span class="dv">4</span> <span class="op">{</span></span>
<span id="cb44-5"><a href="#cb44-5"></a>      <span class="pp">dbg!</span>((i<span class="op">,</span> vals[i]))<span class="op">;</span></span>
<span id="cb44-6"><a href="#cb44-6"></a>      ret <span class="op">+=</span> (vals[i] <span class="kw">as</span> <span class="dt">u32</span>) <span class="op">*</span> ((<span class="dv">2</span> <span class="kw">as</span> <span class="dt">u32</span>)<span class="op">.</span>pow(<span class="dv">8</span> <span class="op">*</span> (i <span class="kw">as</span> <span class="dt">u32</span>)))<span class="op">;</span></span>
<span id="cb44-7"><a href="#cb44-7"></a>  <span class="op">}</span></span>
<span id="cb44-8"><a href="#cb44-8"></a>  <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb44-9"><a href="#cb44-9"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul>
</section>
<section id="try-it-out-1" class="level2">
<h2 class="anchored" data-anchor-id="try-it-out-1">Try it out</h2>
<div class="columns">
<div class="column" style="width:40%;">
<ul>
<li>Remember to update <code>main</code></li>
</ul>
<div class="sourceCode" id="cb45"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb45-1"><a href="#cb45-1"></a><span class="kw">let</span> vals <span class="op">=</span> chars_to_vec(cs)<span class="op">;</span></span>
<span id="cb45-2"><a href="#cb45-2"></a><span class="kw">let</span> val <span class="op">=</span> custom_u8s_to_u32(vals)<span class="op">;</span></span>
<span id="cb45-3"><a href="#cb45-3"></a><span class="pp">println!</span>(<span class="st">"{:x}"</span><span class="op">,</span> val)<span class="op">;</span> <span class="co">// hex</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:60%;">
<div class="sourceCode" id="cb46"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1"></a><span class="ex">$</span> cargo r</span>
<span id="cb46-2"><a href="#cb46-2"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb46-3"><a href="#cb46-3"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb46-4"><a href="#cb46-4"></a><span class="ex">0x01020304</span></span>
<span id="cb46-5"><a href="#cb46-5"></a><span class="ex">[src/main.rs:10:5]</span> <span class="kw">&amp;</span><span class="ex">vals</span> = [</span>
<span id="cb46-6"><a href="#cb46-6"></a>    <span class="ex">4,</span></span>
<span id="cb46-7"><a href="#cb46-7"></a>    <span class="ex">3,</span></span>
<span id="cb46-8"><a href="#cb46-8"></a>    <span class="ex">2,</span></span>
<span id="cb46-9"><a href="#cb46-9"></a>    <span class="ex">1,</span></span>
<span id="cb46-10"><a href="#cb46-10"></a><span class="ex">]</span></span>
<span id="cb46-11"><a href="#cb46-11"></a><span class="ex">[src/main.rs:38:9]</span> <span class="er">(</span><span class="ex">i,</span> vals<span class="pp">[</span><span class="ss">i</span><span class="pp">]</span><span class="kw">)</span> <span class="ex">=</span> <span class="er">(</span></span>
<span id="cb46-12"><a href="#cb46-12"></a>    <span class="ex">0,</span></span>
<span id="cb46-13"><a href="#cb46-13"></a>    <span class="ex">4,</span></span>
<span id="cb46-14"><a href="#cb46-14"></a><span class="kw">)</span></span>
<span id="cb46-15"><a href="#cb46-15"></a><span class="ex">[src/main.rs:38:9]</span> <span class="er">(</span><span class="ex">i,</span> vals<span class="pp">[</span><span class="ss">i</span><span class="pp">]</span><span class="kw">)</span> <span class="ex">=</span> <span class="er">(</span></span>
<span id="cb46-16"><a href="#cb46-16"></a>    <span class="ex">1,</span></span>
<span id="cb46-17"><a href="#cb46-17"></a>    <span class="ex">3,</span></span>
<span id="cb46-18"><a href="#cb46-18"></a><span class="kw">)</span></span>
<span id="cb46-19"><a href="#cb46-19"></a><span class="ex">[src/main.rs:38:9]</span> <span class="er">(</span><span class="ex">i,</span> vals<span class="pp">[</span><span class="ss">i</span><span class="pp">]</span><span class="kw">)</span> <span class="ex">=</span> <span class="er">(</span></span>
<span id="cb46-20"><a href="#cb46-20"></a>    <span class="ex">2,</span></span>
<span id="cb46-21"><a href="#cb46-21"></a>    <span class="ex">2,</span></span>
<span id="cb46-22"><a href="#cb46-22"></a><span class="kw">)</span></span>
<span id="cb46-23"><a href="#cb46-23"></a><span class="ex">[src/main.rs:38:9]</span> <span class="er">(</span><span class="ex">i,</span> vals<span class="pp">[</span><span class="ss">i</span><span class="pp">]</span><span class="kw">)</span> <span class="ex">=</span> <span class="er">(</span></span>
<span id="cb46-24"><a href="#cb46-24"></a>    <span class="ex">3,</span></span>
<span id="cb46-25"><a href="#cb46-25"></a>    <span class="ex">1,</span></span>
<span id="cb46-26"><a href="#cb46-26"></a><span class="kw">)</span></span>
<span id="cb46-27"><a href="#cb46-27"></a><span class="ex">1020304</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="wait-a-minute" class="level2">
<h2 class="anchored" data-anchor-id="wait-a-minute">Wait a minute</h2>
<ul>
<li>Isn’t this terrible?</li>
</ul>
<div class="sourceCode" id="cb47"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb47-1"><a href="#cb47-1"></a>ret <span class="op">+=</span> (vals[i] <span class="kw">as</span> <span class="dt">u32</span>) <span class="op">*</span> ((<span class="dv">2</span> <span class="kw">as</span> <span class="dt">u32</span>)<span class="op">.</span>pow(<span class="dv">8</span> <span class="op">*</span> (i <span class="kw">as</span> <span class="dt">u32</span>)))<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>There must be a better way.</li>
</ul>
</section>
<section id="shifts" class="level2">
<h2 class="anchored" data-anchor-id="shifts">Shifts</h2>
<ul>
<li>The remaining bitwise operator is the <em>shift</em>
<ul>
<li>Bitwise because it works on bits, but</li>
<li>Takes two arguments:
<ul>
<li>The bits to “shift”</li>
<li>A numerical value encoding how much “shift”</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="script-it" class="level2">
<h2 class="anchored" data-anchor-id="script-it">Script it</h2>
<ul>
<li>Python shift is <code>&lt;&lt;</code> (well, left shift)</li>
</ul>
<div class="sourceCode" id="cb48"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1"></a><span class="ex">python3</span> <span class="at">-c</span> <span class="st">"[print('{} {:03d} {:08b}'.format(x, 1 &lt;&lt; x, 1 &lt;&lt; x)) for x in range(8)]"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>I got:</li>
</ul>
<div class="sourceCode" id="cb49"><pre class="sourceCode email code-with-copy"><code class="sourceCode email"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>0 001 00000001</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>1 002 00000010</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>2 004 00000100</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>3 008 00001000</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>4 016 00010000</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>5 032 00100000</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>6 064 01000000</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>7 128 10000000</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="shift-it" class="level2">
<h2 class="anchored" data-anchor-id="shift-it">Shift it</h2>
<div class="sourceCode" id="cb50"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb50-1"><a href="#cb50-1"></a><span class="kw">fn</span> custom_u8s_to_u32(vals <span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">u8</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="dt">u32</span> <span class="op">{</span></span>
<span id="cb50-2"><a href="#cb50-2"></a>    <span class="co">// We'll just take the first four for now</span></span>
<span id="cb50-3"><a href="#cb50-3"></a>    <span class="kw">let</span> <span class="kw">mut</span> ret <span class="op">:</span> <span class="dt">u32</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb50-4"><a href="#cb50-4"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span><span class="dv">4</span> <span class="op">{</span></span>
<span id="cb50-5"><a href="#cb50-5"></a>        <span class="pp">dbg!</span>((i<span class="op">,</span> vals[i]))<span class="op">;</span></span>
<span id="cb50-6"><a href="#cb50-6"></a>        ret <span class="op">+=</span> (vals[i] <span class="kw">as</span> <span class="dt">u32</span>) <span class="op">&lt;&lt;</span> (<span class="dv">8</span> <span class="op">*</span> i)<span class="op">;</span></span>
<span id="cb50-7"><a href="#cb50-7"></a>    <span class="op">}</span></span>
<span id="cb50-8"><a href="#cb50-8"></a>    <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb50-9"><a href="#cb50-9"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Much better!</li>
<li>Saves an <code>as u32</code>!</li>
</ul>
</section>
<section id="today-1" class="level2">
<h2 class="anchored" data-anchor-id="today-1">Today</h2>
<ul>
<li>Encoding
<ul>
<li>Bytes</li>
<li>Bitwise operators</li>
<li>Endianness</li>
</ul></li>
</ul>
<!-- start at carries in encode then jump to finite -->


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./22_wordle.html" class="pagination-link" aria-label="Wordle">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Wordle</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./31_hamming.html" class="pagination-link" aria-label="Hamming">
        <span class="nav-page-text">Hamming</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb51" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb51-1"><a href="#cb51-1"></a><span class="co">---</span></span>
<span id="cb51-2"><a href="#cb51-2"></a><span class="an">title:</span><span class="co"> Bits</span></span>
<span id="cb51-3"><a href="#cb51-3"></a><span class="co">---</span></span>
<span id="cb51-4"><a href="#cb51-4"></a></span>
<span id="cb51-5"><a href="#cb51-5"></a><span class="fu">## Announcements</span></span>
<span id="cb51-6"><a href="#cb51-6"></a></span>
<span id="cb51-7"><a href="#cb51-7"></a><span class="ss">- </span>**Action Items**:</span>
<span id="cb51-8"><a href="#cb51-8"></a><span class="ss">    - </span>Wordle for Friday</span>
<span id="cb51-9"><a href="#cb51-9"></a><span class="ss">    - </span>"Macros" assignment ready after class.</span>
<span id="cb51-10"><a href="#cb51-10"></a></span>
<span id="cb51-11"><a href="#cb51-11"></a><span class="fu">## Today</span></span>
<span id="cb51-12"><a href="#cb51-12"></a></span>
<span id="cb51-13"><a href="#cb51-13"></a><span class="ss">- </span>Encoding</span>
<span id="cb51-14"><a href="#cb51-14"></a><span class="ss">    -   </span>Bytes</span>
<span id="cb51-15"><a href="#cb51-15"></a><span class="ss">    -   </span>Bitwise operators</span>
<span id="cb51-16"><a href="#cb51-16"></a><span class="ss">    -   </span>Endianness</span>
<span id="cb51-17"><a href="#cb51-17"></a>    </span>
<span id="cb51-18"><a href="#cb51-18"></a><span class="fu"># Bytes</span></span>
<span id="cb51-19"><a href="#cb51-19"></a></span>
<span id="cb51-20"><a href="#cb51-20"></a><span class="fu">## "Good at"</span></span>
<span id="cb51-21"><a href="#cb51-21"></a></span>
<span id="cb51-22"><a href="#cb51-22"></a><span class="ss">- </span>Computers "are good at" storing numerical data.</span>
<span id="cb51-23"><a href="#cb51-23"></a><span class="ss">    - </span>At a high level *numerical computing*</span>
<span id="cb51-24"><a href="#cb51-24"></a><span class="ss">        - </span>NumPy / Numba</span>
<span id="cb51-25"><a href="#cb51-25"></a><span class="ss">        - </span>Julia</span>
<span id="cb51-26"><a href="#cb51-26"></a><span class="ss">        - </span>Fortran</span>
<span id="cb51-27"><a href="#cb51-27"></a><span class="ss">- </span>These languages excel at wide ranges of mathematical operations, ranging from addition to solving systems of differential equations.</span>
<span id="cb51-28"><a href="#cb51-28"></a></span>
<span id="cb51-29"><a href="#cb51-29"></a><span class="fu">## "Good at"</span></span>
<span id="cb51-30"><a href="#cb51-30"></a></span>
<span id="cb51-31"><a href="#cb51-31"></a><span class="ss">- </span>*Electronics* are good at propagating signals, which we often view as ordered collections of zeros and ones.</span>
<span id="cb51-32"><a href="#cb51-32"></a><span class="ss">    - </span>At a lower level *processing*</span>
<span id="cb51-33"><a href="#cb51-33"></a><span class="ss">        - </span>C and to a lesser degree C++</span>
<span id="cb51-34"><a href="#cb51-34"></a><span class="ss">        - </span>Assembly, like AMD/Intel x86 or IBM PowerPC</span>
<span id="cb51-35"><a href="#cb51-35"></a><span class="ss">        - </span>Rust</span>
<span id="cb51-36"><a href="#cb51-36"></a><span class="ss">- </span>These languages often have weaker support for say, trigonometry and better support for reading files of arbitrary types, including not just .csv files but e.g. readings from radio telescopes.</span>
<span id="cb51-37"><a href="#cb51-37"></a></span>
<span id="cb51-38"><a href="#cb51-38"></a><span class="fu">## Low-level langauges</span></span>
<span id="cb51-39"><a href="#cb51-39"></a></span>
<span id="cb51-40"><a href="#cb51-40"></a><span class="ss">- </span>Rust is among the group of languages good at working close to the "hardware-software interface"</span>
<span id="cb51-41"><a href="#cb51-41"></a><span class="ss">- </span>Many design in decisions in Rust, such as in how Rust read file data <span class="in">`/dev/random`</span>, reflect this:</span>
<span id="cb51-42"><a href="#cb51-42"></a><span class="in">```rs</span></span>
<span id="cb51-43"><a href="#cb51-43"></a><span class="dt">usize</span><span class="pp">::</span>from_ne_bytes(buffer)<span class="op">;</span></span>
<span id="cb51-44"><a href="#cb51-44"></a><span class="in">```</span></span>
<span id="cb51-45"><a href="#cb51-45"></a><span class="ss">- </span>Direct references to bytes (or bits) are uncommon but present in higher level languages, and increase in popularity in languages that give more control to programs over how the device operates.</span>
<span id="cb51-46"><a href="#cb51-46"></a></span>
<span id="cb51-47"><a href="#cb51-47"></a><span class="fu">## Bit Manipulation</span></span>
<span id="cb51-48"><a href="#cb51-48"></a></span>
<span id="cb51-49"><a href="#cb51-49"></a><span class="ss">- </span>One common application of lower-level programming is to precisely control the values of individual bits within a byte.</span>
<span id="cb51-50"><a href="#cb51-50"></a></span>
<span id="cb51-51"><a href="#cb51-51"></a>::: {.callout-note}</span>
<span id="cb51-52"><a href="#cb51-52"></a>A *byte* is a hardware idea - an ordered collection of 8 bits, which themselves are hardware units either containing, or lacking, some electrical charge. We view them as storing zeros or ones.</span>
<span id="cb51-53"><a href="#cb51-53"></a>:::</span>
<span id="cb51-54"><a href="#cb51-54"></a></span>
<span id="cb51-55"><a href="#cb51-55"></a><span class="ss">- </span>Importantly, while we can refer to bits or bytes in software, versus types like integers or strings, we are describing *actual physical phenomena* rather than mathematical abstractions.</span>
<span id="cb51-56"><a href="#cb51-56"></a></span>
<span id="cb51-57"><a href="#cb51-57"></a><span class="fu">## Support</span></span>
<span id="cb51-58"><a href="#cb51-58"></a></span>
<span id="cb51-59"><a href="#cb51-59"></a><span class="ss">- </span>Low level support is provided most commonly through two features:</span>
<span id="cb51-60"><a href="#cb51-60"></a><span class="ss">    - </span>A type to represent a byte or bytes.</span>
<span id="cb51-61"><a href="#cb51-61"></a><span class="ss">    - </span>Bitwise operators - operators like the arithmetic infix operators <span class="in">`+`</span> or <span class="in">`-`</span> but that perform operations on pairs of bits rather than pairs of numeric values.</span>
<span id="cb51-62"><a href="#cb51-62"></a><span class="ss">- </span>We explore each in Rust.</span>
<span id="cb51-63"><a href="#cb51-63"></a></span>
<span id="cb51-64"><a href="#cb51-64"></a><span class="fu">## Byte(s)</span></span>
<span id="cb51-65"><a href="#cb51-65"></a></span>
<span id="cb51-66"><a href="#cb51-66"></a><span class="ss">- </span>Bytes are referenced by name within in Rust <span class="in">`std`</span> in a few places, though there is no formal <span class="in">`byte`</span> type.</span>
<span id="cb51-67"><a href="#cb51-67"></a><span class="ss">- </span>Instead, <span class="in">`u8`</span> is used.</span>
<span id="cb51-68"><a href="#cb51-68"></a><span class="ss">    - </span>This is common - there is little meaningful difference between 8 bits pretending to be a number and 8 bits that aren't doing anything in particular.</span>
<span id="cb51-69"><a href="#cb51-69"></a>    </span>
<span id="cb51-70"><a href="#cb51-70"></a><span class="fu">## Bytes </span></span>
<span id="cb51-71"><a href="#cb51-71"></a></span>
<span id="cb51-72"><a href="#cb51-72"></a><span class="ss">- </span>Bytes are referenced, both as the function <span class="in">`bytes`</span> and the data structure <span class="in">`Bytes`</span></span>
<span id="cb51-73"><a href="#cb51-73"></a><span class="ss">    - </span>The function produces a Rust iterator the produces <span class="in">`u8`</span> values.</span>
<span id="cb51-74"><a href="#cb51-74"></a><span class="ss">- </span>In other cases, such as <span class="in">`as_bytes`</span>, an array of <span class="in">`u8`</span> is often used (expressed as <span class="in">`[u8]`</span>.</span>
<span id="cb51-75"><a href="#cb51-75"></a><span class="ss">- </span>In any case, collections of <span class="in">`u8`</span>s.</span>
<span id="cb51-76"><a href="#cb51-76"></a></span>
<span id="cb51-77"><a href="#cb51-77"></a><span class="fu">## Example</span></span>
<span id="cb51-78"><a href="#cb51-78"></a></span>
<span id="cb51-79"><a href="#cb51-79"></a><span class="ss">- </span>Really, there is no better example than just grabbing some random bits from <span class="in">`/dev/random`</span> and taking a peek.</span>
<span id="cb51-80"><a href="#cb51-80"></a><span class="ss">- </span>Rust helpfully supports printing in binary, using the <span class="in">`b`</span> format code, to see the individual zeroes and ones of a byte or bytes.</span>
<span id="cb51-81"><a href="#cb51-81"></a></span>
<span id="cb51-82"><a href="#cb51-82"></a><span class="in">```rs</span></span>
<span id="cb51-83"><a href="#cb51-83"></a><span class="kw">let</span> <span class="kw">mut</span> devrnd <span class="op">=</span> <span class="pp">std::fs::File::</span>open(<span class="st">"/dev/urandom"</span>)<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb51-84"><a href="#cb51-84"></a><span class="kw">let</span> <span class="kw">mut</span> buffer <span class="op">=</span> [<span class="dv">0u8</span><span class="op">;</span> (<span class="dt">usize</span><span class="pp">::</span>BITS <span class="op">/</span> <span class="dv">8</span>) <span class="kw">as</span> <span class="dt">usize</span>]<span class="op">;</span></span>
<span id="cb51-85"><a href="#cb51-85"></a><span class="pp">std::io::</span><span class="bu">Read</span><span class="pp">::</span>read_exact(<span class="op">&amp;</span><span class="kw">mut</span> devrnd<span class="op">,</span> <span class="op">&amp;</span><span class="kw">mut</span> buffer)<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb51-86"><a href="#cb51-86"></a><span class="kw">let</span> sample <span class="op">=</span> <span class="dt">usize</span><span class="pp">::</span>from_ne_bytes(buffer)<span class="op">;</span></span>
<span id="cb51-87"><a href="#cb51-87"></a><span class="pp">println!</span>(<span class="st">"{:b}"</span><span class="op">,</span> sample)<span class="op">;</span></span>
<span id="cb51-88"><a href="#cb51-88"></a><span class="in">```</span></span>
<span id="cb51-89"><a href="#cb51-89"></a></span>
<span id="cb51-90"><a href="#cb51-90"></a><span class="fu">## Test it</span></span>
<span id="cb51-91"><a href="#cb51-91"></a></span>
<span id="cb51-92"><a href="#cb51-92"></a><span class="ss">- </span>You can run a few times to see what a random *bitstring* (ordered collection of bits) looks like when using <span class="in">`:b`</span></span>
<span id="cb51-93"><a href="#cb51-93"></a></span>
<span id="cb51-94"><a href="#cb51-94"></a><span class="in">```sh</span></span>
<span id="cb51-95"><a href="#cb51-95"></a></span>
<span id="cb51-96"><a href="#cb51-96"></a><span class="ex">$</span> cargo run</span>
<span id="cb51-97"><a href="#cb51-97"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb51-98"><a href="#cb51-98"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb51-99"><a href="#cb51-99"></a><span class="ex">1000111011010011001001000110100010011010101101010111100001010101</span></span>
<span id="cb51-100"><a href="#cb51-100"></a><span class="ex">$</span> cargo run</span>
<span id="cb51-101"><a href="#cb51-101"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb51-102"><a href="#cb51-102"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb51-103"><a href="#cb51-103"></a><span class="ex">1010101000100001011000111011111111011110010001010010101000111010</span></span>
<span id="cb51-104"><a href="#cb51-104"></a><span class="ex">$</span> cargo run</span>
<span id="cb51-105"><a href="#cb51-105"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb51-106"><a href="#cb51-106"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb51-107"><a href="#cb51-107"></a><span class="ex">1001110000001001110011100111110010010101110000010111010111110011</span></span>
<span id="cb51-108"><a href="#cb51-108"></a></span>
<span id="cb51-109"><a href="#cb51-109"></a><span class="in">```</span></span>
<span id="cb51-110"><a href="#cb51-110"></a></span>
<span id="cb51-111"><a href="#cb51-111"></a></span>
<span id="cb51-112"><a href="#cb51-112"></a><span class="fu">## Simplify</span></span>
<span id="cb51-113"><a href="#cb51-113"></a></span>
<span id="cb51-114"><a href="#cb51-114"></a><span class="ss">- </span>To introduce operators, we'll use only single <span class="in">`u8`</span>s, just for simplicity.</span>
<span id="cb51-115"><a href="#cb51-115"></a></span>
<span id="cb51-116"><a href="#cb51-116"></a><span class="in">```rs</span></span>
<span id="cb51-117"><a href="#cb51-117"></a><span class="kw">let</span> <span class="kw">mut</span> devrnd <span class="op">=</span> <span class="pp">std::fs::File::</span>open(<span class="st">"/dev/urandom"</span>)<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb51-118"><a href="#cb51-118"></a><span class="kw">let</span> <span class="kw">mut</span> buffer <span class="op">=</span> [<span class="dv">0u8</span><span class="op">;</span> <span class="dv">2</span>]<span class="op">;</span></span>
<span id="cb51-119"><a href="#cb51-119"></a><span class="pp">std::io::</span><span class="bu">Read</span><span class="pp">::</span>read_exact(<span class="op">&amp;</span><span class="kw">mut</span> devrnd<span class="op">,</span> <span class="op">&amp;</span><span class="kw">mut</span> buffer)<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb51-120"><a href="#cb51-120"></a><span class="kw">let</span> x <span class="op">=</span> x[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb51-121"><a href="#cb51-121"></a><span class="kw">let</span> y <span class="op">=</span> y[<span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb51-122"><a href="#cb51-122"></a><span class="pp">println!</span>(<span class="st">"x = {x:08b}, y = {y:08b}"</span>)<span class="op">;</span></span>
<span id="cb51-123"><a href="#cb51-123"></a><span class="in">```</span></span>
<span id="cb51-124"><a href="#cb51-124"></a><span class="ss">- </span>By default, <span class="in">`:b`</span> doesn't render leading zeros, which is fine for numbers but not great for bytes.</span>
<span id="cb51-125"><a href="#cb51-125"></a><span class="ss">- </span>Use <span class="in">`:08b`</span> - where <span class="in">`0`</span> specifies to have leading zeros, and <span class="in">`8`</span> specifies how many digits.</span>
<span id="cb51-126"><a href="#cb51-126"></a></span>
<span id="cb51-127"><a href="#cb51-127"></a><span class="fu">## Fixed</span></span>
<span id="cb51-128"><a href="#cb51-128"></a></span>
<span id="cb51-129"><a href="#cb51-129"></a><span class="in">```sh</span></span>
<span id="cb51-130"><a href="#cb51-130"></a><span class="ex">$</span> cargo run</span>
<span id="cb51-131"><a href="#cb51-131"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb51-132"><a href="#cb51-132"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb51-133"><a href="#cb51-133"></a><span class="ex">x</span> = 00101010, y = 01100111</span>
<span id="cb51-134"><a href="#cb51-134"></a><span class="in">```</span></span>
<span id="cb51-135"><a href="#cb51-135"></a></span>
<span id="cb51-136"><a href="#cb51-136"></a><span class="ss">- </span>With the benefit of some bits, we can explore operators.</span>
<span id="cb51-137"><a href="#cb51-137"></a></span>
<span id="cb51-138"><a href="#cb51-138"></a><span class="fu"># Bitwise Operators</span></span>
<span id="cb51-139"><a href="#cb51-139"></a></span>
<span id="cb51-140"><a href="#cb51-140"></a><span class="fu">## Operator Reference</span></span>
<span id="cb51-141"><a href="#cb51-141"></a></span>
<span id="cb51-142"><a href="#cb51-142"></a><span class="ss">- </span>Rust doesn't clearly delineate bitwise from other operators.</span>
<span id="cb51-143"><a href="#cb51-143"></a><span class="ss">    - </span>This is pretty reasonable: "bitwise" is something of a social convention.</span>
<span id="cb51-144"><a href="#cb51-144"></a><span class="ss">- </span>The overall operator reference I follow is <span class="co">[</span><span class="ot">Rust Book Appendix B</span><span class="co">](https://doc.rust-lang.org/book/appendix-02-operators.html)</span></span>
<span id="cb51-145"><a href="#cb51-145"></a><span class="ss">- </span>The next slide lifts a subset of a .md table on that page.</span>
<span id="cb51-146"><a href="#cb51-146"></a><span class="ss">    - </span>I have included both named bitwise operators and also "shifts", which are a bit (heh) different.</span>
<span id="cb51-147"><a href="#cb51-147"></a></span>
<span id="cb51-148"><a href="#cb51-148"></a><span class="fu">## Bitwise</span></span>
<span id="cb51-149"><a href="#cb51-149"></a></span>
<span id="cb51-150"><a href="#cb51-150"></a>| Operator                  | Example                                                 | Explanation                                                           |</span>
<span id="cb51-151"><a href="#cb51-151"></a>| ------------------------- | ------------------------------------------------------- | --------------------------------------------------------------------- |</span>
<span id="cb51-152"><a href="#cb51-152"></a>| <span class="in">`!`</span>                       | <span class="in">`!expr`</span>                                                 | Bitwise or logical complement                                         |</span>
<span id="cb51-153"><a href="#cb51-153"></a>| <span class="in">`&amp;`</span>                       | <span class="in">`expr &amp; expr`</span>                                           | Bitwise AND                                                           |</span>
<span id="cb51-154"><a href="#cb51-154"></a>| <span class="in">`&lt;&lt;`</span>                      | <span class="in">`expr &lt;&lt; expr`</span>                                          | Left-shift                                                            |</span>
<span id="cb51-155"><a href="#cb51-155"></a>| <span class="in">`&gt;&gt;`</span>                      | <span class="in">`expr &gt;&gt; expr`</span>                                          | Right-shift                                                           |</span>
<span id="cb51-156"><a href="#cb51-156"></a>| <span class="in">`^`</span>                       | <span class="in">`expr ^ expr`</span>                                           | Bitwise exclusive OR                                                  |</span>
<span id="cb51-157"><a href="#cb51-157"></a>| &lt;code&gt;<span class="dv">&amp;vert;</span>&lt;/code&gt;       | &lt;code&gt;expr <span class="dv">&amp;vert;</span> expr&lt;/code&gt;                           | Bitwise OR                                                            |</span>
<span id="cb51-158"><a href="#cb51-158"></a></span>
<span id="cb51-159"><a href="#cb51-159"></a><span class="fu">## Conceptual Model</span></span>
<span id="cb51-160"><a href="#cb51-160"></a></span>
<span id="cb51-161"><a href="#cb51-161"></a><span class="ss">- </span>One way to model how the bitwise operators is to:</span>
<span id="cb51-162"><a href="#cb51-162"></a><span class="ss">    - </span>Imagine a byte as an ordered collection of bits</span>
<span id="cb51-163"><a href="#cb51-163"></a><span class="ss">        - </span>Like a list, array, or vector</span>
<span id="cb51-164"><a href="#cb51-164"></a><span class="ss">    - </span>Imagine a bit as a boolean.</span>
<span id="cb51-165"><a href="#cb51-165"></a><span class="ss">        - </span>Zero/one is equally meaningful to False/True</span>
<span id="cb51-166"><a href="#cb51-166"></a><span class="ss">    - </span>Loop a logical operator over the booleans.</span>
<span id="cb51-167"><a href="#cb51-167"></a><span class="ss">- </span>We will demonstrate first in Python then in Rust.</span>
<span id="cb51-168"><a href="#cb51-168"></a></span>
<span id="cb51-169"><a href="#cb51-169"></a><span class="fu">## Python Demo - Bytes</span></span>
<span id="cb51-170"><a href="#cb51-170"></a></span>
<span id="cb51-171"><a href="#cb51-171"></a><span class="ss">- </span>We create two bytes using np.uint8.</span>
<span id="cb51-172"><a href="#cb51-172"></a><span class="in">```{.py}</span></span>
<span id="cb51-173"><a href="#cb51-173"></a><span class="in">from numpy import uint8 as byte</span></span>
<span id="cb51-174"><a href="#cb51-174"></a></span>
<span id="cb51-175"><a href="#cb51-175"></a><span class="in">x, y = byte(0x0F), byte(0x33)</span></span>
<span id="cb51-176"><a href="#cb51-176"></a><span class="in">```</span></span>
<span id="cb51-177"><a href="#cb51-177"></a><span class="ss">- </span>Binary representation using <span class="in">`bin`</span> or <span class="in">`:b`</span></span>
<span id="cb51-180"><a href="#cb51-180"></a><span class="in">```{py}</span></span>
<span id="cb51-181"><a href="#cb51-181"></a><span class="bu">print</span>(<span class="st">'x = </span><span class="sc">{:08b}</span><span class="st">, y = </span><span class="sc">{:08b}</span><span class="st">'</span>.<span class="bu">format</span>(x,y))</span>
<span id="cb51-182"><a href="#cb51-182"></a><span class="in">```</span></span>
<span id="cb51-183"><a href="#cb51-183"></a><span class="ss">- </span>You'll see <span class="in">`x = 00001111, y = 00110011`</span></span>
<span id="cb51-184"><a href="#cb51-184"></a></span>
<span id="cb51-185"><a href="#cb51-185"></a><span class="fu">## Python Bit XOR</span></span>
<span id="cb51-186"><a href="#cb51-186"></a></span>
<span id="cb51-187"><a href="#cb51-187"></a><span class="ss">- </span>We can use Pythonic "Bitwise exclusive OR"</span>
<span id="cb51-190"><a href="#cb51-190"></a><span class="in">```{py}</span></span>
<span id="cb51-191"><a href="#cb51-191"></a><span class="bu">print</span>(<span class="st">'</span><span class="sc">{:08b}</span><span class="st"> ^ </span><span class="sc">{:08b}</span><span class="st"> = </span><span class="sc">{:08b}</span><span class="st">'</span>.<span class="bu">format</span>(x, y, x <span class="op">^</span> y))</span>
<span id="cb51-192"><a href="#cb51-192"></a><span class="in">```</span></span>
<span id="cb51-193"><a href="#cb51-193"></a><span class="ss">- </span>What do we see?</span>
<span id="cb51-194"><a href="#cb51-194"></a><span class="in">```sh</span></span>
<span id="cb51-195"><a href="#cb51-195"></a><span class="ex">00001111</span> ^ 00110011 = 00111100</span>
<span id="cb51-196"><a href="#cb51-196"></a><span class="in">```</span></span>
<span id="cb51-197"><a href="#cb51-197"></a><span class="ss">- </span>Why?</span>
<span id="cb51-198"><a href="#cb51-198"></a></span>
<span id="cb51-199"><a href="#cb51-199"></a><span class="fu">## Boolean arrays</span></span>
<span id="cb51-200"><a href="#cb51-200"></a></span>
<span id="cb51-201"><a href="#cb51-201"></a><span class="ss">- </span>Convert the bytes to arrays of booleans.</span>
<span id="cb51-202"><a href="#cb51-202"></a><span class="ss">- </span>Via string representation:</span>
<span id="cb51-203"><a href="#cb51-203"></a><span class="in">```{.py}</span></span>
<span id="cb51-204"><a href="#cb51-204"></a><span class="in">to_bool_str = lambda x : [c == '1' for c in `{.08b}.format(x)]</span></span>
<span id="cb51-205"><a href="#cb51-205"></a><span class="in">```</span></span>
<span id="cb51-206"><a href="#cb51-206"></a><span class="ss">- </span>Via numeric representation, which requires a reversal:</span>
<span id="cb51-207"><a href="#cb51-207"></a><span class="in">```{.py}</span></span>
<span id="cb51-208"><a href="#cb51-208"></a><span class="in">to_bool_num = lambda x : [1 == (x // 2 ** i) % 2 for i in range(8)][::-1]</span></span>
<span id="cb51-209"><a href="#cb51-209"></a><span class="in">```</span></span>
<span id="cb51-210"><a href="#cb51-210"></a></span>
<span id="cb51-211"><a href="#cb51-211"></a><span class="fu">## Logical XOR</span></span>
<span id="cb51-212"><a href="#cb51-212"></a></span>
<span id="cb51-213"><a href="#cb51-213"></a><span class="ss">- </span>Python lacks logical XOR as it is equivalent to <span class="in">`!=`</span></span>
<span id="cb51-214"><a href="#cb51-214"></a><span class="in">```py</span></span>
<span id="cb51-215"><a href="#cb51-215"></a><span class="co"># Print a truth table in markdown</span></span>
<span id="cb51-216"><a href="#cb51-216"></a><span class="bu">print</span>(<span class="st">"| x   | y   | x!=y| x^y |"</span>)</span>
<span id="cb51-217"><a href="#cb51-217"></a><span class="bu">print</span>(<span class="st">"|-----|-----|-----|-----|"</span>)</span>
<span id="cb51-218"><a href="#cb51-218"></a><span class="cf">for</span> left <span class="kw">in</span> (<span class="va">True</span>, <span class="va">False</span>):</span>
<span id="cb51-219"><a href="#cb51-219"></a>    <span class="cf">for</span> rite <span class="kw">in</span> (<span class="va">True</span>, <span class="va">False</span>):</span>
<span id="cb51-220"><a href="#cb51-220"></a>        <span class="bu">print</span>(<span class="st">'|</span><span class="sc">{:&lt;5}</span><span class="st">|</span><span class="sc">{:&lt;5}</span><span class="st">|</span><span class="sc">{:&lt;5}</span><span class="st">|</span><span class="sc">{:&lt;5}</span><span class="st">|'</span>.<span class="bu">format</span>(<span class="op">*</span>[<span class="bu">str</span>(b) <span class="cf">for</span> b <span class="kw">in</span> [left, rite, left <span class="op">!=</span> rite, left <span class="op">^</span> rite]]))</span>
<span id="cb51-221"><a href="#cb51-221"></a><span class="in">```</span></span>
<span id="cb51-222"><a href="#cb51-222"></a><span class="ss">- </span>Horizontally aligned:</span>
<span id="cb51-223"><a href="#cb51-223"></a><span class="in">```{.email code-line-numbers="false"}</span></span>
<span id="cb51-224"><a href="#cb51-224"></a><span class="in">| x   | y   | x!=y| x^y |</span></span>
<span id="cb51-225"><a href="#cb51-225"></a><span class="in">|-----|-----|-----|-----|</span></span>
<span id="cb51-226"><a href="#cb51-226"></a><span class="in">|True |True |False|False|</span></span>
<span id="cb51-227"><a href="#cb51-227"></a><span class="in">|True |False|True |True |</span></span>
<span id="cb51-228"><a href="#cb51-228"></a><span class="in">|False|True |True |True |</span></span>
<span id="cb51-229"><a href="#cb51-229"></a><span class="in">|False|False|False|False|</span></span>
<span id="cb51-230"><a href="#cb51-230"></a><span class="in">```</span></span>
<span id="cb51-231"><a href="#cb51-231"></a></span>
<span id="cb51-232"><a href="#cb51-232"></a><span class="fu">## Map XOR</span></span>
<span id="cb51-233"><a href="#cb51-233"></a></span>
<span id="cb51-234"><a href="#cb51-234"></a><span class="ss">- </span>Apply XOR to each element of the boolean arrays.</span>
<span id="cb51-235"><a href="#cb51-235"></a><span class="ss">- </span>We would get the same numerical presentation.</span>
<span id="cb51-236"><a href="#cb51-236"></a><span class="in">```py</span></span>
<span id="cb51-237"><a href="#cb51-237"></a><span class="bu">print</span>(to_bool_num(x <span class="op">^</span> y))</span>
<span id="cb51-238"><a href="#cb51-238"></a><span class="bu">print</span>([a <span class="op">!=</span> b <span class="cf">for</span> a, b <span class="kw">in</span> <span class="bu">zip</span>(to_bool_num(x),to_bool_num(y))])</span>
<span id="cb51-239"><a href="#cb51-239"></a><span class="in">```</span></span>
<span id="cb51-240"><a href="#cb51-240"></a><span class="ss">- </span>Both will yield the same boolean array.</span>
<span id="cb51-241"><a href="#cb51-241"></a><span class="in">```py</span></span>
<span id="cb51-242"><a href="#cb51-242"></a>[<span class="va">True</span>, <span class="va">True</span>, <span class="va">False</span>, <span class="va">False</span>, <span class="va">False</span>, <span class="va">False</span>, <span class="va">True</span>, <span class="va">True</span>]</span>
<span id="cb51-243"><a href="#cb51-243"></a><span class="in">```</span></span>
<span id="cb51-244"><a href="#cb51-244"></a></span>
<span id="cb51-245"><a href="#cb51-245"></a><span class="fu">## All operators</span></span>
<span id="cb51-246"><a href="#cb51-246"></a></span>
<span id="cb51-247"><a href="#cb51-247"></a><span class="ss">- </span>We can loop over all operators to inspect them visually.</span>
<span id="cb51-248"><a href="#cb51-248"></a></span>
<span id="cb51-249"><a href="#cb51-249"></a><span class="in">```py</span></span>
<span id="cb51-250"><a href="#cb51-250"></a><span class="im">from</span> operator <span class="im">import</span> and_, or_ , xor</span>
<span id="cb51-251"><a href="#cb51-251"></a></span>
<span id="cb51-252"><a href="#cb51-252"></a><span class="cf">for</span> op <span class="kw">in</span> [and_, or_ , xor]:</span>
<span id="cb51-253"><a href="#cb51-253"></a>    <span class="bu">print</span>(<span class="st">'f(</span><span class="sc">{:08b}</span><span class="st">, </span><span class="sc">{:08b}</span><span class="st">) = </span><span class="sc">{:08b}</span><span class="st"> for f ='</span>.<span class="bu">format</span>(x, y, op(x,y)), op)</span>
<span id="cb51-254"><a href="#cb51-254"></a><span class="in">```</span></span>
<span id="cb51-255"><a href="#cb51-255"></a></span>
<span id="cb51-256"><a href="#cb51-256"></a><span class="ss">- </span><span class="in">`not`</span> is similar but unary.</span>
<span id="cb51-257"><a href="#cb51-257"></a><span class="in">```py</span></span>
<span id="cb51-258"><a href="#cb51-258"></a><span class="bu">print</span>(<span class="st">'~</span><span class="sc">{:08b}</span><span class="st"> = </span><span class="sc">{:08b}</span><span class="st">'</span>.<span class="bu">format</span>(x, <span class="op">~</span>x))</span>
<span id="cb51-259"><a href="#cb51-259"></a><span class="in">```</span></span>
<span id="cb51-260"><a href="#cb51-260"></a><span class="ss">- </span>So:</span>
<span id="cb51-261"><a href="#cb51-261"></a><span class="in">```sh</span></span>
<span id="cb51-262"><a href="#cb51-262"></a><span class="ex">f</span><span class="er">(</span><span class="ex">11110000,</span> 00110011<span class="kw">)</span> <span class="ex">=</span> 00110000 for f = <span class="op">&lt;</span>built-in function and_<span class="op">&gt;</span></span>
<span id="cb51-263"><a href="#cb51-263"></a><span class="ex">f</span><span class="er">(</span><span class="ex">11110000,</span> 00110011<span class="kw">)</span> <span class="ex">=</span> 11110011 for f = <span class="op">&lt;</span>built-in function or_<span class="op">&gt;</span></span>
<span id="cb51-264"><a href="#cb51-264"></a><span class="ex">f</span><span class="er">(</span><span class="ex">11110000,</span> 00110011<span class="kw">)</span> <span class="ex">=</span> 11000011 for f = <span class="op">&lt;</span>built-in function xor<span class="op">&gt;</span></span>
<span id="cb51-265"><a href="#cb51-265"></a><span class="ex">~11110000</span> = 00001111</span>
<span id="cb51-266"><a href="#cb51-266"></a><span class="in">```</span></span>
<span id="cb51-267"><a href="#cb51-267"></a></span>
<span id="cb51-268"><a href="#cb51-268"></a><span class="fu">## Rust operators</span></span>
<span id="cb51-269"><a href="#cb51-269"></a></span>
<span id="cb51-270"><a href="#cb51-270"></a><span class="ss">- </span>More common convention to use <span class="in">`!`</span> for not (vs. <span class="in">`~`</span>)</span>
<span id="cb51-271"><a href="#cb51-271"></a><span class="ss">- </span>I'm not great with Rust format codes yet, so a bit silly.</span>
<span id="cb51-272"><a href="#cb51-272"></a><span class="in">```{.rs filename="src/main.rs"}</span></span>
<span id="cb51-273"><a href="#cb51-273"></a><span class="in">fn main() {</span></span>
<span id="cb51-274"><a href="#cb51-274"></a><span class="in">    let mut devrnd = std::fs::File::open("/dev/urandom").unwrap();</span></span>
<span id="cb51-275"><a href="#cb51-275"></a><span class="in">    let mut buffer = [0u8; 2];</span></span>
<span id="cb51-276"><a href="#cb51-276"></a><span class="in">    std::io::Read::read_exact(&amp;mut devrnd, &amp;mut buffer).unwrap();</span></span>
<span id="cb51-277"><a href="#cb51-277"></a><span class="in">    let x = buffer[0];</span></span>
<span id="cb51-278"><a href="#cb51-278"></a><span class="in">    let y = buffer[1];</span></span>
<span id="cb51-279"><a href="#cb51-279"></a><span class="in">    let mut z = x | y;</span></span>
<span id="cb51-280"><a href="#cb51-280"></a><span class="in">    println!("x = {x:08b}, y = {y:08b}, x | y = {z:08b}");</span></span>
<span id="cb51-281"><a href="#cb51-281"></a><span class="in">    z = x ^ y;</span></span>
<span id="cb51-282"><a href="#cb51-282"></a><span class="in">    println!("x = {x:08b}, y = {y:08b}, x ^ y = {z:08b}");</span></span>
<span id="cb51-283"><a href="#cb51-283"></a><span class="in">    z = x &amp; y;</span></span>
<span id="cb51-284"><a href="#cb51-284"></a><span class="in">    println!("x = {x:08b}, y = {y:08b}, x &amp; y = {z:08b}");</span></span>
<span id="cb51-285"><a href="#cb51-285"></a><span class="in">    let y = !buffer[0];</span></span>
<span id="cb51-286"><a href="#cb51-286"></a><span class="in">    println!("x = {x:08b},!x = {y:08b}");</span></span>
<span id="cb51-287"><a href="#cb51-287"></a><span class="in">}</span></span>
<span id="cb51-288"><a href="#cb51-288"></a><span class="in">```</span></span>
<span id="cb51-289"><a href="#cb51-289"></a></span>
<span id="cb51-290"><a href="#cb51-290"></a><span class="fu">## Run it</span></span>
<span id="cb51-291"><a href="#cb51-291"></a></span>
<span id="cb51-292"><a href="#cb51-292"></a><span class="ss">- </span>See how different random bits are combined!</span>
<span id="cb51-293"><a href="#cb51-293"></a><span class="in">```sh</span></span>
<span id="cb51-294"><a href="#cb51-294"></a><span class="ex">$</span> cargo run</span>
<span id="cb51-295"><a href="#cb51-295"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb51-296"><a href="#cb51-296"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb51-297"><a href="#cb51-297"></a><span class="ex">x</span> = 01110000, y = 10001110, x <span class="kw">|</span> <span class="ex">y</span> = 11111110</span>
<span id="cb51-298"><a href="#cb51-298"></a><span class="ex">x</span> = 01110000, y = 10001110, x ^ y = 11111110</span>
<span id="cb51-299"><a href="#cb51-299"></a><span class="ex">x</span> = 01110000, y = 10001110, x <span class="kw">&amp;</span> <span class="ex">y</span> = 00000000</span>
<span id="cb51-300"><a href="#cb51-300"></a><span class="ex">x</span> = 01110000,!x = 10001111</span>
<span id="cb51-301"><a href="#cb51-301"></a><span class="ex">$</span> cargo run</span>
<span id="cb51-302"><a href="#cb51-302"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb51-303"><a href="#cb51-303"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb51-304"><a href="#cb51-304"></a><span class="ex">x</span> = 10111111, y = 00110110, x <span class="kw">|</span> <span class="ex">y</span> = 10111111</span>
<span id="cb51-305"><a href="#cb51-305"></a><span class="ex">x</span> = 10111111, y = 00110110, x ^ y = 10001001</span>
<span id="cb51-306"><a href="#cb51-306"></a><span class="ex">x</span> = 10111111, y = 00110110, x <span class="kw">&amp;</span> <span class="ex">y</span> = 00110110</span>
<span id="cb51-307"><a href="#cb51-307"></a><span class="ex">x</span> = 10111111,!x = 01000000</span>
<span id="cb51-308"><a href="#cb51-308"></a><span class="in">```</span></span>
<span id="cb51-309"><a href="#cb51-309"></a></span>
<span id="cb51-310"><a href="#cb51-310"></a></span>
<span id="cb51-311"><a href="#cb51-311"></a><span class="fu"># Endianness</span></span>
<span id="cb51-312"><a href="#cb51-312"></a></span>
<span id="cb51-313"><a href="#cb51-313"></a><span class="fu">## Why?</span></span>
<span id="cb51-314"><a href="#cb51-314"></a></span>
<span id="cb51-315"><a href="#cb51-315"></a>:::: {.columns}</span>
<span id="cb51-316"><a href="#cb51-316"></a></span>
<span id="cb51-317"><a href="#cb51-317"></a>::: {.column width="50%"}</span>
<span id="cb51-318"><a href="#cb51-318"></a></span>
<span id="cb51-319"><a href="#cb51-319"></a><span class="ss">- </span>Imagine thinking in digits.</span>
<span id="cb51-320"><a href="#cb51-320"></a><span class="ss">- </span>To store a ~3 digit number, need $3 \times 10 = 30$ "things" that can hold a number.</span>
<span id="cb51-321"><a href="#cb51-321"></a></span>
<span id="cb51-322"><a href="#cb51-322"></a>:::</span>
<span id="cb51-323"><a href="#cb51-323"></a></span>
<span id="cb51-324"><a href="#cb51-324"></a>::: {.column width="50%"}</span>
<span id="cb51-325"><a href="#cb51-325"></a></span>
<span id="cb51-328"><a href="#cb51-328"></a><span class="in">```{dot}</span></span>
<span id="cb51-329"><a href="#cb51-329"></a><span class="in">//| echo: false</span></span>
<span id="cb51-330"><a href="#cb51-330"></a><span class="in">//| fig-width: 400px</span></span>
<span id="cb51-331"><a href="#cb51-331"></a><span class="in">digraph finite_automata {</span></span>
<span id="cb51-332"><a href="#cb51-332"></a><span class="in">  rankdir=TD; bgcolor="#191919";</span></span>
<span id="cb51-333"><a href="#cb51-333"></a><span class="in">  node [fontcolor = "#ffffff", color = "#ffffff", shape=record];</span></span>
<span id="cb51-334"><a href="#cb51-334"></a><span class="in">  edge [color = "#ffffff",fontcolor = "#ffffff"]</span></span>
<span id="cb51-335"><a href="#cb51-335"></a></span>
<span id="cb51-336"><a href="#cb51-336"></a><span class="in">  struct [label="{ {&lt;0&gt; 10^0  | &lt;1&gt; 10^1| &lt;2&gt; 10^2}} "];</span></span>
<span id="cb51-337"><a href="#cb51-337"></a><span class="in">  struct0 [label="{0|1|2|3|4|5|6|7|8|9}"];</span></span>
<span id="cb51-338"><a href="#cb51-338"></a><span class="in">  struct1 [label="{0|1|2|3|4|5|6|7|8|9}"];</span></span>
<span id="cb51-339"><a href="#cb51-339"></a><span class="in">  struct2 [label="{0|1|2|3|4|5|6|7|8|9}"];</span></span>
<span id="cb51-340"><a href="#cb51-340"></a><span class="in">  struct:0 -&gt; struct0</span></span>
<span id="cb51-341"><a href="#cb51-341"></a><span class="in">  struct:1 -&gt; struct1</span></span>
<span id="cb51-342"><a href="#cb51-342"></a><span class="in">  struct:2 -&gt; struct2</span></span>
<span id="cb51-343"><a href="#cb51-343"></a></span>
<span id="cb51-344"><a href="#cb51-344"></a><span class="in">}</span></span>
<span id="cb51-345"><a href="#cb51-345"></a><span class="in">```</span></span>
<span id="cb51-346"><a href="#cb51-346"></a></span>
<span id="cb51-347"><a href="#cb51-347"></a>:::</span>
<span id="cb51-348"><a href="#cb51-348"></a></span>
<span id="cb51-349"><a href="#cb51-349"></a>::::</span>
<span id="cb51-350"><a href="#cb51-350"></a></span>
<span id="cb51-351"><a href="#cb51-351"></a><span class="fu">## Binary</span></span>
<span id="cb51-352"><a href="#cb51-352"></a></span>
<span id="cb51-353"><a href="#cb51-353"></a><span class="ss">- </span>We are familiar with binary encoding.</span>
<span id="cb51-354"><a href="#cb51-354"></a><span class="ss">- </span>We note: $\log_2(999) \lt 10$</span>
<span id="cb51-355"><a href="#cb51-355"></a><span class="ss">- </span>*Decimal encoding **squanders** $\dfrac{2}{3}$ of it's storage space.*</span>
<span id="cb51-356"><a href="#cb51-356"></a><span class="ss">- </span>So we store in binary.</span>
<span id="cb51-357"><a href="#cb51-357"></a></span>
<span id="cb51-358"><a href="#cb51-358"></a></span>
<span id="cb51-361"><a href="#cb51-361"></a><span class="in">```{dot}</span></span>
<span id="cb51-362"><a href="#cb51-362"></a><span class="in">//| echo: false</span></span>
<span id="cb51-363"><a href="#cb51-363"></a><span class="in">//| fig-width: 800px</span></span>
<span id="cb51-364"><a href="#cb51-364"></a><span class="in">//| fig-height: 200px</span></span>
<span id="cb51-365"><a href="#cb51-365"></a><span class="in">digraph finite_automata {</span></span>
<span id="cb51-366"><a href="#cb51-366"></a><span class="in">  rankdir=LR; bgcolor="#191919";</span></span>
<span id="cb51-367"><a href="#cb51-367"></a><span class="in">  node [fontcolor = "#ffffff", color = "#ffffff", shape=record];</span></span>
<span id="cb51-368"><a href="#cb51-368"></a></span>
<span id="cb51-369"><a href="#cb51-369"></a><span class="in">  struct [label="{2^0|2^1|2^2|2^3|2^4|2^5|2^6|2^7|2^8|2^9}|{0|0|0|0|0|0|0|0|0|0}|{1|1|1|1|1|1|1|1|1|1}"];</span></span>
<span id="cb51-370"><a href="#cb51-370"></a><span class="in">}</span></span>
<span id="cb51-371"><a href="#cb51-371"></a><span class="in">```</span></span>
<span id="cb51-372"><a href="#cb51-372"></a></span>
<span id="cb51-373"><a href="#cb51-373"></a><span class="fu">## Binary</span></span>
<span id="cb51-374"><a href="#cb51-374"></a></span>
<span id="cb51-375"><a href="#cb51-375"></a><span class="ss">- </span>The benefit here is that is sufficient to note the presence or absence of a digit (<span class="in">`1`</span>) </span>
<span id="cb51-376"><a href="#cb51-376"></a><span class="ss">- </span>Versus the specific digit $\in <span class="co">[</span><span class="ot">1,9</span><span class="co">]</span>$ and presence of absense (<span class="in">`0`</span>)</span>
<span id="cb51-377"><a href="#cb51-377"></a></span>
<span id="cb51-380"><a href="#cb51-380"></a><span class="in">```{dot}</span></span>
<span id="cb51-381"><a href="#cb51-381"></a><span class="in">//| echo: false</span></span>
<span id="cb51-382"><a href="#cb51-382"></a><span class="in">//| fig-width: 800px</span></span>
<span id="cb51-383"><a href="#cb51-383"></a><span class="in">//| fig-height: 200px</span></span>
<span id="cb51-384"><a href="#cb51-384"></a><span class="in">digraph finite_automata {</span></span>
<span id="cb51-385"><a href="#cb51-385"></a><span class="in">  rankdir=LR; bgcolor="#191919";</span></span>
<span id="cb51-386"><a href="#cb51-386"></a><span class="in">  node [fontcolor = "#ffffff", color = "#ffffff", shape=record];</span></span>
<span id="cb51-387"><a href="#cb51-387"></a></span>
<span id="cb51-388"><a href="#cb51-388"></a><span class="in">  struct [label="{2^0|2^1|2^2|2^3|2^4|2^5|2^6|2^7|2^8|2^9}|{|1|||1|1|||1|}"];</span></span>
<span id="cb51-389"><a href="#cb51-389"></a><span class="in">}</span></span>
<span id="cb51-390"><a href="#cb51-390"></a><span class="in">```</span></span>
<span id="cb51-391"><a href="#cb51-391"></a></span>
<span id="cb51-392"><a href="#cb51-392"></a><span class="fu">## Wait a minute.</span></span>
<span id="cb51-393"><a href="#cb51-393"></a></span>
<span id="cb51-394"><a href="#cb51-394"></a>:::: {.columns}</span>
<span id="cb51-395"><a href="#cb51-395"></a></span>
<span id="cb51-396"><a href="#cb51-396"></a>::: {.column width="50%"}</span>
<span id="cb51-397"><a href="#cb51-397"></a></span>
<span id="cb51-398"><a href="#cb51-398"></a><span class="ss">- </span>Why is the ones digit ($n^0$) leftmost ?</span>
<span id="cb51-399"><a href="#cb51-399"></a><span class="ss">    - </span>The "least significant bit" or "lsb"</span>
<span id="cb51-400"><a href="#cb51-400"></a><span class="ss">- </span>In e.g. English place the "lsb" last.</span>
<span id="cb51-401"><a href="#cb51-401"></a><span class="ss">    - </span>CS 276 <span class="dv">&amp;rArr;</span></span>
<span id="cb51-402"><a href="#cb51-402"></a></span>
<span id="cb51-403"><a href="#cb51-403"></a>:::</span>
<span id="cb51-404"><a href="#cb51-404"></a></span>
<span id="cb51-405"><a href="#cb51-405"></a>::: {.column width="50%"}</span>
<span id="cb51-406"><a href="#cb51-406"></a></span>
<span id="cb51-407"><a href="#cb51-407"></a></span>
<span id="cb51-410"><a href="#cb51-410"></a><span class="in">```{dot}</span></span>
<span id="cb51-411"><a href="#cb51-411"></a><span class="in">//| echo: false</span></span>
<span id="cb51-412"><a href="#cb51-412"></a><span class="in">//| fig-width: 400px</span></span>
<span id="cb51-413"><a href="#cb51-413"></a><span class="in">//| fig-height: 400px</span></span>
<span id="cb51-414"><a href="#cb51-414"></a><span class="in">digraph finite_automata {</span></span>
<span id="cb51-415"><a href="#cb51-415"></a><span class="in">  rankdir=TD; bgcolor="#191919";</span></span>
<span id="cb51-416"><a href="#cb51-416"></a><span class="in">  node [fontcolor = "#ffffff", color = "#ffffff", shape=record];</span></span>
<span id="cb51-417"><a href="#cb51-417"></a><span class="in">  edge [color = "#ffffff",fontcolor = "#ffffff"]</span></span>
<span id="cb51-418"><a href="#cb51-418"></a></span>
<span id="cb51-419"><a href="#cb51-419"></a><span class="in">  struct [label="{ {&lt;0&gt; 10^0  | &lt;1&gt; 10^1| &lt;2&gt; 10^2}} "];</span></span>
<span id="cb51-420"><a href="#cb51-420"></a><span class="in">  struct0 [label="{||||||6|||}"];</span></span>
<span id="cb51-421"><a href="#cb51-421"></a><span class="in">  struct1 [label="{|||||||7||}"];</span></span>
<span id="cb51-422"><a href="#cb51-422"></a><span class="in">  struct2 [label="{||2|||||||}"];</span></span>
<span id="cb51-423"><a href="#cb51-423"></a><span class="in">  struct:0 -&gt; struct0</span></span>
<span id="cb51-424"><a href="#cb51-424"></a><span class="in">  struct:1 -&gt; struct1</span></span>
<span id="cb51-425"><a href="#cb51-425"></a><span class="in">  struct:2 -&gt; struct2</span></span>
<span id="cb51-426"><a href="#cb51-426"></a><span class="in">}</span></span>
<span id="cb51-427"><a href="#cb51-427"></a><span class="in">```</span></span>
<span id="cb51-428"><a href="#cb51-428"></a></span>
<span id="cb51-429"><a href="#cb51-429"></a>:::</span>
<span id="cb51-430"><a href="#cb51-430"></a></span>
<span id="cb51-431"><a href="#cb51-431"></a>::::</span>
<span id="cb51-432"><a href="#cb51-432"></a></span>
<span id="cb51-433"><a href="#cb51-433"></a><span class="fu">## Languages</span></span>
<span id="cb51-434"><a href="#cb51-434"></a></span>
<span id="cb51-435"><a href="#cb51-435"></a><span class="ss">- </span>In e.g. spoken word, makes sense to lead with the biggest value.</span>
<span id="cb51-436"><a href="#cb51-436"></a><span class="ss">    - </span>200 of something is closer to 299 of something than 0 of something is to 9 of something.</span>
<span id="cb51-437"><a href="#cb51-437"></a><span class="ss">- </span>In e.g. programming, we often lead with lowest numerical index.</span>
<span id="cb51-438"><a href="#cb51-438"></a><span class="ss">    - </span>We look at the <span class="in">`arr[0]`</span> of something before the <span class="in">`arr[1]`</span> of something.</span>
<span id="cb51-439"><a href="#cb51-439"></a></span>
<span id="cb51-440"><a href="#cb51-440"></a><span class="fu">## In Practice</span></span>
<span id="cb51-441"><a href="#cb51-441"></a></span>
<span id="cb51-442"><a href="#cb51-442"></a><span class="ss">- </span>We end up with</span>
<span id="cb51-443"><a href="#cb51-443"></a><span class="in">```{.python}</span></span>
<span id="cb51-444"><a href="#cb51-444"></a><span class="in">"276"[0] == '2' and 276 % (10 ** 1) == 6</span></span>
<span id="cb51-445"><a href="#cb51-445"></a><span class="in">```</span></span>
<span id="cb51-446"><a href="#cb51-446"></a><span class="ss">- </span>Confusing!  </span>
<span id="cb51-447"><a href="#cb51-447"></a><span class="ss">- </span>Recall:</span>
<span id="cb51-448"><a href="#cb51-448"></a><span class="in">```{.py}</span></span>
<span id="cb51-449"><a href="#cb51-449"></a><span class="in"># Strings are not reversed.</span></span>
<span id="cb51-450"><a href="#cb51-450"></a><span class="in">to_bool_str = lambda x : [c == '1' for c in `{.08b}.format(x)]</span></span>
<span id="cb51-451"><a href="#cb51-451"></a><span class="in"># Numerics are reversed.</span></span>
<span id="cb51-452"><a href="#cb51-452"></a><span class="in">to_bool_num = lambda x : [1 == (x // 2 ** i) % 2 for i in range(8)][::-1]</span></span>
<span id="cb51-453"><a href="#cb51-453"></a><span class="in">```</span></span>
<span id="cb51-454"><a href="#cb51-454"></a></span>
<span id="cb51-455"><a href="#cb51-455"></a><span class="fu">## Annoyance</span></span>
<span id="cb51-456"><a href="#cb51-456"></a></span>
<span id="cb51-457"><a href="#cb51-457"></a><span class="ss">- </span>This gets *very annoying* when trying to move numbers around that don't quite fit in some number of bits.</span>
<span id="cb51-458"><a href="#cb51-458"></a><span class="ss">    - </span>Say I have <span class="in">`0x1234`</span> followers on Instagram📷</span>
<span id="cb51-459"><a href="#cb51-459"></a><span class="ss">    - </span>Boycott Meta etc etc.</span>
<span id="cb51-460"><a href="#cb51-460"></a><span class="ss">    - </span>And/or follow me <span class="co">[</span><span class="ot">@calvinallegedly</span><span class="co">](https://www.instagram.com/calvinallegedly/)</span></span>
<span id="cb51-461"><a href="#cb51-461"></a><span class="in">```sh</span></span>
<span id="cb51-462"><a href="#cb51-462"></a><span class="ex">$</span> python3 <span class="at">-c</span> <span class="st">"print(0x1234)"</span></span>
<span id="cb51-463"><a href="#cb51-463"></a><span class="ex">4660</span></span>
<span id="cb51-464"><a href="#cb51-464"></a><span class="in">```</span></span>
<span id="cb51-465"><a href="#cb51-465"></a><span class="ss">- </span>Also imagine it is 1969 and you only have 8 bit integers.</span>
<span id="cb51-466"><a href="#cb51-466"></a><span class="ss">    - </span>Only 2 digits in hexadecimal representation.</span>
<span id="cb51-467"><a href="#cb51-467"></a></span>
<span id="cb51-468"><a href="#cb51-468"></a><span class="fu">## Stdin</span></span>
<span id="cb51-469"><a href="#cb51-469"></a></span>
<span id="cb51-470"><a href="#cb51-470"></a><span class="ss">- </span>We can use <span class="in">`stdin`</span> and <span class="in">`read_line`</span> to read in some values.</span>
<span id="cb51-471"><a href="#cb51-471"></a><span class="ss">- </span>Recall:</span>
<span id="cb51-472"><a href="#cb51-472"></a><span class="in">```rs</span></span>
<span id="cb51-473"><a href="#cb51-473"></a><span class="kw">let</span> <span class="kw">mut</span> guess <span class="op">=</span> <span class="dt">String</span><span class="pp">::</span>new()<span class="op">;</span></span>
<span id="cb51-474"><a href="#cb51-474"></a><span class="pp">std::io::</span>stdin()<span class="op">.</span>read_line(<span class="op">&amp;</span><span class="kw">mut</span> guess)<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb51-475"><a href="#cb51-475"></a><span class="in">```</span></span>
<span id="cb51-476"><a href="#cb51-476"></a></span>
<span id="cb51-477"><a href="#cb51-477"></a><span class="fu">## Test</span></span>
<span id="cb51-478"><a href="#cb51-478"></a></span>
<span id="cb51-479"><a href="#cb51-479"></a><span class="ss">- </span>Test it</span>
<span id="cb51-480"><a href="#cb51-480"></a><span class="in">```{.rs filename="src/main.rs"}</span></span>
<span id="cb51-481"><a href="#cb51-481"></a><span class="in">fn main() {</span></span>
<span id="cb51-482"><a href="#cb51-482"></a><span class="in">    let mut guess = String::new();</span></span>
<span id="cb51-483"><a href="#cb51-483"></a><span class="in">    std::io::stdin().read_line(&amp;mut guess).unwrap();</span></span>
<span id="cb51-484"><a href="#cb51-484"></a><span class="in">    println!("{:?}", guess);</span></span>
<span id="cb51-485"><a href="#cb51-485"></a><span class="in">}</span></span>
<span id="cb51-486"><a href="#cb51-486"></a><span class="in">```</span></span>
<span id="cb51-487"><a href="#cb51-487"></a></span>
<span id="cb51-488"><a href="#cb51-488"></a><span class="ss">- </span><span class="in">`cargo run`</span> -&gt; type some nonsense -&gt; press ENTER</span>
<span id="cb51-489"><a href="#cb51-489"></a><span class="in">```sh</span></span>
<span id="cb51-490"><a href="#cb51-490"></a><span class="ex">$</span> cargo run</span>
<span id="cb51-491"><a href="#cb51-491"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb51-492"><a href="#cb51-492"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb51-493"><a href="#cb51-493"></a><span class="ex">some</span> nonsense</span>
<span id="cb51-494"><a href="#cb51-494"></a><span class="st">"some nonsense\n"</span></span>
<span id="cb51-495"><a href="#cb51-495"></a><span class="ex">$</span></span>
<span id="cb51-496"><a href="#cb51-496"></a><span class="in">```</span></span>
<span id="cb51-497"><a href="#cb51-497"></a></span>
<span id="cb51-498"><a href="#cb51-498"></a><span class="fu">## Hex reader</span></span>
<span id="cb51-499"><a href="#cb51-499"></a></span>
<span id="cb51-500"><a href="#cb51-500"></a><span class="ss">- </span>To read in hexadecimal values we must:</span>
<span id="cb51-501"><a href="#cb51-501"></a><span class="ss">    - </span>Read in the string.</span>
<span id="cb51-502"><a href="#cb51-502"></a><span class="ss">    - </span>Break into chunks.</span>
<span id="cb51-503"><a href="#cb51-503"></a><span class="ss">    - </span>Convert 2 character chunks to numerical values</span>
<span id="cb51-504"><a href="#cb51-504"></a>    </span>
<span id="cb51-505"><a href="#cb51-505"></a></span>
<span id="cb51-506"><a href="#cb51-506"></a><span class="fu">## To characters</span></span>
<span id="cb51-507"><a href="#cb51-507"></a></span>
<span id="cb51-508"><a href="#cb51-508"></a><span class="ss">- </span>We'll just iterate over the characters and print them in pairs.</span>
<span id="cb51-509"><a href="#cb51-509"></a><span class="in">```{.rs filename="src/main.rs"}</span></span>
<span id="cb51-510"><a href="#cb51-510"></a><span class="in">fn main() {</span></span>
<span id="cb51-511"><a href="#cb51-511"></a><span class="in">    let mut guess = String::new();</span></span>
<span id="cb51-512"><a href="#cb51-512"></a><span class="in">    std::io::stdin().read_line(&amp;mut guess).unwrap();</span></span>
<span id="cb51-513"><a href="#cb51-513"></a><span class="in">    let mut flip = false;</span></span>
<span id="cb51-514"><a href="#cb51-514"></a><span class="in">    for c in guess.chars() {</span></span>
<span id="cb51-515"><a href="#cb51-515"></a><span class="in">        if flip {</span></span>
<span id="cb51-516"><a href="#cb51-516"></a><span class="in">            println!(c);</span></span>
<span id="cb51-517"><a href="#cb51-517"></a><span class="in">        } else {</span></span>
<span id="cb51-518"><a href="#cb51-518"></a><span class="in">            print!(c);</span></span>
<span id="cb51-519"><a href="#cb51-519"></a><span class="in">        }</span></span>
<span id="cb51-520"><a href="#cb51-520"></a><span class="in">        flip = !flip;</span></span>
<span id="cb51-521"><a href="#cb51-521"></a><span class="in">    println!("{:?}", guess);</span></span>
<span id="cb51-522"><a href="#cb51-522"></a><span class="in">}</span></span>
<span id="cb51-523"><a href="#cb51-523"></a><span class="in">```</span></span>
<span id="cb51-524"><a href="#cb51-524"></a></span>
<span id="cb51-525"><a href="#cb51-525"></a><span class="fu">## Test it</span></span>
<span id="cb51-526"><a href="#cb51-526"></a></span>
<span id="cb51-527"><a href="#cb51-527"></a><span class="ss">- </span>Works sometimes better than others</span>
<span id="cb51-528"><a href="#cb51-528"></a></span>
<span id="cb51-529"><a href="#cb51-529"></a><span class="in">```sh</span></span>
<span id="cb51-530"><a href="#cb51-530"></a><span class="ex">$</span> cargo run</span>
<span id="cb51-531"><a href="#cb51-531"></a>   <span class="ex">Compiling</span> scratch v0.1.0 <span class="er">(</span><span class="ex">/home/user/tmp/scratch</span><span class="kw">)</span></span>
<span id="cb51-532"><a href="#cb51-532"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.23s</span></span>
<span id="cb51-533"><a href="#cb51-533"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb51-534"><a href="#cb51-534"></a><span class="ex">0x1234</span></span>
<span id="cb51-535"><a href="#cb51-535"></a><span class="ex">0x</span></span>
<span id="cb51-536"><a href="#cb51-536"></a><span class="ex">12</span></span>
<span id="cb51-537"><a href="#cb51-537"></a><span class="ex">34</span></span>
<span id="cb51-538"><a href="#cb51-538"></a></span>
<span id="cb51-539"><a href="#cb51-539"></a><span class="ex">$</span> cargo run</span>
<span id="cb51-540"><a href="#cb51-540"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb51-541"><a href="#cb51-541"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb51-542"><a href="#cb51-542"></a><span class="ex">0x123</span></span>
<span id="cb51-543"><a href="#cb51-543"></a><span class="ex">0x</span></span>
<span id="cb51-544"><a href="#cb51-544"></a><span class="ex">12</span></span>
<span id="cb51-545"><a href="#cb51-545"></a><span class="ex">3</span></span>
<span id="cb51-546"><a href="#cb51-546"></a><span class="in">```</span></span>
<span id="cb51-547"><a href="#cb51-547"></a></span>
<span id="cb51-548"><a href="#cb51-548"></a><span class="fu">## Missing pieces</span></span>
<span id="cb51-549"><a href="#cb51-549"></a></span>
<span id="cb51-550"><a href="#cb51-550"></a><span class="ss">- </span>We need to throw out the prefix</span>
<span id="cb51-551"><a href="#cb51-551"></a><span class="ss">- </span>We need to make sure we begin, rather than end, on a possible singleton.</span>
<span id="cb51-552"><a href="#cb51-552"></a><span class="ss">- </span>Here's the plan:</span>
<span id="cb51-553"><a href="#cb51-553"></a><span class="ss">    - </span>Skip the first two</span>
<span id="cb51-554"><a href="#cb51-554"></a><span class="ss">    - </span>Traverse to the end of string.</span>
<span id="cb51-555"><a href="#cb51-555"></a><span class="ss">    - </span>Build doubles back up.</span>
<span id="cb51-556"><a href="#cb51-556"></a>    </span>
<span id="cb51-557"><a href="#cb51-557"></a><span class="fu">## Skip</span></span>
<span id="cb51-558"><a href="#cb51-558"></a></span>
<span id="cb51-559"><a href="#cb51-559"></a><span class="ss">- </span>We can apply <span class="in">`next()`</span> to an iterator to read characters.</span>
<span id="cb51-560"><a href="#cb51-560"></a><span class="ss">- </span>It's basically a pop operation.</span>
<span id="cb51-561"><a href="#cb51-561"></a></span>
<span id="cb51-562"><a href="#cb51-562"></a><span class="in">```{.rs filename="src/main.rs"}</span></span>
<span id="cb51-563"><a href="#cb51-563"></a><span class="in">fn main() {</span></span>
<span id="cb51-564"><a href="#cb51-564"></a><span class="in">    let mut guess = String::new();</span></span>
<span id="cb51-565"><a href="#cb51-565"></a><span class="in">    std::io::stdin().read_line(&amp;mut guess).unwrap();</span></span>
<span id="cb51-566"><a href="#cb51-566"></a><span class="in">    let mut flip = false;</span></span>
<span id="cb51-567"><a href="#cb51-567"></a><span class="in">    let mut cs = guess.chars();</span></span>
<span id="cb51-568"><a href="#cb51-568"></a><span class="in">    cs.next() // 0</span></span>
<span id="cb51-569"><a href="#cb51-569"></a><span class="in">    cs.next() // x</span></span>
<span id="cb51-570"><a href="#cb51-570"></a><span class="in">    for c in cs {</span></span>
<span id="cb51-571"><a href="#cb51-571"></a><span class="in">        if flip {</span></span>
<span id="cb51-572"><a href="#cb51-572"></a><span class="in">            println!(c);</span></span>
<span id="cb51-573"><a href="#cb51-573"></a><span class="in">        } else {</span></span>
<span id="cb51-574"><a href="#cb51-574"></a><span class="in">            print!(c);</span></span>
<span id="cb51-575"><a href="#cb51-575"></a><span class="in">        }</span></span>
<span id="cb51-576"><a href="#cb51-576"></a><span class="in">        flip = !flip;</span></span>
<span id="cb51-577"><a href="#cb51-577"></a><span class="in">    println!("{:?}", guess);</span></span>
<span id="cb51-578"><a href="#cb51-578"></a><span class="in">}</span></span>
<span id="cb51-579"><a href="#cb51-579"></a><span class="in">```</span></span>
<span id="cb51-580"><a href="#cb51-580"></a></span>
<span id="cb51-581"><a href="#cb51-581"></a><span class="fu">## Build up</span></span>
<span id="cb51-582"><a href="#cb51-582"></a></span>
<span id="cb51-583"><a href="#cb51-583"></a><span class="ss">- </span>From there we just need to get pairs somehow.</span>
<span id="cb51-584"><a href="#cb51-584"></a><span class="ss">- </span>It's not too bad to get the last character...</span>
<span id="cb51-585"><a href="#cb51-585"></a><span class="in">```rs</span></span>
<span id="cb51-586"><a href="#cb51-586"></a><span class="kw">fn</span> last(cs<span class="op">:</span><span class="pp">std::</span><span class="dt">str</span><span class="pp">::</span>Chars) <span class="op">-&gt;</span> <span class="dt">char</span> <span class="op">{</span></span>
<span id="cb51-587"><a href="#cb51-587"></a>    <span class="kw">let</span> <span class="kw">mut</span> <span class="kw">final</span> <span class="op">=</span> cs<span class="op">.</span>next()</span>
<span id="cb51-588"><a href="#cb51-588"></a>    <span class="cf">for</span> c <span class="kw">in</span> cs <span class="op">{</span></span>
<span id="cb51-589"><a href="#cb51-589"></a>        <span class="kw">final</span> <span class="op">=</span> c<span class="op">;</span></span>
<span id="cb51-590"><a href="#cb51-590"></a>    <span class="op">}</span></span>
<span id="cb51-591"><a href="#cb51-591"></a>    <span class="cf">return</span> <span class="kw">final</span><span class="op">;</span></span>
<span id="cb51-592"><a href="#cb51-592"></a><span class="op">}</span></span>
<span id="cb51-593"><a href="#cb51-593"></a><span class="in">```</span></span>
<span id="cb51-594"><a href="#cb51-594"></a></span>
<span id="cb51-595"><a href="#cb51-595"></a><span class="fu">## Uh oh!</span></span>
<span id="cb51-596"><a href="#cb51-596"></a></span>
<span id="cb51-597"><a href="#cb51-597"></a><span class="ss">- </span>When looping over an iterator, we get the type itself.</span>
<span id="cb51-598"><a href="#cb51-598"></a><span class="ss">    - </span>The loop just terminates when it has no more elements.</span>
<span id="cb51-599"><a href="#cb51-599"></a><span class="ss">- </span>When calling <span class="in">`.next()`</span>, we get an option.</span>
<span id="cb51-600"><a href="#cb51-600"></a><span class="ss">    - </span>There is not always a <span class="in">`.next()`</span> element.</span>
<span id="cb51-601"><a href="#cb51-601"></a><span class="in">```sh</span></span>
<span id="cb51-602"><a href="#cb51-602"></a><span class="va">error</span><span class="op">[</span>E0308<span class="op">]</span><span class="ex">:</span> mismatched types</span>
<span id="cb51-603"><a href="#cb51-603"></a> <span class="ex">--</span><span class="op">&gt;</span> src/main.rs:4:16</span>
<span id="cb51-604"><a href="#cb51-604"></a>  <span class="kw">|</span></span>
<span id="cb51-605"><a href="#cb51-605"></a><span class="ex">2</span> <span class="kw">|</span>     <span class="bu">let</span> <span class="va">mut</span> <span class="va">last</span> <span class="op">=</span> <span class="va">cs</span>.next<span class="er">(</span><span class="kw">);</span></span>
<span id="cb51-606"><a href="#cb51-606"></a>  <span class="kw">|</span>                    <span class="ex">---------</span> expected due to this value</span>
<span id="cb51-607"><a href="#cb51-607"></a><span class="ex">3</span> <span class="kw">|</span>     <span class="cf">for</span> c <span class="kw">in</span> cs {</span>
<span id="cb51-608"><a href="#cb51-608"></a><span class="ex">4</span> <span class="kw">|</span>         <span class="fu">last</span> = c<span class="kw">;</span></span>
<span id="cb51-609"><a href="#cb51-609"></a>  <span class="kw">|</span>                <span class="ex">^</span> expected <span class="kw">`</span><span class="ex">Option</span><span class="op">&lt;</span>char<span class="op">&gt;</span><span class="kw">`</span>, found <span class="kw">`</span><span class="ex">char</span><span class="kw">`</span></span>
<span id="cb51-610"><a href="#cb51-610"></a><span class="in">```</span></span>
<span id="cb51-611"><a href="#cb51-611"></a></span>
<span id="cb51-612"><a href="#cb51-612"></a><span class="fu">## Recurse</span></span>
<span id="cb51-613"><a href="#cb51-613"></a></span>
<span id="cb51-614"><a href="#cb51-614"></a><span class="in">```rs</span></span>
<span id="cb51-615"><a href="#cb51-615"></a><span class="kw">fn</span> last(<span class="kw">mut</span> cs<span class="op">:</span><span class="pp">std::</span><span class="dt">str</span><span class="pp">::</span>Chars) <span class="op">-&gt;</span> <span class="dt">Option</span><span class="op">&lt;</span><span class="dt">char</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb51-616"><a href="#cb51-616"></a>    <span class="cf">return</span> <span class="cf">match</span> cs<span class="op">.</span>next() <span class="op">{</span></span>
<span id="cb51-617"><a href="#cb51-617"></a>        <span class="cn">Some</span>(n) <span class="op">=&gt;</span> <span class="cf">match</span> last(cs) <span class="op">{</span>  <span class="co">// if there's digits here, look for more</span></span>
<span id="cb51-618"><a href="#cb51-618"></a>            <span class="cn">Some</span>(m) <span class="op">=&gt;</span> <span class="cn">Some</span>(m)<span class="op">,</span>      <span class="co">// if the last is found, return it</span></span>
<span id="cb51-619"><a href="#cb51-619"></a>            <span class="cn">None</span> <span class="op">=&gt;</span> <span class="cn">Some</span>(n)<span class="op">,</span>         <span class="co">// no more letters - we are last, return n</span></span>
<span id="cb51-620"><a href="#cb51-620"></a>        <span class="op">},</span></span>
<span id="cb51-621"><a href="#cb51-621"></a>        <span class="cn">None</span> <span class="op">=&gt;</span> <span class="cn">None</span><span class="op">,</span>                <span class="co">// required by `rustc` in case we don't input anything</span></span>
<span id="cb51-622"><a href="#cb51-622"></a>    <span class="op">}</span></span>
<span id="cb51-623"><a href="#cb51-623"></a><span class="op">}</span></span>
<span id="cb51-624"><a href="#cb51-624"></a><span class="in">```</span></span>
<span id="cb51-625"><a href="#cb51-625"></a></span>
<span id="cb51-626"><a href="#cb51-626"></a><span class="fu">## Try it out!</span></span>
<span id="cb51-627"><a href="#cb51-627"></a></span>
<span id="cb51-628"><a href="#cb51-628"></a><span class="in">```sh</span></span>
<span id="cb51-629"><a href="#cb51-629"></a><span class="ex">$</span> cargo run</span>
<span id="cb51-630"><a href="#cb51-630"></a>   <span class="ex">Compiling</span> scratch v0.1.0 <span class="er">(</span><span class="ex">/home/user/tmp/scratch</span><span class="kw">)</span></span>
<span id="cb51-631"><a href="#cb51-631"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.22s</span></span>
<span id="cb51-632"><a href="#cb51-632"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb51-633"><a href="#cb51-633"></a><span class="ex">0x1234</span></span>
<span id="cb51-634"><a href="#cb51-634"></a><span class="ex">Some</span><span class="er">(</span><span class="st">'\n'</span><span class="kw">)</span></span>
<span id="cb51-635"><a href="#cb51-635"></a><span class="in">```</span></span>
<span id="cb51-636"><a href="#cb51-636"></a><span class="ss">- </span>Whoops! Forgot the newline... match <span class="in">`Some('\n')`</span> to <span class="in">`None`</span></span>
<span id="cb51-637"><a href="#cb51-637"></a><span class="in">```rs</span></span>
<span id="cb51-638"><a href="#cb51-638"></a><span class="kw">fn</span> last(<span class="kw">mut</span> cs<span class="op">:</span><span class="pp">std::</span><span class="dt">str</span><span class="pp">::</span>Chars) <span class="op">-&gt;</span> <span class="dt">Option</span><span class="op">&lt;</span><span class="dt">char</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb51-639"><a href="#cb51-639"></a>    <span class="cf">return</span> <span class="cf">match</span> cs<span class="op">.</span>next() <span class="op">{</span></span>
<span id="cb51-640"><a href="#cb51-640"></a>        <span class="cn">Some</span>(<span class="ch">'</span><span class="sc">\n</span><span class="ch">'</span>) <span class="op">=&gt;</span> <span class="cn">None</span><span class="op">,</span></span>
<span id="cb51-641"><a href="#cb51-641"></a><span class="in">```</span></span>
<span id="cb51-642"><a href="#cb51-642"></a></span>
<span id="cb51-643"><a href="#cb51-643"></a><span class="fu">## Pair it up</span></span>
<span id="cb51-644"><a href="#cb51-644"></a></span>
<span id="cb51-645"><a href="#cb51-645"></a><span class="ss">- </span>Let's find the last two values.</span>
<span id="cb51-646"><a href="#cb51-646"></a><span class="ss">- </span>We already found the last one, just now if we've found it, pair it up and print it.</span>
<span id="cb51-647"><a href="#cb51-647"></a><span class="in">```rs</span></span>
<span id="cb51-648"><a href="#cb51-648"></a><span class="kw">fn</span> last(<span class="kw">mut</span> cs<span class="op">:</span><span class="pp">std::</span><span class="dt">str</span><span class="pp">::</span>Chars) <span class="op">-&gt;</span> <span class="dt">Option</span><span class="op">&lt;</span><span class="dt">char</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb51-649"><a href="#cb51-649"></a>    <span class="cf">return</span> <span class="cf">match</span> cs<span class="op">.</span>next() <span class="op">{</span></span>
<span id="cb51-650"><a href="#cb51-650"></a>        <span class="cn">Some</span>(n) <span class="op">=&gt;</span> <span class="cf">match</span> last(cs) <span class="op">{</span>  <span class="co">// if there's digits here, look for more</span></span>
<span id="cb51-651"><a href="#cb51-651"></a>            <span class="cn">Some</span>(m) <span class="op">=&gt;</span> <span class="op">{</span></span>
<span id="cb51-652"><a href="#cb51-652"></a>                <span class="pp">println!</span>(<span class="st">"{n}{m}"</span>)<span class="op">;</span>  <span class="co">// If last is found, print this then last</span></span>
<span id="cb51-653"><a href="#cb51-653"></a>                <span class="cn">Some</span>(m)<span class="op">,</span>             <span class="co">// if the last is found, return it</span></span>
<span id="cb51-654"><a href="#cb51-654"></a>            <span class="cn">None</span> <span class="op">=&gt;</span> <span class="cn">Some</span>(n)<span class="op">,</span>         <span class="co">// no more letters - we are last, return n</span></span>
<span id="cb51-655"><a href="#cb51-655"></a>        <span class="op">},</span></span>
<span id="cb51-656"><a href="#cb51-656"></a>        <span class="cn">None</span> <span class="op">=&gt;</span> <span class="cn">None</span><span class="op">,</span>                <span class="co">// required by `rustc` in case we don't input anything</span></span>
<span id="cb51-657"><a href="#cb51-657"></a>    <span class="op">}</span></span>
<span id="cb51-658"><a href="#cb51-658"></a><span class="op">}</span></span>
<span id="cb51-659"><a href="#cb51-659"></a><span class="in">```</span></span>
<span id="cb51-660"><a href="#cb51-660"></a></span>
<span id="cb51-661"><a href="#cb51-661"></a><span class="fu">## Whoops!</span></span>
<span id="cb51-662"><a href="#cb51-662"></a></span>
<span id="cb51-663"><a href="#cb51-663"></a><span class="ss">- </span>We print every digit paired with the last one!</span>
<span id="cb51-664"><a href="#cb51-664"></a><span class="in">```rs</span></span>
<span id="cb51-665"><a href="#cb51-665"></a><span class="op">$</span> cargo run</span>
<span id="cb51-666"><a href="#cb51-666"></a>   Compiling scratch v0<span class="op">.</span><span class="dv">1.0</span> (<span class="op">/</span>home<span class="op">/</span>user<span class="op">/</span>tmp<span class="op">/</span>scratch)</span>
<span id="cb51-667"><a href="#cb51-667"></a>    Finished `dev` profile [unoptimized <span class="op">+</span> debuginfo] target(s) <span class="kw">in</span> <span class="dv">0</span><span class="op">.</span>23s</span>
<span id="cb51-668"><a href="#cb51-668"></a>     Running `target<span class="op">/</span>debug<span class="op">/</span>scratch`</span>
<span id="cb51-669"><a href="#cb51-669"></a><span class="dv">0x1234</span></span>
<span id="cb51-670"><a href="#cb51-670"></a><span class="dv">34</span></span>
<span id="cb51-671"><a href="#cb51-671"></a><span class="dv">24</span></span>
<span id="cb51-672"><a href="#cb51-672"></a><span class="dv">14</span></span>
<span id="cb51-673"><a href="#cb51-673"></a><span class="cn">Some</span>(<span class="ch">'4'</span>)</span>
<span id="cb51-674"><a href="#cb51-674"></a><span class="in">```</span></span>
<span id="cb51-675"><a href="#cb51-675"></a><span class="ss">- </span>We can:</span>
<span id="cb51-676"><a href="#cb51-676"></a><span class="ss">    - </span>Remove the print from <span class="in">`main`</span></span>
<span id="cb51-677"><a href="#cb51-677"></a><span class="ss">    - </span>Return <span class="in">`None`</span> after printing a pair.</span>
<span id="cb51-678"><a href="#cb51-678"></a>    </span>
<span id="cb51-679"><a href="#cb51-679"></a><span class="fu">## Altogether</span></span>
<span id="cb51-680"><a href="#cb51-680"></a></span>
<span id="cb51-681"><a href="#cb51-681"></a>::::{.columns}</span>
<span id="cb51-682"><a href="#cb51-682"></a></span>
<span id="cb51-683"><a href="#cb51-683"></a>:::{.column width="40%"}</span>
<span id="cb51-684"><a href="#cb51-684"></a></span>
<span id="cb51-685"><a href="#cb51-685"></a><span class="ss">- </span>Rename <span class="in">`last`</span> to <span class="in">`pairs`</span></span>
<span id="cb51-686"><a href="#cb51-686"></a><span class="ss">- </span>Print single digits in <span class="in">`main`</span></span>
<span id="cb51-687"><a href="#cb51-687"></a><span class="ss">    - </span>Use <span class="in">`if let`</span> - kind of a single pattern match.</span>
<span id="cb51-688"><a href="#cb51-688"></a></span>
<span id="cb51-689"><a href="#cb51-689"></a>:::</span>
<span id="cb51-690"><a href="#cb51-690"></a></span>
<span id="cb51-691"><a href="#cb51-691"></a>:::{.column width="60%"}</span>
<span id="cb51-692"><a href="#cb51-692"></a></span>
<span id="cb51-693"><a href="#cb51-693"></a><span class="in">```{.rs filename="src/main.rs"}</span></span>
<span id="cb51-694"><a href="#cb51-694"></a><span class="in">fn pairs(mut cs:std::str::Chars) -&gt; Option&lt;char&gt; {</span></span>
<span id="cb51-695"><a href="#cb51-695"></a><span class="in">    return match cs.next() {</span></span>
<span id="cb51-696"><a href="#cb51-696"></a><span class="in">        Some('\n') =&gt; None,</span></span>
<span id="cb51-697"><a href="#cb51-697"></a><span class="in">        Some(n) =&gt; match pairs(cs) {</span></span>
<span id="cb51-698"><a href="#cb51-698"></a><span class="in">            Some(m) =&gt; {</span></span>
<span id="cb51-699"><a href="#cb51-699"></a><span class="in">                println!("{n}{m}");</span></span>
<span id="cb51-700"><a href="#cb51-700"></a><span class="in">                None</span></span>
<span id="cb51-701"><a href="#cb51-701"></a><span class="in">            }</span></span>
<span id="cb51-702"><a href="#cb51-702"></a><span class="in">            None =&gt; Some(n),</span></span>
<span id="cb51-703"><a href="#cb51-703"></a><span class="in">        },</span></span>
<span id="cb51-704"><a href="#cb51-704"></a><span class="in">        None =&gt; None,</span></span>
<span id="cb51-705"><a href="#cb51-705"></a><span class="in">    }</span></span>
<span id="cb51-706"><a href="#cb51-706"></a><span class="in">}</span></span>
<span id="cb51-707"><a href="#cb51-707"></a></span>
<span id="cb51-708"><a href="#cb51-708"></a><span class="in">fn main() {</span></span>
<span id="cb51-709"><a href="#cb51-709"></a><span class="in">    let mut guess = String::new();</span></span>
<span id="cb51-710"><a href="#cb51-710"></a><span class="in">    std::io::stdin().read_line(&amp;mut guess).unwrap();</span></span>
<span id="cb51-711"><a href="#cb51-711"></a><span class="in">    let mut cs = guess.chars();</span></span>
<span id="cb51-712"><a href="#cb51-712"></a><span class="in">    cs.next();</span></span>
<span id="cb51-713"><a href="#cb51-713"></a><span class="in">    cs.next();</span></span>
<span id="cb51-714"><a href="#cb51-714"></a><span class="in">    if let Some(n) = pairs(cs) {</span></span>
<span id="cb51-715"><a href="#cb51-715"></a><span class="in">        println!("{n}");</span></span>
<span id="cb51-716"><a href="#cb51-716"></a><span class="in">    }</span></span>
<span id="cb51-717"><a href="#cb51-717"></a><span class="in">}</span></span>
<span id="cb51-718"><a href="#cb51-718"></a><span class="in">```</span></span>
<span id="cb51-719"><a href="#cb51-719"></a></span>
<span id="cb51-720"><a href="#cb51-720"></a>:::</span>
<span id="cb51-721"><a href="#cb51-721"></a></span>
<span id="cb51-722"><a href="#cb51-722"></a>::::</span>
<span id="cb51-723"><a href="#cb51-723"></a></span>
<span id="cb51-724"><a href="#cb51-724"></a><span class="fu">## Just parse `{n}{m}`</span></span>
<span id="cb51-725"><a href="#cb51-725"></a></span>
<span id="cb51-726"><a href="#cb51-726"></a><span class="ss">- </span>The built-in is <span class="in">`from_str_radix`</span> for e.g. <span class="in">`u8`</span>.</span>
<span id="cb51-727"><a href="#cb51-727"></a><span class="ss">    - </span>Turn characters into singleton strings..</span>
<span id="cb51-728"><a href="#cb51-728"></a><span class="ss">    - </span>(We could pattern match <span class="in">`'1' =&gt; 1`</span> instead)</span>
<span id="cb51-729"><a href="#cb51-729"></a></span>
<span id="cb51-730"><a href="#cb51-730"></a><span class="in">```rs</span></span>
<span id="cb51-731"><a href="#cb51-731"></a><span class="kw">fn</span> two_hex(n<span class="op">:</span><span class="dt">char</span><span class="op">,</span> m<span class="op">:</span><span class="dt">char</span>) <span class="op">-&gt;</span> <span class="dt">u8</span> <span class="op">{</span></span>
<span id="cb51-732"><a href="#cb51-732"></a>    <span class="kw">let</span> n <span class="op">=</span> <span class="dt">u8</span><span class="pp">::</span>from_str_radix(<span class="op">&amp;</span>n<span class="op">.</span>to_string()<span class="op">,</span> <span class="dv">16</span>)<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb51-733"><a href="#cb51-733"></a>    <span class="kw">let</span> m <span class="op">=</span> <span class="dt">u8</span><span class="pp">::</span>from_str_radix(<span class="op">&amp;</span>m<span class="op">.</span>to_string()<span class="op">,</span> <span class="dv">16</span>)<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb51-734"><a href="#cb51-734"></a>    <span class="cf">return</span> n <span class="op">*</span> <span class="dv">16</span> <span class="op">+</span> m<span class="op">;</span></span>
<span id="cb51-735"><a href="#cb51-735"></a><span class="op">}</span></span>
<span id="cb51-736"><a href="#cb51-736"></a><span class="in">```</span></span>
<span id="cb51-737"><a href="#cb51-737"></a></span>
<span id="cb51-738"><a href="#cb51-738"></a><span class="fu">## Bundle into a *vector*</span></span>
<span id="cb51-739"><a href="#cb51-739"></a></span>
<span id="cb51-740"><a href="#cb51-740"></a><span class="ss">- </span>We introduce vectors.</span>
<span id="cb51-741"><a href="#cb51-741"></a><span class="ss">    - </span>So close to a Pythonic <span class="in">`&lt;class 'list'&gt;`</span> I can't tell the difference.</span>
<span id="cb51-742"><a href="#cb51-742"></a><span class="ss">- </span>Vs. printing, toss numeric values into a vectors.</span>
<span id="cb51-743"><a href="#cb51-743"></a><span class="ss">- </span>This is slightly complicated by the fact that, uh...</span>
<span id="cb51-744"><a href="#cb51-744"></a><span class="in">```rs</span></span>
<span id="cb51-745"><a href="#cb51-745"></a><span class="kw">fn</span> pairs(<span class="kw">mut</span> cs<span class="op">:</span><span class="pp">std::</span><span class="dt">str</span><span class="pp">::</span>Chars) <span class="op">-&gt;</span> <span class="dt">Option</span><span class="op">&lt;</span><span class="dt">char</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb51-746"><a href="#cb51-746"></a><span class="in">```</span></span>
<span id="cb51-747"><a href="#cb51-747"></a><span class="ss">- </span>There's no vector there!</span>
<span id="cb51-748"><a href="#cb51-748"></a><span class="ss">    - </span>Can't just return it (because we're using recursion #based)</span>
<span id="cb51-749"><a href="#cb51-749"></a>    </span>
<span id="cb51-750"><a href="#cb51-750"></a><span class="fu">## Create vectors</span></span>
<span id="cb51-751"><a href="#cb51-751"></a></span>
<span id="cb51-752"><a href="#cb51-752"></a><span class="ss">- </span>True to form in Rust, vectors require specific initialization as they are data structure.</span>
<span id="cb51-753"><a href="#cb51-753"></a><span class="ss">    - </span>In this way they are like big S <span class="in">`String`</span>s with <span class="in">`String::new()`</span></span>
<span id="cb51-754"><a href="#cb51-754"></a><span class="ss">- </span>We can use <span class="in">`Vec::new()`</span> or the macro <span class="in">`vec!`</span>. <span class="co">[</span><span class="ot">Read more</span><span class="co">](https://doc.rust-lang.org/std/vec/struct.Vec.html)</span></span>
<span id="cb51-755"><a href="#cb51-755"></a><span class="in">```rs</span></span>
<span id="cb51-756"><a href="#cb51-756"></a><span class="kw">let</span> <span class="kw">mut</span> vec1 <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb51-757"><a href="#cb51-757"></a>vec1<span class="op">.</span>push(<span class="dv">4</span>)<span class="op">;</span></span>
<span id="cb51-758"><a href="#cb51-758"></a><span class="kw">let</span> vec2 <span class="op">=</span> <span class="dt">Vec</span><span class="pp">::</span>from([<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span>])<span class="op">;</span></span>
<span id="cb51-759"><a href="#cb51-759"></a><span class="pp">assert_eq!</span>(vec1<span class="op">,</span> vec2)<span class="op">;</span></span>
<span id="cb51-760"><a href="#cb51-760"></a><span class="in">```</span></span>
<span id="cb51-761"><a href="#cb51-761"></a></span>
<span id="cb51-762"><a href="#cb51-762"></a><span class="fu">## Sketch</span></span>
<span id="cb51-763"><a href="#cb51-763"></a></span>
<span id="cb51-764"><a href="#cb51-764"></a><span class="ss">- </span>Let's convert <span class="in">`pairs`</span> to a helper function.</span>
<span id="cb51-765"><a href="#cb51-765"></a><span class="ss">- </span>Let's move the odd case handlying from main to a wrapper function.</span>
<span id="cb51-766"><a href="#cb51-766"></a><span class="ss">    - </span>And also popping the first two vals.</span>
<span id="cb51-767"><a href="#cb51-767"></a><span class="ss">- </span>Let's initialize a mutable vector in the wrapper.</span>
<span id="cb51-768"><a href="#cb51-768"></a><span class="ss">- </span>We'll maintain the return type of <span class="in">`pairs`</span> but add an argument.</span>
<span id="cb51-769"><a href="#cb51-769"></a><span class="ss">- </span>We'll return the vector from the wrapper.</span>
<span id="cb51-770"><a href="#cb51-770"></a></span>
<span id="cb51-771"><a href="#cb51-771"></a><span class="fu">## Wrapper</span></span>
<span id="cb51-772"><a href="#cb51-772"></a></span>
<span id="cb51-773"><a href="#cb51-773"></a>::::{.columns}</span>
<span id="cb51-774"><a href="#cb51-774"></a></span>
<span id="cb51-775"><a href="#cb51-775"></a>:::{.column width="70%"}</span>
<span id="cb51-776"><a href="#cb51-776"></a></span>
<span id="cb51-777"><a href="#cb51-777"></a><span class="in">```rs</span></span>
<span id="cb51-778"><a href="#cb51-778"></a><span class="kw">fn</span> chars_to_vec(<span class="kw">mut</span> cs<span class="op">:</span><span class="pp">std::</span><span class="dt">str</span><span class="pp">::</span>Chars) <span class="op">-&gt;</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">u8</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb51-779"><a href="#cb51-779"></a>    <span class="kw">let</span> <span class="kw">mut</span> vals <span class="op">=</span> <span class="dt">Vec</span><span class="pp">::</span>new()<span class="op">;</span></span>
<span id="cb51-780"><a href="#cb51-780"></a>    <span class="co">// from old main</span></span>
<span id="cb51-781"><a href="#cb51-781"></a>    cs<span class="op">.</span>next()<span class="op">;</span></span>
<span id="cb51-782"><a href="#cb51-782"></a>    cs<span class="op">.</span>next()<span class="op">;</span></span>
<span id="cb51-783"><a href="#cb51-783"></a>    <span class="cf">if</span> <span class="kw">let</span> <span class="cn">Some</span>(n) <span class="op">=</span> pairs(cs<span class="op">,</span> <span class="op">&amp;</span><span class="kw">mut</span> vals) <span class="op">{</span></span>
<span id="cb51-784"><a href="#cb51-784"></a>        vals<span class="op">.</span>push(two_hex(<span class="ch">'0'</span><span class="op">,</span> n))<span class="op">;</span></span>
<span id="cb51-785"><a href="#cb51-785"></a>    <span class="op">}</span></span>
<span id="cb51-786"><a href="#cb51-786"></a>    <span class="co">// "Prints and returns the value of a given</span></span>
<span id="cb51-787"><a href="#cb51-787"></a>    <span class="co">// expression for quick and dirty debugging."</span></span>
<span id="cb51-788"><a href="#cb51-788"></a>    <span class="pp">dbg!</span>(<span class="op">&amp;</span>vals)<span class="op">;</span></span>
<span id="cb51-789"><a href="#cb51-789"></a>    <span class="cf">return</span> vals<span class="op">;</span></span>
<span id="cb51-790"><a href="#cb51-790"></a><span class="op">}</span></span>
<span id="cb51-791"><a href="#cb51-791"></a><span class="in">```</span></span>
<span id="cb51-792"><a href="#cb51-792"></a></span>
<span id="cb51-793"><a href="#cb51-793"></a>:::</span>
<span id="cb51-794"><a href="#cb51-794"></a></span>
<span id="cb51-795"><a href="#cb51-795"></a>:::{.column width="30%"}</span>
<span id="cb51-796"><a href="#cb51-796"></a></span>
<span id="cb51-797"><a href="#cb51-797"></a><span class="ss">- </span>Create a vector.</span>
<span id="cb51-798"><a href="#cb51-798"></a><span class="ss">- </span>Let pairs "borrow" the vector mutably - so it can add stuff.</span>
<span id="cb51-799"><a href="#cb51-799"></a></span>
<span id="cb51-800"><a href="#cb51-800"></a>:::</span>
<span id="cb51-801"><a href="#cb51-801"></a></span>
<span id="cb51-802"><a href="#cb51-802"></a></span>
<span id="cb51-803"><a href="#cb51-803"></a>::::</span>
<span id="cb51-804"><a href="#cb51-804"></a></span>
<span id="cb51-805"><a href="#cb51-805"></a><span class="ss">- </span>Let <span class="in">`dbg!`</span> "borrow" the vector to print it.</span>
<span id="cb51-806"><a href="#cb51-806"></a><span class="ss">- </span>Return the vector when you're done!</span>
<span id="cb51-807"><a href="#cb51-807"></a></span>
<span id="cb51-808"><a href="#cb51-808"></a><span class="fu">## Vector handling</span></span>
<span id="cb51-809"><a href="#cb51-809"></a></span>
<span id="cb51-810"><a href="#cb51-810"></a><span class="in">```rs</span></span>
<span id="cb51-811"><a href="#cb51-811"></a><span class="kw">fn</span> pairs(<span class="kw">mut</span> cs<span class="op">:</span><span class="pp">std::</span><span class="dt">str</span><span class="pp">::</span>Chars<span class="op">,</span> vals<span class="op">:&amp;</span><span class="kw">mut</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">u8</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="dt">Option</span><span class="op">&lt;</span><span class="dt">char</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb51-812"><a href="#cb51-812"></a>    <span class="cf">return</span> <span class="cf">match</span> cs<span class="op">.</span>next() <span class="op">{</span></span>
<span id="cb51-813"><a href="#cb51-813"></a>        <span class="cn">Some</span>(<span class="ch">'</span><span class="sc">\n</span><span class="ch">'</span>) <span class="op">=&gt;</span> <span class="cn">None</span><span class="op">,</span></span>
<span id="cb51-814"><a href="#cb51-814"></a>        <span class="cn">Some</span>(n) <span class="op">=&gt;</span> <span class="cf">match</span> pairs(cs<span class="op">,</span> vals) <span class="op">{</span></span>
<span id="cb51-815"><a href="#cb51-815"></a>            <span class="cn">Some</span>(m) <span class="op">=&gt;</span> <span class="op">{</span></span>
<span id="cb51-816"><a href="#cb51-816"></a>                vals<span class="op">.</span>push(two_hex(n<span class="op">,</span>m))<span class="op">;</span>  <span class="co">// only change</span></span>
<span id="cb51-817"><a href="#cb51-817"></a>                <span class="cn">None</span></span>
<span id="cb51-818"><a href="#cb51-818"></a>            <span class="op">},</span></span>
<span id="cb51-819"><a href="#cb51-819"></a>            <span class="cn">None</span> <span class="op">=&gt;</span> <span class="cn">Some</span>(n)<span class="op">,</span></span>
<span id="cb51-820"><a href="#cb51-820"></a>        <span class="op">},</span></span>
<span id="cb51-821"><a href="#cb51-821"></a>        <span class="cn">None</span> <span class="op">=&gt;</span> <span class="cn">None</span><span class="op">,</span></span>
<span id="cb51-822"><a href="#cb51-822"></a>    <span class="op">}</span></span>
<span id="cb51-823"><a href="#cb51-823"></a><span class="op">}</span></span>
<span id="cb51-824"><a href="#cb51-824"></a><span class="in">```</span></span>
<span id="cb51-825"><a href="#cb51-825"></a></span>
<span id="cb51-826"><a href="#cb51-826"></a><span class="ss">- </span>Add a "borrowed mutable vector argument"</span>
<span id="cb51-827"><a href="#cb51-827"></a><span class="ss">- </span>Push some <span class="in">`u8`</span>s into it.</span>
<span id="cb51-828"><a href="#cb51-828"></a></span>
<span id="cb51-829"><a href="#cb51-829"></a></span>
<span id="cb51-830"><a href="#cb51-830"></a><span class="fu">## How do we feel about this?</span></span>
<span id="cb51-831"><a href="#cb51-831"></a></span>
<span id="cb51-832"><a href="#cb51-832"></a><span class="in">```sh</span></span>
<span id="cb51-833"><a href="#cb51-833"></a><span class="ex">$</span> cargo r</span>
<span id="cb51-834"><a href="#cb51-834"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb51-835"><a href="#cb51-835"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb51-836"><a href="#cb51-836"></a><span class="ex">0x01020304</span></span>
<span id="cb51-837"><a href="#cb51-837"></a><span class="ex">[src/main.rs:10:5]</span> <span class="kw">&amp;</span><span class="ex">vals</span> = [</span>
<span id="cb51-838"><a href="#cb51-838"></a>    <span class="ex">4,</span></span>
<span id="cb51-839"><a href="#cb51-839"></a>    <span class="ex">3,</span></span>
<span id="cb51-840"><a href="#cb51-840"></a>    <span class="ex">2,</span></span>
<span id="cb51-841"><a href="#cb51-841"></a>    <span class="ex">1,</span></span>
<span id="cb51-842"><a href="#cb51-842"></a><span class="ex">]</span></span>
<span id="cb51-843"><a href="#cb51-843"></a><span class="in">```</span></span>
<span id="cb51-844"><a href="#cb51-844"></a></span>
<span id="cb51-845"><a href="#cb51-845"></a><span class="fu">## Quoth Wikipedia</span></span>
<span id="cb51-846"><a href="#cb51-846"></a></span>
<span id="cb51-847"><a href="#cb51-847"></a><span class="at">&gt; </span><span class="co">[</span><span class="ot">In computing, endianness is the order in which bytes within a word data type are transmitted over a data communication medium or addressed in computer memory, counting only byte significance compared to earliness.</span><span class="co">](https://en.wikipedia.org/wiki/Endianness)</span></span>
<span id="cb51-848"><a href="#cb51-848"></a></span>
<span id="cb51-849"><a href="#cb51-849"></a><span class="ss">- </span>We can regard our vector as a 32 bit word of 4 bytes.</span>
<span id="cb51-850"><a href="#cb51-850"></a><span class="ss">- </span>We can regard the indices (<span class="in">`0..4`</span>) as the addresses in computer memory.</span>
<span id="cb51-851"><a href="#cb51-851"></a></span>
<span id="cb51-852"><a href="#cb51-852"></a><span class="fu">## Two endians</span></span>
<span id="cb51-853"><a href="#cb51-853"></a></span>
<span id="cb51-854"><a href="#cb51-854"></a><span class="at">&gt; A big-endian system stores the most significant byte (MSB) of a word at the smallest memory address and the least significant byte (LSB) at the largest.</span></span>
<span id="cb51-855"><a href="#cb51-855"></a></span>
<span id="cb51-856"><a href="#cb51-856"></a><span class="at">&gt; A little-endian system, in contrast, stores the least-significant byte (LSB) at the smallest address.</span></span>
<span id="cb51-857"><a href="#cb51-857"></a></span>
<span id="cb51-858"><a href="#cb51-858"></a><span class="ss">- </span>In <span class="in">`0x01020304`</span>, the MSB is <span class="in">`1`</span>, and LSB is <span class="in">`4`</span></span>
<span id="cb51-859"><a href="#cb51-859"></a><span class="ss">- </span><span class="in">`[4, 3, 2, 1]`</span>, the smallest memory address contains a <span class="in">`4`</span>.</span>
<span id="cb51-860"><a href="#cb51-860"></a></span>
<span id="cb51-861"><a href="#cb51-861"></a><span class="fu">## Arrays to Numbers</span></span>
<span id="cb51-862"><a href="#cb51-862"></a></span>
<span id="cb51-863"><a href="#cb51-863"></a><span class="ss">- </span>We can reverse the operation by:</span>
<span id="cb51-864"><a href="#cb51-864"></a><span class="ss">    - </span>Looping over the array.</span>
<span id="cb51-865"><a href="#cb51-865"></a><span class="ss">    - </span>Multiplying by the numerical base, some power of two</span>
<span id="cb51-866"><a href="#cb51-866"></a><span class="ss">    - </span>Adding up the different values.</span>
<span id="cb51-867"><a href="#cb51-867"></a><span class="in">```rs</span></span>
<span id="cb51-868"><a href="#cb51-868"></a>fn custom_u8s_to_u32(vals <span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">u8</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="dt">u32</span> <span class="op">{</span></span>
<span id="cb51-869"><a href="#cb51-869"></a>    <span class="co">// We'll just take the first four for now</span></span>
<span id="cb51-870"><a href="#cb51-870"></a>    <span class="kw">let</span> <span class="kw">mut</span> ret <span class="op">:</span> <span class="dt">u32</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb51-871"><a href="#cb51-871"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span><span class="dv">4</span> <span class="op">{</span></span>
<span id="cb51-872"><a href="#cb51-872"></a>        <span class="pp">dbg!</span>((i<span class="op">,</span> vals[i]))<span class="op">;</span></span>
<span id="cb51-873"><a href="#cb51-873"></a>        ret <span class="op">+=</span> (vals[i] <span class="kw">as</span> <span class="dt">u32</span>) <span class="op">*</span> ((<span class="dv">2</span> <span class="kw">as</span> <span class="dt">u32</span>)<span class="op">.</span>pow(<span class="dv">8</span> <span class="op">*</span> (i <span class="kw">as</span> <span class="dt">u32</span>)))<span class="op">;</span></span>
<span id="cb51-874"><a href="#cb51-874"></a>    <span class="op">}</span></span>
<span id="cb51-875"><a href="#cb51-875"></a>    <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb51-876"><a href="#cb51-876"></a><span class="op">}</span></span>
<span id="cb51-877"><a href="#cb51-877"></a><span class="in">```</span></span>
<span id="cb51-878"><a href="#cb51-878"></a></span>
<span id="cb51-879"><a href="#cb51-879"></a><span class="fu">## Try it out</span></span>
<span id="cb51-880"><a href="#cb51-880"></a></span>
<span id="cb51-881"><a href="#cb51-881"></a>::::{.columns}</span>
<span id="cb51-882"><a href="#cb51-882"></a></span>
<span id="cb51-883"><a href="#cb51-883"></a>:::{.column width="40%"}</span>
<span id="cb51-884"><a href="#cb51-884"></a></span>
<span id="cb51-885"><a href="#cb51-885"></a><span class="ss">- </span>Remember to update <span class="in">`main`</span></span>
<span id="cb51-886"><a href="#cb51-886"></a></span>
<span id="cb51-887"><a href="#cb51-887"></a><span class="in">```rs</span></span>
<span id="cb51-888"><a href="#cb51-888"></a><span class="kw">let</span> vals <span class="op">=</span> chars_to_vec(cs)<span class="op">;</span></span>
<span id="cb51-889"><a href="#cb51-889"></a><span class="kw">let</span> val <span class="op">=</span> custom_u8s_to_u32(vals)<span class="op">;</span></span>
<span id="cb51-890"><a href="#cb51-890"></a><span class="pp">println!</span>(<span class="st">"{:x}"</span><span class="op">,</span> val)<span class="op">;</span> <span class="co">// hex</span></span>
<span id="cb51-891"><a href="#cb51-891"></a><span class="in">```</span></span>
<span id="cb51-892"><a href="#cb51-892"></a></span>
<span id="cb51-893"><a href="#cb51-893"></a>:::</span>
<span id="cb51-894"><a href="#cb51-894"></a></span>
<span id="cb51-895"><a href="#cb51-895"></a>:::{.column width="60%"}</span>
<span id="cb51-896"><a href="#cb51-896"></a></span>
<span id="cb51-897"><a href="#cb51-897"></a><span class="in">```sh</span></span>
<span id="cb51-898"><a href="#cb51-898"></a><span class="ex">$</span> cargo r</span>
<span id="cb51-899"><a href="#cb51-899"></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb51-900"><a href="#cb51-900"></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb51-901"><a href="#cb51-901"></a><span class="ex">0x01020304</span></span>
<span id="cb51-902"><a href="#cb51-902"></a><span class="ex">[src/main.rs:10:5]</span> <span class="kw">&amp;</span><span class="ex">vals</span> = [</span>
<span id="cb51-903"><a href="#cb51-903"></a>    <span class="ex">4,</span></span>
<span id="cb51-904"><a href="#cb51-904"></a>    <span class="ex">3,</span></span>
<span id="cb51-905"><a href="#cb51-905"></a>    <span class="ex">2,</span></span>
<span id="cb51-906"><a href="#cb51-906"></a>    <span class="ex">1,</span></span>
<span id="cb51-907"><a href="#cb51-907"></a><span class="ex">]</span></span>
<span id="cb51-908"><a href="#cb51-908"></a><span class="ex">[src/main.rs:38:9]</span> <span class="er">(</span><span class="ex">i,</span> vals<span class="pp">[</span><span class="ss">i</span><span class="pp">]</span><span class="kw">)</span> <span class="ex">=</span> <span class="er">(</span></span>
<span id="cb51-909"><a href="#cb51-909"></a>    <span class="ex">0,</span></span>
<span id="cb51-910"><a href="#cb51-910"></a>    <span class="ex">4,</span></span>
<span id="cb51-911"><a href="#cb51-911"></a><span class="kw">)</span></span>
<span id="cb51-912"><a href="#cb51-912"></a><span class="ex">[src/main.rs:38:9]</span> <span class="er">(</span><span class="ex">i,</span> vals<span class="pp">[</span><span class="ss">i</span><span class="pp">]</span><span class="kw">)</span> <span class="ex">=</span> <span class="er">(</span></span>
<span id="cb51-913"><a href="#cb51-913"></a>    <span class="ex">1,</span></span>
<span id="cb51-914"><a href="#cb51-914"></a>    <span class="ex">3,</span></span>
<span id="cb51-915"><a href="#cb51-915"></a><span class="kw">)</span></span>
<span id="cb51-916"><a href="#cb51-916"></a><span class="ex">[src/main.rs:38:9]</span> <span class="er">(</span><span class="ex">i,</span> vals<span class="pp">[</span><span class="ss">i</span><span class="pp">]</span><span class="kw">)</span> <span class="ex">=</span> <span class="er">(</span></span>
<span id="cb51-917"><a href="#cb51-917"></a>    <span class="ex">2,</span></span>
<span id="cb51-918"><a href="#cb51-918"></a>    <span class="ex">2,</span></span>
<span id="cb51-919"><a href="#cb51-919"></a><span class="kw">)</span></span>
<span id="cb51-920"><a href="#cb51-920"></a><span class="ex">[src/main.rs:38:9]</span> <span class="er">(</span><span class="ex">i,</span> vals<span class="pp">[</span><span class="ss">i</span><span class="pp">]</span><span class="kw">)</span> <span class="ex">=</span> <span class="er">(</span></span>
<span id="cb51-921"><a href="#cb51-921"></a>    <span class="ex">3,</span></span>
<span id="cb51-922"><a href="#cb51-922"></a>    <span class="ex">1,</span></span>
<span id="cb51-923"><a href="#cb51-923"></a><span class="kw">)</span></span>
<span id="cb51-924"><a href="#cb51-924"></a><span class="ex">1020304</span></span>
<span id="cb51-925"><a href="#cb51-925"></a><span class="in">```</span></span>
<span id="cb51-926"><a href="#cb51-926"></a></span>
<span id="cb51-927"><a href="#cb51-927"></a>:::</span>
<span id="cb51-928"><a href="#cb51-928"></a></span>
<span id="cb51-929"><a href="#cb51-929"></a>::::</span>
<span id="cb51-930"><a href="#cb51-930"></a></span>
<span id="cb51-931"><a href="#cb51-931"></a><span class="fu">## Wait a minute</span></span>
<span id="cb51-932"><a href="#cb51-932"></a></span>
<span id="cb51-933"><a href="#cb51-933"></a><span class="ss">- </span>Isn't this terrible?</span>
<span id="cb51-934"><a href="#cb51-934"></a></span>
<span id="cb51-935"><a href="#cb51-935"></a><span class="in">```rs</span></span>
<span id="cb51-936"><a href="#cb51-936"></a>ret <span class="op">+=</span> (vals[i] <span class="kw">as</span> <span class="dt">u32</span>) <span class="op">*</span> ((<span class="dv">2</span> <span class="kw">as</span> <span class="dt">u32</span>)<span class="op">.</span>pow(<span class="dv">8</span> <span class="op">*</span> (i <span class="kw">as</span> <span class="dt">u32</span>)))<span class="op">;</span></span>
<span id="cb51-937"><a href="#cb51-937"></a><span class="in">```</span></span>
<span id="cb51-938"><a href="#cb51-938"></a></span>
<span id="cb51-939"><a href="#cb51-939"></a><span class="ss">- </span>There must be a better way.</span>
<span id="cb51-940"><a href="#cb51-940"></a></span>
<span id="cb51-941"><a href="#cb51-941"></a><span class="fu">## Shifts</span></span>
<span id="cb51-942"><a href="#cb51-942"></a></span>
<span id="cb51-943"><a href="#cb51-943"></a><span class="ss">- </span>The remaining bitwise operator is the *shift*</span>
<span id="cb51-944"><a href="#cb51-944"></a><span class="ss">    - </span>Bitwise because it works on bits, but</span>
<span id="cb51-945"><a href="#cb51-945"></a><span class="ss">    - </span>Takes two arguments:</span>
<span id="cb51-946"><a href="#cb51-946"></a><span class="ss">        - </span>The bits to "shift"</span>
<span id="cb51-947"><a href="#cb51-947"></a><span class="ss">        - </span>A numerical value encoding how much "shift"</span>
<span id="cb51-948"><a href="#cb51-948"></a>        </span>
<span id="cb51-949"><a href="#cb51-949"></a><span class="fu">## Script it</span></span>
<span id="cb51-950"><a href="#cb51-950"></a></span>
<span id="cb51-951"><a href="#cb51-951"></a><span class="ss">- </span>Python shift is <span class="in">`&lt;&lt;`</span> (well, left shift)</span>
<span id="cb51-952"><a href="#cb51-952"></a><span class="in">```sh</span></span>
<span id="cb51-953"><a href="#cb51-953"></a><span class="ex">python3</span> <span class="at">-c</span> <span class="st">"[print('{} {:03d} {:08b}'.format(x, 1 &lt;&lt; x, 1 &lt;&lt; x)) for x in range(8)]"</span></span>
<span id="cb51-954"><a href="#cb51-954"></a><span class="in">```</span></span>
<span id="cb51-955"><a href="#cb51-955"></a><span class="ss">- </span>I got:</span>
<span id="cb51-956"><a href="#cb51-956"></a><span class="in">```{.email code-line-numbers="false"}</span></span>
<span id="cb51-957"><a href="#cb51-957"></a><span class="in">0 001 00000001</span></span>
<span id="cb51-958"><a href="#cb51-958"></a><span class="in">1 002 00000010</span></span>
<span id="cb51-959"><a href="#cb51-959"></a><span class="in">2 004 00000100</span></span>
<span id="cb51-960"><a href="#cb51-960"></a><span class="in">3 008 00001000</span></span>
<span id="cb51-961"><a href="#cb51-961"></a><span class="in">4 016 00010000</span></span>
<span id="cb51-962"><a href="#cb51-962"></a><span class="in">5 032 00100000</span></span>
<span id="cb51-963"><a href="#cb51-963"></a><span class="in">6 064 01000000</span></span>
<span id="cb51-964"><a href="#cb51-964"></a><span class="in">7 128 10000000</span></span>
<span id="cb51-965"><a href="#cb51-965"></a><span class="in">```</span></span>
<span id="cb51-966"><a href="#cb51-966"></a></span>
<span id="cb51-967"><a href="#cb51-967"></a><span class="fu">## Shift it</span></span>
<span id="cb51-968"><a href="#cb51-968"></a></span>
<span id="cb51-969"><a href="#cb51-969"></a><span class="in">```rs</span></span>
<span id="cb51-970"><a href="#cb51-970"></a><span class="kw">fn</span> custom_u8s_to_u32(vals <span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">u8</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="dt">u32</span> <span class="op">{</span></span>
<span id="cb51-971"><a href="#cb51-971"></a>    <span class="co">// We'll just take the first four for now</span></span>
<span id="cb51-972"><a href="#cb51-972"></a>    <span class="kw">let</span> <span class="kw">mut</span> ret <span class="op">:</span> <span class="dt">u32</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb51-973"><a href="#cb51-973"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span><span class="dv">4</span> <span class="op">{</span></span>
<span id="cb51-974"><a href="#cb51-974"></a>        <span class="pp">dbg!</span>((i<span class="op">,</span> vals[i]))<span class="op">;</span></span>
<span id="cb51-975"><a href="#cb51-975"></a>        ret <span class="op">+=</span> (vals[i] <span class="kw">as</span> <span class="dt">u32</span>) <span class="op">&lt;&lt;</span> (<span class="dv">8</span> <span class="op">*</span> i)<span class="op">;</span></span>
<span id="cb51-976"><a href="#cb51-976"></a>    <span class="op">}</span></span>
<span id="cb51-977"><a href="#cb51-977"></a>    <span class="cf">return</span> ret<span class="op">;</span></span>
<span id="cb51-978"><a href="#cb51-978"></a><span class="op">}</span></span>
<span id="cb51-979"><a href="#cb51-979"></a><span class="in">```</span></span>
<span id="cb51-980"><a href="#cb51-980"></a></span>
<span id="cb51-981"><a href="#cb51-981"></a><span class="ss">- </span>Much better! </span>
<span id="cb51-982"><a href="#cb51-982"></a><span class="ss">- </span>Saves an <span class="in">`as u32`</span>!</span>
<span id="cb51-983"><a href="#cb51-983"></a></span>
<span id="cb51-984"><a href="#cb51-984"></a><span class="fu">## Today</span></span>
<span id="cb51-985"><a href="#cb51-985"></a></span>
<span id="cb51-986"><a href="#cb51-986"></a><span class="ss">- </span>Encoding</span>
<span id="cb51-987"><a href="#cb51-987"></a><span class="ss">    -   </span>Bytes</span>
<span id="cb51-988"><a href="#cb51-988"></a><span class="ss">    -   </span>Bitwise operators</span>
<span id="cb51-989"><a href="#cb51-989"></a><span class="ss">    -   </span>Endianness</span>
<span id="cb51-990"><a href="#cb51-990"></a></span>
<span id="cb51-991"><a href="#cb51-991"></a><span class="co">&lt;!-- start at carries in encode then jump to finite --&gt;</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>