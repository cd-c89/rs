<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-d166b450ba5a8e9f7a0ab969bf6592c1.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.39">

  <title>Systems in Rust – Dynamism</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; background-color: #2a0f15; font-weight: bold; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto-5b48f34d633aed70c74c672477009ffc.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Dynamism</h1>
  <p class="subtitle">Systems in Rust</p>

<div class="quarto-title-authors">
</div>

</section>
<section id="announcements" class="slide level2">
<h2>Announcements</h2>
<ul>
<li><strong>Huge News</strong> Guest Speaker Wednesday.</li>
<li>Jimmy Ostler, person who actually likes Rust and gotten paid to write it</li>
<li>Regard attendance as mandatory. I will ask.</li>
</ul>
</section>
<section id="today" class="slide level2">
<h2>Today</h2>
<ul>
<li>Dynamic Programming</li>
<li>Memoization
<ul>
<li>Cacheing</li>
</ul></li>
<li>More on Graphs</li>
</ul>
</section>
<section>
<section id="background" class="title-slide slide level1 center">
<h1>Background</h1>

</section>
<section id="motivating-problem" class="slide level2">
<h2>Motivating Problem</h2>
<ul>
<li>We are in a <em>systems</em> programming class.</li>
<li>Vs. <em>software</em>, computer <em>systems</em> expand the functionality of computing hardware, rather directly solving an end user problem.
<ul>
<li>A word processor or spreadsheet is software.</li>
<li>It saves spreadsheets to a file <em>system</em>
<ul>
<li>Or perhaps, now, to a cloud service</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="editorial" class="slide level2">
<h2>Editorial</h2>
<ul>
<li>A comprehensive undergraduate computer science program covers:
<ul>
<li>Operating system (CS-371 Sp26)
<ul>
<li>To understand Linux</li>
</ul></li>
<li>Web-server or other network service (former CS-271 Sp24)
<ul>
<li>To understand NGINX</li>
</ul></li>
<li>Compiler (slated CS-371 Sp27)
<ul>
<li>To understand <code>gcc</code></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="baby-steps" class="slide level2">
<h2>“Baby” Steps</h2>
<ul>
<li>Python linked list to OS is a big step.</li>
<li>Instead we do “niche” systems:
<ul>
<li>Blockchain (CS-276 Sp25)
<ul>
<li>To understand Bitcoin</li>
</ul></li>
<li>Source Code Management or “SCM” (CS-271 Sp26)
<ul>
<li>Also called VCS (version control system)</li>
<li>To understand <code>git</code></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="git" class="slide level2">
<h2><code>git</code></h2>
<blockquote>
<p><a href="https://www.youtube.com/watch?v=0wLidyXzFk8">Linus Torvalds: Known more for Git than Linux?</a></p>
</blockquote>
<iframe width="560" height="315" src="https://www.youtube.com/embed/0wLidyXzFk8?si=QXPd7ycbApz0gPCx" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="">
</iframe>
</section>
<section id="git-1" class="slide level2">
<h2><code>git</code></h2>
<blockquote>
<p><a href="https://www.reddit.com/r/compsci/comments/1cvrxwt/comment/l5a77sj/?utm_source=share&amp;utm_medium=web3x&amp;utm_name=web3xcss&amp;utm_term=1&amp;utm_content=share_button">Just look at the very first git commit of git itself. It is small, so it is possible to understand it in full. Yet, it is capable enough to be used as a version control for git itself.</a></p>
</blockquote>
<ul>
<li>There are easier things to find, but not by much, it is here:
<ul>
<li><a href="https://github.com/git/git/tree/e83c5163316f89bfbde7d9ab23ca2e25604af290">https://github.com/git/git/tree/e83c5163316f89bfbde7d9ab23ca2e25604af290</a></li>
</ul></li>
</ul>
</section>
<section id="git-2" class="slide level2">
<h2><code>git</code></h2>
<ul>
<li>As far as I can tell, to make a minimal SCM we need pretty much two more things (since we have SHA and Ed25519)
<ul>
<li>A Merkle tree or hash tree
<ul>
<li>Was scheduled for this week, delayed by this lecture</li>
</ul></li>
<li>A solution to the “longest common subsequence” (LCS) problem, which was dramatically harder in Rust than I thought.</li>
</ul></li>
</ul>
</section>
<section id="quoth-wikipedia" class="slide level2">
<h2>Quoth Wikipedia</h2>
<blockquote>
<p><a href="https://en.wikipedia.org/wiki/Longest_common_subsequence">Because [LCS] is polynomial and has an efficient algorithm to solve it, it is employed to compare data and merge changes to files in programs such as the diff utility and revision control systems such as Git.</a></p>
</blockquote>
<blockquote>
<p>For the general case of an arbitrary number of input sequences, the problem is NP-hard. When the number of sequences is constant, the problem is solvable in polynomial time by dynamic programming.</p>
</blockquote>
</section></section>
<section>
<section id="dynamic-programming" class="title-slide slide level1 center">
<h1>Dynamic Programming</h1>

</section>
<section id="definition" class="slide level2">
<h2>Definition</h2>
<ul>
<li>Wikipedia</li>
</ul>
<blockquote>
<p>simplifying a complicated problem by breaking it down into simpler sub-problems in a recursive manner.</p>
</blockquote>
</section>
<section id="defintion" class="slide level2">
<h2>Defintion</h2>
<ul>
<li><em>Dynamic Programming</em> (1957) by Richard Bellman</li>
</ul>
<blockquote>
<p>The purpose of this work is to provide an introduction to the mathe- matical theory of multi-stage decision processes. Since these constitute a somewhat formidable set of terms we have coined the term ‘dynamic programming’ to describe the subject matter.</p>
</blockquote>
</section>
<section id="textbook" class="slide level2">
<h2>Textbook</h2>
<ul>
<li>I am in love with this book, available free online.</li>
<li>More for applied math people than for us (it uses floating point numbers - ew!)</li>
<li><a href="https://dp.quantecon.org/">Dynamic Programming</a> by Sargent and Stachurski</li>
<li>I wanted to teach this next semester (vs.&nbsp;Understanding AI) but it has 1 billion pre-reqs lol.</li>
</ul>
</section>
<section id="minimal-example" class="slide level2">
<h2>Minimal example</h2>
<ul>
<li>What is a:
<ul>
<li>Complicated problem</li>
<li>That can be broken down into simpler sub-problems</li>
<li>In a recursive manner?</li>
</ul></li>
<li>Canonical example: Fibonacci</li>
</ul>
</section>
<section id="a-note" class="slide level2">
<h2>A Note</h2>
<ul>
<li>Vs. ENG, ECON, the <em>de facto</em> CS definition is more restrictive.</li>
</ul>
<blockquote>
<p>If a problem can be solved by combining optimal solutions to non-overlapping sub-problems, the strategy is called “divide and conquer” instead. This is why merge sort and quick sort are not classified as dynamic programming problems.</p>
</blockquote>
<ul>
<li>This basically per <a href="https://mitpress.mit.edu/9780262046305/introduction-to-algorithms/">CLRS</a>, the only CS text that matters (according to me)</li>
</ul>
</section>
<section id="non-overlapping" class="slide level2">
<h2>Non-overlapping</h2>
<center>
<a title="VineetKumar at English Wikipedia, Public domain, via Wikimedia Commons" href="https://commons.wikimedia.org/wiki/File:Merge_sort_algorithm_diagram.svg"><img style="filter:invert(.9);" width="50%" alt="A recursive merge sort algorithm used to sort an array of 7 integer values. These are the steps a human would take to emulate merge sort (top-down)." src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Merge_sort_algorithm_diagram.svg/512px-Merge_sort_algorithm_diagram.svg.png?20180709142035"></a>
</center>
</section>
<section id="overlapping" class="slide level2">
<h2>Overlapping</h2>
<center>
<a title="en:User:Dcoatzee, traced by User:Stannered, Public domain, via Wikimedia Commons" href="https://commons.wikimedia.org/wiki/File:Fibonacci_dynamic_programming.svg"><img style="filter:invert(.9);" height="512px" alt="Fibonacci dynamic programming" src="https://upload.wikimedia.org/wikipedia/commons/0/06/Fibonacci_dynamic_programming.svg"></a>
</center>
</section>
<section id="review" class="slide level2">
<h2>Review</h2>
<ul>
<li>If Tree (e.g.&nbsp;can’t be a DAG)
<ul>
<li>“divide and conquer”</li>
</ul></li>
<li>Else
<ul>
<li>“dynamic programming”</li>
</ul></li>
</ul>
</section>
<section id="aside" class="slide level2">
<h2>Aside</h2>
<ul>
<li>Dynamic programming in the hardest and most important post-2020 problem</li>
<li><a href="https://www.nature.com/articles/s41586-023-06127-z">Algorithm for optimized mRNA design improves stability and immunogenicity (Nature)</a>
<ul>
<li>“Next, we describe how to implement the <strong>dynamic programming</strong> algorithm behind lattice parsing…”</li>
</ul></li>
<li>Editorial: Post-2020, biotechnology is sole US industry strictly more advanced than all non-US competitors.</li>
</ul>
</section></section>
<section>
<section id="toy-example" class="title-slide slide level1 center">
<h1>Toy Example</h1>

</section>
<section id="fibonacci" class="slide level2">
<h2>Fibonacci</h2>
<ul>
<li>In <span class="math inline">\(\LaTeX\)</span></li>
</ul>
<p><span class="math display">\[
F_0 = 0
F_1 = 1
F_n = F_{n-1} + F_{n-2}
\]</span></p>
</section>
<section id="fibonacci-1" class="slide level2">
<h2>Fibonacci</h2>
<ul>
<li>In Rust</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb1-1"><a></a><span class="kw">fn</span> fib(n<span class="op">:</span><span class="dt">u64</span>) <span class="op">-&gt;</span> <span class="dt">u64</span> <span class="op">{</span></span>
<span id="cb1-2"><a></a>    <span class="cf">return</span> <span class="cf">match</span> n <span class="op">{</span></span>
<span id="cb1-3"><a></a>        <span class="dv">0</span> <span class="op">=&gt;</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb1-4"><a></a>        <span class="dv">1</span> <span class="op">=&gt;</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb1-5"><a></a>        n <span class="op">=&gt;</span> fib(n<span class="op">-</span><span class="dv">1</span>) <span class="op">+</span> fib(n<span class="op">-</span><span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb1-6"><a></a>    <span class="op">}</span></span>
<span id="cb1-7"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="but-wait" class="slide level2">
<h2>But wait!</h2>
<ul>
<li>What is the time complexity of <code>fib</code> <span class="math display">\[
\mathcal{O}(n) = \mathcal{O}(n-1) + \mathcal{O}(n-2)
\]</span></li>
<li>Wait… isn’t that… really bad?
<ul>
<li>(Yes, it’s <span class="math inline">\(\mathcal{O}(2^n)\)</span>, basically nightmare fuel)</li>
<li>(The Fibonacci sequence computes its own <em>naive</em> complexity)</li>
</ul></li>
</ul>
</section>
<section id="memoize" class="slide level2">
<h2>Memoize</h2>
<blockquote>
<p><a href="https://en.wikipedia.org/wiki/Memoization">In computing, memoization or memoisation is an optimization technique used primarily to speed up computer programs. It works by storing the results of expensive calls to pure functions, so that these results can be returned quickly should the same inputs occur again. It is a type of caching, normally implemented using a hash table, and a typical example of a space–time tradeoff, where the runtime of a program is reduced by increasing its memory usage.</a></p>
</blockquote>
</section>
<section id="do-we-memoize" class="slide level2">
<h2>Do we memoize?</h2>
<ul>
<li>Apparently there’s a competing formulation called tabulation.</li>
<li>I only learned memoization (by name) and will be teaching that.</li>
<li>I’d used tabulation without knowing it until I read the definition (for prime generation)</li>
<li>I don’t know if this is authoritative, but <a href="https://www.geeksforgeeks.org/dsa/tabulation-vs-memoization/">more</a>…</li>
<li>The homework will not require a specific implementation.</li>
</ul>
</section>
<section id="ingredients" class="slide level2">
<h2>Ingredients</h2>
<ul>
<li>A problem with overlapping recursive subproblems.</li>
<li>An array (er, <code>Vec</code>, and definitely not a HashMap
<ul>
<li>HashMaps are for cowards, such as myself last week doing graph theory.</li>
</ul></li>
</ul>
</section>
<section id="some-considerations" class="slide level2">
<h2>Some considerations…</h2>
<ul>
<li>We need to index into an <s>array</s> <code>Vec</code> so we’ll use <code>usize</code>
<ul>
<li>Review: why are indices <code>usize</code>?</li>
</ul></li>
<li>To match the type of <code>fib</code> we’ll use a helper functions, which we wrap.</li>
<li>It’s Rust, so to avoid thinking about ownership (hard, tedious, complicated)…</li>
<li>Simply pass everything as arguments and return them back.</li>
</ul>
</section>
<section id="step-0" class="slide level2">
<h2>Step 0</h2>
<ul>
<li>Start here.</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb2-1"><a></a><span class="kw">fn</span> fib_fast(n<span class="op">:</span><span class="dt">u64</span>) <span class="op">-&gt;</span> <span class="dt">u64</span> <span class="op">{</span></span>
<span id="cb2-2"><a></a>    <span class="co">// What goes here?</span></span>
<span id="cb2-3"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="step-1" class="slide level2">
<h2>Step 1</h2>
<ul>
<li>Make a <code>Vec</code> and cast <code>n</code> to <code>usize</code></li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb3-1"><a></a><span class="kw">fn</span> fib_fast(n<span class="op">:</span><span class="dt">u64</span>) <span class="op">-&gt;</span> <span class="dt">u64</span> <span class="op">{</span></span>
<span id="cb3-2"><a></a>    <span class="kw">let</span> mem <span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span> <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb3-3"><a></a>    n <span class="kw">as</span> <span class="dt">usize</span><span class="op">;</span></span>
<span id="cb3-4"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="step-2" class="slide level2">
<h2>Step 2</h2>
<ul>
<li>Helper function</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb4-1"><a></a><span class="kw">fn</span> fib_fast(n<span class="op">:</span><span class="dt">u64</span>) <span class="op">-&gt;</span> <span class="dt">u64</span> <span class="op">{</span></span>
<span id="cb4-2"><a></a>    <span class="kw">let</span> mem <span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span> <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb4-3"><a></a>    <span class="kw">fn</span> inner(x<span class="op">:</span><span class="dt">usize</span>) <span class="op">-&gt;</span> <span class="dt">usize</span>) <span class="op">{</span></span>
<span id="cb4-4"><a></a>        <span class="co">// What goes here?</span></span>
<span id="cb4-5"><a></a>    <span class="op">}</span></span>
<span id="cb4-6"><a></a>    <span class="cf">return</span> inner(n <span class="kw">as</span> <span class="dt">usize</span>) <span class="kw">as</span> <span class="dt">u64</span><span class="op">;</span></span>
<span id="cb4-7"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="step-3" class="slide level2">
<h2>Step 3</h2>
<ul>
<li>Pass everything, which is the memoizing <s>array</s> <code>Vec</code></li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb5-1"><a></a><span class="kw">fn</span> fib_fast(n<span class="op">:</span><span class="dt">u64</span>) <span class="op">-&gt;</span> <span class="dt">u64</span> <span class="op">{</span></span>
<span id="cb5-2"><a></a>    <span class="kw">let</span> mem <span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span> <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb5-3"><a></a>    <span class="kw">fn</span> inner(x<span class="op">:</span><span class="dt">usize</span><span class="op">,</span> <span class="kw">mut</span> m<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> (<span class="dt">usize</span><span class="op">,</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span>) <span class="op">{</span></span>
<span id="cb5-4"><a></a>        <span class="co">// What goes here?</span></span>
<span id="cb5-5"><a></a>    <span class="op">}</span></span>
<span id="cb5-6"><a></a>    <span class="cf">return</span> inner(n <span class="kw">as</span> <span class="dt">usize</span><span class="op">,</span> mem)<span class="op">.</span><span class="dv">0</span> <span class="kw">as</span> <span class="dt">u64</span><span class="op">;</span></span>
<span id="cb5-7"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="step-4" class="slide level2">
<h2>Step 4</h2>
<ul>
<li>Dynamically check if the <code>Vec</code> contains the solution.</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb6-1"><a></a><span class="kw">fn</span> fib_fast(n<span class="op">:</span><span class="dt">u64</span>) <span class="op">-&gt;</span> <span class="dt">u64</span> <span class="op">{</span></span>
<span id="cb6-2"><a></a>    <span class="kw">let</span> mem <span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span> <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb6-3"><a></a>    <span class="kw">fn</span> inner(x<span class="op">:</span><span class="dt">usize</span><span class="op">,</span> <span class="kw">mut</span> m<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> (<span class="dt">usize</span><span class="op">,</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span>) <span class="op">{</span></span>
<span id="cb6-4"><a></a>        <span class="kw">let</span> ret<span class="op">:</span> <span class="dt">usize</span><span class="op">;</span></span>
<span id="cb6-5"><a></a>        <span class="cf">if</span> x <span class="op">&gt;=</span> m<span class="op">.</span>len() <span class="op">{</span></span>
<span id="cb6-6"><a></a>            <span class="co">// save this for latter!</span></span>
<span id="cb6-7"><a></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb6-8"><a></a>            ret <span class="op">=</span> m[x]<span class="op">;</span></span>
<span id="cb6-9"><a></a>        <span class="op">}</span></span>
<span id="cb6-10"><a></a>        <span class="cf">return</span> (ret<span class="op">,</span> m)</span>
<span id="cb6-11"><a></a>    <span class="op">}</span></span>
<span id="cb6-12"><a></a>    <span class="cf">return</span> inner(n <span class="kw">as</span> <span class="dt">usize</span><span class="op">,</span> mem)<span class="op">.</span><span class="dv">0</span> <span class="kw">as</span> <span class="dt">u64</span><span class="op">;</span></span>
<span id="cb6-13"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="step-5" class="slide level2">
<h2>Step 5</h2>
<ul>
<li>If not, recurse.</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb7-1"><a></a><span class="kw">fn</span> fib_fast(n<span class="op">:</span><span class="dt">u64</span>) <span class="op">-&gt;</span> <span class="dt">u64</span> <span class="op">{</span></span>
<span id="cb7-2"><a></a>    <span class="kw">let</span> mem <span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span> <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb7-3"><a></a>    <span class="kw">fn</span> inner(x<span class="op">:</span><span class="dt">usize</span><span class="op">,</span> <span class="kw">mut</span> m<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> (<span class="dt">usize</span><span class="op">,</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span>) <span class="op">{</span></span>
<span id="cb7-4"><a></a>        <span class="kw">let</span> ret<span class="op">:</span> <span class="dt">usize</span><span class="op">;</span></span>
<span id="cb7-5"><a></a>        <span class="cf">if</span> x <span class="op">&gt;=</span> m<span class="op">.</span>len() <span class="op">{</span></span>
<span id="cb7-6"><a></a>            (_<span class="op">,</span> m) <span class="op">=</span> inner(x<span class="op">-</span><span class="dv">1</span><span class="op">,</span> m)<span class="op">;</span></span>
<span id="cb7-7"><a></a>            ret <span class="op">=</span> m[x<span class="op">-</span><span class="dv">1</span>]<span class="op">+</span>m[x<span class="op">-</span><span class="dv">2</span>]<span class="op">;</span></span>
<span id="cb7-8"><a></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb7-9"><a></a>            ret <span class="op">=</span> m[x]<span class="op">;</span></span>
<span id="cb7-10"><a></a>        <span class="op">}</span></span>
<span id="cb7-11"><a></a>        <span class="cf">return</span> (ret<span class="op">,</span> m)</span>
<span id="cb7-12"><a></a>    <span class="op">}</span></span>
<span id="cb7-13"><a></a>    <span class="cf">return</span> inner(n <span class="kw">as</span> <span class="dt">usize</span><span class="op">,</span> mem)<span class="op">.</span><span class="dv">0</span> <span class="kw">as</span> <span class="dt">u64</span><span class="op">;</span></span>
<span id="cb7-14"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="step-6" class="slide level2">
<h2>Step 6</h2>
<ul>
<li>Don’t forget to memoize the result!</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb8-1"><a></a><span class="kw">fn</span> fib_fast(n<span class="op">:</span><span class="dt">u64</span>) <span class="op">-&gt;</span> <span class="dt">u64</span> <span class="op">{</span></span>
<span id="cb8-2"><a></a>    <span class="kw">let</span> mem <span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span> <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb8-3"><a></a>    <span class="kw">fn</span> inner(x<span class="op">:</span><span class="dt">usize</span><span class="op">,</span> <span class="kw">mut</span> m<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> (<span class="dt">usize</span><span class="op">,</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span>) <span class="op">{</span></span>
<span id="cb8-4"><a></a>        <span class="kw">let</span> ret<span class="op">:</span> <span class="dt">usize</span><span class="op">;</span></span>
<span id="cb8-5"><a></a>        <span class="cf">if</span> x <span class="op">&gt;=</span> m<span class="op">.</span>len() <span class="op">{</span></span>
<span id="cb8-6"><a></a>            (_<span class="op">,</span> m) <span class="op">=</span> inner(x<span class="op">-</span><span class="dv">1</span><span class="op">,</span> m)<span class="op">;</span></span>
<span id="cb8-7"><a></a>            ret <span class="op">=</span> m[x<span class="op">-</span><span class="dv">1</span>]<span class="op">+</span>m[x<span class="op">-</span><span class="dv">2</span>]<span class="op">;</span></span>
<span id="cb8-8"><a></a>            m<span class="op">.</span>push(ret)<span class="op">;</span></span>
<span id="cb8-9"><a></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb8-10"><a></a>            ret <span class="op">=</span> m[x]<span class="op">;</span></span>
<span id="cb8-11"><a></a>        <span class="op">}</span></span>
<span id="cb8-12"><a></a>        <span class="cf">return</span> (ret<span class="op">,</span> m)</span>
<span id="cb8-13"><a></a>    <span class="op">}</span></span>
<span id="cb8-14"><a></a>    <span class="cf">return</span> inner(n <span class="kw">as</span> <span class="dt">usize</span><span class="op">,</span> mem)<span class="op">.</span><span class="dv">0</span> <span class="kw">as</span> <span class="dt">u64</span><span class="op">;</span></span>
<span id="cb8-15"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="side-by-side" class="slide level2">
<h2>Side-by-side</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb9-1"><a></a><span class="kw">fn</span> fib(n<span class="op">:</span> <span class="dt">u64</span>) <span class="op">-&gt;</span> <span class="dt">u64</span> <span class="op">{</span></span>
<span id="cb9-2"><a></a>    <span class="cf">return</span> <span class="cf">match</span> n <span class="op">{</span></span>
<span id="cb9-3"><a></a>        <span class="dv">0</span> <span class="op">=&gt;</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb9-4"><a></a>        <span class="dv">1</span> <span class="op">=&gt;</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb9-5"><a></a>        n <span class="op">=&gt;</span> fib(n <span class="op">-</span> <span class="dv">1</span>) <span class="op">+</span> fib(n <span class="op">-</span> <span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb9-6"><a></a>    <span class="op">};</span></span>
<span id="cb9-7"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:50%;">
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb10-1"><a></a><span class="kw">fn</span> fib_fast(n<span class="op">:</span><span class="dt">u64</span>) <span class="op">-&gt;</span> <span class="dt">u64</span> <span class="op">{</span></span>
<span id="cb10-2"><a></a>    <span class="kw">let</span> mem <span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span> <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">0</span><span class="op">,</span><span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb10-3"><a></a>    <span class="kw">fn</span> inner(x<span class="op">:</span><span class="dt">usize</span><span class="op">,</span> <span class="kw">mut</span> m<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> (<span class="dt">usize</span><span class="op">,</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span>) <span class="op">{</span></span>
<span id="cb10-4"><a></a>        <span class="kw">let</span> ret<span class="op">:</span> <span class="dt">usize</span><span class="op">;</span></span>
<span id="cb10-5"><a></a>        <span class="cf">if</span> x <span class="op">&gt;=</span> m<span class="op">.</span>len() <span class="op">{</span></span>
<span id="cb10-6"><a></a>            (_<span class="op">,</span> m) <span class="op">=</span> inner(x<span class="op">-</span><span class="dv">1</span><span class="op">,</span> m)<span class="op">;</span></span>
<span id="cb10-7"><a></a>            ret <span class="op">=</span> m[x<span class="op">-</span><span class="dv">1</span>]<span class="op">+</span>m[x<span class="op">-</span><span class="dv">2</span>]<span class="op">;</span></span>
<span id="cb10-8"><a></a>            m<span class="op">.</span>push(ret)<span class="op">;</span></span>
<span id="cb10-9"><a></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb10-10"><a></a>            ret <span class="op">=</span> m[x]<span class="op">;</span></span>
<span id="cb10-11"><a></a>        <span class="op">}</span></span>
<span id="cb10-12"><a></a>        <span class="cf">return</span> (ret<span class="op">,</span> m)</span>
<span id="cb10-13"><a></a>    <span class="op">}</span></span>
<span id="cb10-14"><a></a>    <span class="cf">return</span> inner(n <span class="kw">as</span> <span class="dt">usize</span><span class="op">,</span> mem)<span class="op">.</span><span class="dv">0</span> <span class="kw">as</span> <span class="dt">u64</span><span class="op">;</span></span>
<span id="cb10-15"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
</section>
<section id="test-it" class="slide level2">
<h2>Test it</h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb11-1"><a></a><span class="kw">fn</span> main() <span class="op">{</span></span>
<span id="cb11-2"><a></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span><span class="dv">11</span> <span class="op">{</span></span>
<span id="cb11-3"><a></a>        <span class="pp">println!</span>(<span class="st">"fib({}) = {}, fib_fast({}) = {}"</span><span class="op">,</span> i<span class="op">,</span> fib(i)<span class="op">,</span> i<span class="op">,</span> fib_fast(i))<span class="op">;</span></span>
<span id="cb11-4"><a></a>    <span class="op">}</span></span>
<span id="cb11-5"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>If you want to copy paste, here’s the whole thing which doesn’t gracefully fit on a slide…</li>
</ul>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>src/main.rs</strong></pre>
</div>
<div class="sourceCode" id="cb12" data-filename="src/main.rs"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb12-1"><a></a>fn fib(n<span class="op">:</span> <span class="dt">u64</span>) <span class="op">-&gt;</span> <span class="dt">u64</span> <span class="op">{</span></span>
<span id="cb12-2"><a></a>    <span class="cf">return</span> <span class="cf">match</span> n <span class="op">{</span></span>
<span id="cb12-3"><a></a>        <span class="dv">0</span> <span class="op">=&gt;</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb12-4"><a></a>        <span class="dv">1</span> <span class="op">=&gt;</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb12-5"><a></a>        n <span class="op">=&gt;</span> fib(n <span class="op">-</span> <span class="dv">1</span>) <span class="op">+</span> fib(n <span class="op">-</span> <span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb12-6"><a></a>    <span class="op">};</span></span>
<span id="cb12-7"><a></a><span class="op">}</span></span>
<span id="cb12-8"><a></a></span>
<span id="cb12-9"><a></a><span class="co">// We "cheat" using `usize` to avoid casting.</span></span>
<span id="cb12-10"><a></a><span class="kw">fn</span> fib_fast(n<span class="op">:</span> <span class="dt">u64</span>) <span class="op">-&gt;</span> <span class="dt">u64</span> <span class="op">{</span></span>
<span id="cb12-11"><a></a>    <span class="kw">let</span> mem<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span> <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb12-12"><a></a>    <span class="kw">fn</span> inner(x<span class="op">:</span> <span class="dt">usize</span><span class="op">,</span> <span class="kw">mut</span> m<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> (<span class="dt">usize</span><span class="op">,</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span>) <span class="op">{</span></span>
<span id="cb12-13"><a></a>        <span class="kw">let</span> ret<span class="op">:</span> <span class="dt">usize</span><span class="op">;</span></span>
<span id="cb12-14"><a></a>        <span class="cf">if</span> x <span class="op">&gt;=</span> m<span class="op">.</span>len() <span class="op">{</span></span>
<span id="cb12-15"><a></a>            (_<span class="op">,</span> m) <span class="op">=</span> inner(x <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> m)<span class="op">;</span></span>
<span id="cb12-16"><a></a>            ret <span class="op">=</span> m[x <span class="op">-</span> <span class="dv">1</span>] <span class="op">+</span> m[x <span class="op">-</span> <span class="dv">2</span>]<span class="op">;</span></span>
<span id="cb12-17"><a></a>            m<span class="op">.</span>push(ret)<span class="op">;</span></span>
<span id="cb12-18"><a></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb12-19"><a></a>            ret <span class="op">=</span> m[x]<span class="op">;</span></span>
<span id="cb12-20"><a></a>        <span class="op">}</span></span>
<span id="cb12-21"><a></a>        <span class="cf">return</span> (ret<span class="op">,</span> m)<span class="op">;</span></span>
<span id="cb12-22"><a></a>    <span class="op">}</span></span>
<span id="cb12-23"><a></a>    <span class="cf">return</span> inner(n <span class="kw">as</span> <span class="dt">usize</span><span class="op">,</span> mem)<span class="op">.</span><span class="dv">0</span> <span class="kw">as</span> <span class="dt">u64</span><span class="op">;</span></span>
<span id="cb12-24"><a></a><span class="op">}</span></span>
<span id="cb12-25"><a></a></span>
<span id="cb12-26"><a></a><span class="kw">fn</span> main() <span class="op">{</span></span>
<span id="cb12-27"><a></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span><span class="dv">11</span> <span class="op">{</span></span>
<span id="cb12-28"><a></a>        <span class="pp">println!</span>(<span class="st">"fib({}) = {}, fib_fast({}) = {}"</span><span class="op">,</span> i<span class="op">,</span> fib(i)<span class="op">,</span> i<span class="op">,</span> fib_fast(i))<span class="op">;</span></span>
<span id="cb12-29"><a></a>    <span class="op">}</span></span>
<span id="cb12-30"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="output" class="slide level2">
<h2>Output</h2>
<ul>
<li>Is this… good?</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a></a><span class="ex">$</span> cargo run</span>
<span id="cb13-2"><a></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb13-3"><a></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span><span class="kw">`</span></span>
<span id="cb13-4"><a></a><span class="ex">fib</span><span class="er">(</span><span class="ex">0</span><span class="kw">)</span> <span class="ex">=</span> 0, fib_fast<span class="er">(</span><span class="ex">0</span><span class="kw">)</span> <span class="ex">=</span> 0</span>
<span id="cb13-5"><a></a><span class="ex">fib</span><span class="er">(</span><span class="ex">1</span><span class="kw">)</span> <span class="ex">=</span> 1, fib_fast<span class="er">(</span><span class="ex">1</span><span class="kw">)</span> <span class="ex">=</span> 1</span>
<span id="cb13-6"><a></a><span class="ex">fib</span><span class="er">(</span><span class="ex">2</span><span class="kw">)</span> <span class="ex">=</span> 1, fib_fast<span class="er">(</span><span class="ex">2</span><span class="kw">)</span> <span class="ex">=</span> 1</span>
<span id="cb13-7"><a></a><span class="ex">fib</span><span class="er">(</span><span class="ex">3</span><span class="kw">)</span> <span class="ex">=</span> 2, fib_fast<span class="er">(</span><span class="ex">3</span><span class="kw">)</span> <span class="ex">=</span> 2</span>
<span id="cb13-8"><a></a><span class="ex">fib</span><span class="er">(</span><span class="ex">4</span><span class="kw">)</span> <span class="ex">=</span> 3, fib_fast<span class="er">(</span><span class="ex">4</span><span class="kw">)</span> <span class="ex">=</span> 3</span>
<span id="cb13-9"><a></a><span class="ex">fib</span><span class="er">(</span><span class="ex">5</span><span class="kw">)</span> <span class="ex">=</span> 5, fib_fast<span class="er">(</span><span class="ex">5</span><span class="kw">)</span> <span class="ex">=</span> 5</span>
<span id="cb13-10"><a></a><span class="ex">fib</span><span class="er">(</span><span class="ex">6</span><span class="kw">)</span> <span class="ex">=</span> 8, fib_fast<span class="er">(</span><span class="ex">6</span><span class="kw">)</span> <span class="ex">=</span> 8</span>
<span id="cb13-11"><a></a><span class="ex">fib</span><span class="er">(</span><span class="ex">7</span><span class="kw">)</span> <span class="ex">=</span> 13, fib_fast<span class="er">(</span><span class="ex">7</span><span class="kw">)</span> <span class="ex">=</span> 13</span>
<span id="cb13-12"><a></a><span class="ex">fib</span><span class="er">(</span><span class="ex">8</span><span class="kw">)</span> <span class="ex">=</span> 21, fib_fast<span class="er">(</span><span class="ex">8</span><span class="kw">)</span> <span class="ex">=</span> 21</span>
<span id="cb13-13"><a></a><span class="ex">fib</span><span class="er">(</span><span class="ex">9</span><span class="kw">)</span> <span class="ex">=</span> 34, fib_fast<span class="er">(</span><span class="ex">9</span><span class="kw">)</span> <span class="ex">=</span> 34</span>
<span id="cb13-14"><a></a><span class="ex">fib</span><span class="er">(</span><span class="ex">10</span><span class="kw">)</span> <span class="ex">=</span> 55, fib_fast<span class="er">(</span><span class="ex">10</span><span class="kw">)</span> <span class="ex">=</span> 55</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="analyze" class="slide level2">
<h2>Analyze</h2>
<ul>
<li>There’s many ways to analyze code performance.</li>
<li>The problem with Fibonacci is it:
<ul>
<li>Grows fast</li>
<li>Is easy</li>
</ul></li>
<li>So we won’t time, we’ll count additions.
<ul>
<li>Our complexity is the addition complexity.</li>
<li>Addition is much cheaper than e.g.&nbsp;return, but, we could algorithmically factor out the returns (but not the additions)</li>
</ul></li>
</ul>
</section>
<section id="instrumentation" class="slide level2">
<h2>Instrumentation</h2>
<ul>
<li>In my research, vs.&nbsp;measurement, we use <em>instrumentation</em>, additional logging code incorporated to the source that captured during execution.
<ul>
<li>More common in security than performance applications.</li>
</ul></li>
<li>I will <em>instrument</em> <code>fib</code> and <code>fib_fast</code> to print a line whenever performing an addition.</li>
<li>We can then simply count the lines.</li>
</ul>
</section>
<section id="instrument-fib" class="slide level2">
<h2>Instrument <code>fib</code></h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb14-1"><a></a><span class="kw">fn</span> fib(n<span class="op">:</span> <span class="dt">u64</span>) <span class="op">-&gt;</span> <span class="dt">u64</span> <span class="op">{</span></span>
<span id="cb14-2"><a></a>    <span class="cf">return</span> <span class="cf">match</span> n <span class="op">{</span></span>
<span id="cb14-3"><a></a>        <span class="dv">0</span> <span class="op">=&gt;</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb14-4"><a></a>        <span class="dv">1</span> <span class="op">=&gt;</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb14-5"><a></a>        n <span class="op">=&gt;</span> fib(n <span class="op">-</span> <span class="dv">1</span>) <span class="op">+</span> fib(n <span class="op">-</span> <span class="dv">2</span>)<span class="op">,</span></span>
<span id="cb14-6"><a></a>        <span class="co">// Tis I, an empty line</span></span>
<span id="cb14-7"><a></a>        <span class="co">// but for this comment!</span></span>
<span id="cb14-8"><a></a>        <span class="co">// Verily.</span></span>
<span id="cb14-9"><a></a>    <span class="op">};</span></span>
<span id="cb14-10"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:50%;">
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb15-1"><a></a><span class="kw">fn</span> fib(n<span class="op">:</span> <span class="dt">u64</span>) <span class="op">-&gt;</span> <span class="dt">u64</span> <span class="op">{</span></span>
<span id="cb15-2"><a></a>    <span class="cf">return</span> <span class="cf">match</span> n <span class="op">{</span></span>
<span id="cb15-3"><a></a>        <span class="dv">0</span> <span class="op">=&gt;</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb15-4"><a></a>        <span class="dv">1</span> <span class="op">=&gt;</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb15-5"><a></a>        n <span class="op">=&gt;</span> <span class="op">{</span></span>
<span id="cb15-6"><a></a>            <span class="pp">println!</span>(<span class="st">"slow"</span>)<span class="op">;</span></span>
<span id="cb15-7"><a></a>            fib(n <span class="op">-</span> <span class="dv">1</span>) <span class="op">+</span> fib(n <span class="op">-</span> <span class="dv">2</span>)</span>
<span id="cb15-8"><a></a>        <span class="op">},</span></span>
<span id="cb15-9"><a></a>    <span class="op">};</span></span>
<span id="cb15-10"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
</section>
<section id="instrument-inner" class="slide level2">
<h2>Instrument <code>inner</code></h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb16-1"><a></a><span class="kw">fn</span> inner(x<span class="op">:</span> <span class="dt">usize</span><span class="op">,</span> <span class="kw">mut</span> m<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> (<span class="dt">usize</span><span class="op">,</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span>) <span class="op">{</span></span>
<span id="cb16-2"><a></a>    <span class="kw">let</span> ret<span class="op">:</span> <span class="dt">usize</span><span class="op">;</span></span>
<span id="cb16-3"><a></a>    <span class="cf">if</span> x <span class="op">&gt;=</span> m<span class="op">.</span>len() <span class="op">{</span></span>
<span id="cb16-4"><a></a>        (_<span class="op">,</span> m) <span class="op">=</span> inner(x <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> m)<span class="op">;</span></span>
<span id="cb16-5"><a></a>        <span class="co">// Skibidi</span></span>
<span id="cb16-6"><a></a>        ret <span class="op">=</span> m[x <span class="op">-</span> <span class="dv">1</span>] <span class="op">+</span> m[x <span class="op">-</span> <span class="dv">2</span>]<span class="op">;</span></span>
<span id="cb16-7"><a></a>        m<span class="op">.</span>push(ret)<span class="op">;</span></span>
<span id="cb16-8"><a></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb16-9"><a></a>        ret <span class="op">=</span> m[x]<span class="op">;</span></span>
<span id="cb16-10"><a></a>    <span class="op">}</span></span>
<span id="cb16-11"><a></a>    <span class="cf">return</span> (ret<span class="op">,</span> m)<span class="op">;</span></span>
<span id="cb16-12"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:50%;">
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb17-1"><a></a><span class="kw">fn</span> inner(x<span class="op">:</span> <span class="dt">usize</span><span class="op">,</span> <span class="kw">mut</span> m<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> (<span class="dt">usize</span><span class="op">,</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">usize</span><span class="op">&gt;</span>) <span class="op">{</span></span>
<span id="cb17-2"><a></a>    <span class="kw">let</span> ret<span class="op">:</span> <span class="dt">usize</span><span class="op">;</span></span>
<span id="cb17-3"><a></a>    <span class="cf">if</span> x <span class="op">&gt;=</span> m<span class="op">.</span>len() <span class="op">{</span></span>
<span id="cb17-4"><a></a>        (_<span class="op">,</span> m) <span class="op">=</span> inner(x <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> m)<span class="op">;</span></span>
<span id="cb17-5"><a></a>        <span class="pp">println!</span>(<span class="st">"fast"</span>)<span class="op">;</span></span>
<span id="cb17-6"><a></a>        ret <span class="op">=</span> m[x <span class="op">-</span> <span class="dv">1</span>] <span class="op">+</span> m[x <span class="op">-</span> <span class="dv">2</span>]<span class="op">;</span></span>
<span id="cb17-7"><a></a>        m<span class="op">.</span>push(ret)<span class="op">;</span></span>
<span id="cb17-8"><a></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb17-9"><a></a>        ret <span class="op">=</span> m[x]<span class="op">;</span></span>
<span id="cb17-10"><a></a>    <span class="op">}</span></span>
<span id="cb17-11"><a></a>    <span class="cf">return</span> (ret<span class="op">,</span> m)<span class="op">;</span></span>
<span id="cb17-12"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
</section>
<section id="testing" class="slide level2">
<h2>Testing</h2>
<ul>
<li>I additionally configure <code>main</code> to accept a command line <span class="math inline">\(n\)</span> rather than just looping.</li>
<li>I additionally configure <code>main</code> to accept a fast or slow flag <code>f</code> or <code>s</code> - after the <span class="math inline">\(n\)</span>.</li>
<li>You can use <code>cargo bench</code> for this, if you like <code>cargo</code> (I don’t)</li>
</ul>
</section>
<section id="new-main" class="slide level2">
<h2>New <code>main</code></h2>
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource rs number-lines code-with-copy"><code class="sourceCode rust"><span id="cb18-1"><a></a><span class="kw">fn</span> main() <span class="op">{</span></span>
<span id="cb18-2"><a></a>    <span class="kw">let</span> args<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">String</span><span class="op">&gt;</span> <span class="op">=</span> <span class="pp">std::env::</span>args()<span class="op">.</span>collect()<span class="op">;</span></span>
<span id="cb18-3"><a></a>    <span class="cf">if</span> args<span class="op">.</span>len() <span class="op">&gt;</span> <span class="dv">2</span> <span class="op">{</span></span>
<span id="cb18-4"><a></a>        <span class="kw">let</span> n<span class="op">:</span><span class="dt">u64</span> <span class="op">=</span> args[<span class="dv">1</span>]<span class="op">.</span>parse()<span class="op">.</span>unwrap()<span class="op">;</span></span>
<span id="cb18-5"><a></a>        <span class="kw">let</span> _ <span class="op">=</span> <span class="cf">match</span> args[<span class="dv">2</span>]<span class="op">.</span>chars()<span class="op">.</span>next()<span class="op">.</span>unwrap() <span class="op">{</span></span>
<span id="cb18-6"><a></a>            <span class="ch">'f'</span> <span class="op">=&gt;</span> fib_fast(n)<span class="op">,</span></span>
<span id="cb18-7"><a></a>            <span class="ch">'s'</span> <span class="op">=&gt;</span> fib(n)<span class="op">,</span></span>
<span id="cb18-8"><a></a>            _ <span class="op">=&gt;</span> <span class="pp">panic!</span>()<span class="op">,</span></span>
<span id="cb18-9"><a></a>        <span class="op">};</span></span>
<span id="cb18-10"><a></a>    <span class="op">};</span></span>
<span id="cb18-11"><a></a>    <span class="cf">return</span><span class="op">;</span></span>
<span id="cb18-12"><a></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="check-it" class="slide level2">
<h2>Check it</h2>
<ul>
<li>Simply try out a few values.</li>
<li>Use <code>wc</code> to count lines.</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a></a><span class="ex">user@cd-desk:~/tmp/scratch$</span> cargo run 2 s <span class="kw">|</span> <span class="fu">wc</span></span>
<span id="cb19-2"><a></a>   <span class="ex">Compiling</span> scratch v0.1.0 <span class="er">(</span><span class="ex">/home/user/tmp/scratch</span><span class="kw">)</span></span>
<span id="cb19-3"><a></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.21s</span></span>
<span id="cb19-4"><a></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span> 2 s<span class="kw">`</span></span>
<span id="cb19-5"><a></a>      <span class="ex">1</span>       1       5</span>
<span id="cb19-6"><a></a><span class="ex">user@cd-desk:~/tmp/scratch$</span> cargo run 2 f <span class="kw">|</span> <span class="fu">wc</span></span>
<span id="cb19-7"><a></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb19-8"><a></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span> 2 f<span class="kw">`</span></span>
<span id="cb19-9"><a></a>      <span class="ex">1</span>       1       5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>That hardly seems worth it?</li>
</ul>
</section>
<section id="it-is" class="slide level2">
<h2>It is</h2>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a></a><span class="ex">$</span> <span class="er">(</span><span class="ex">cargo</span> run 10 s <span class="kw">|</span> <span class="fu">wc</span> <span class="kw">;</span> <span class="ex">cargo</span> run 10 f <span class="kw">|</span> <span class="fu">wc</span><span class="kw">)</span> <span class="dv">2</span><span class="op">&gt;</span>/dev/null</span>
<span id="cb20-2"><a></a>     <span class="ex">88</span>      88     440</span>
<span id="cb20-3"><a></a>      <span class="ex">9</span>       9      45</span>
<span id="cb20-4"><a></a><span class="ex">$</span> <span class="er">(</span><span class="ex">cargo</span> run 30 s <span class="kw">|</span> <span class="fu">wc</span> <span class="kw">;</span> <span class="ex">cargo</span> run 30 f <span class="kw">|</span> <span class="fu">wc</span><span class="kw">)</span> <span class="dv">2</span><span class="op">&gt;</span>/dev/null</span>
<span id="cb20-5"><a></a><span class="ex">1346268</span> 1346268 6731340</span>
<span id="cb20-6"><a></a>     <span class="ex">29</span>      29     145</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="another" class="slide level2">
<h2>Another</h2>
<ul>
<li>Slow 40 didn’t return before I had to go get lunch.</li>
<li>I forgot it was running and when I came back:</li>
</ul>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a></a><span class="ex">$</span> <span class="er">(</span><span class="ex">cargo</span> run 40 s <span class="kw">|</span> <span class="fu">wc</span> <span class="kw">;</span> <span class="ex">cargo</span> run 40 f <span class="kw">|</span> <span class="fu">wc</span><span class="kw">)</span> <span class="dv">2</span><span class="op">&gt;</span>/dev/null</span>
<span id="cb21-2"><a></a><span class="ex">165580140</span> 165580140 827900700</span>
<span id="cb21-3"><a></a>     <span class="ex">39</span>      39     195</span>
<span id="cb21-4"><a></a><span class="ex">$</span> echo <span class="va">$((</span><span class="dv">165580140</span><span class="op">/</span><span class="dv">39</span><span class="va">))</span></span>
<span id="cb21-5"><a></a><span class="ex">4245644</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Memoization performed 1 addition for every <em>4 million</em> performed by the naive approach.</li>
</ul>
</section>
<section id="timing" class="slide level2">
<h2>Timing</h2>
<ul>
<li>You can get timing separation at around 40 as well</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a></a><span class="ex">$</span> <span class="er">(</span><span class="bu">time</span> cargo run 40 s <span class="kw">;</span> <span class="bu">time</span> cargo run 40 f <span class="kw">)</span></span>
<span id="cb22-2"><a></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb22-3"><a></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span> 40 s<span class="kw">`</span></span>
<span id="cb22-4"><a></a></span>
<span id="cb22-5"><a></a><span class="ex">real</span>    0m1.041s</span>
<span id="cb22-6"><a></a><span class="ex">user</span>    0m1.058s</span>
<span id="cb22-7"><a></a><span class="ex">sys</span>     0m0.012s</span>
<span id="cb22-8"><a></a>    <span class="ex">Finished</span> <span class="kw">`</span><span class="ex">dev</span><span class="kw">`</span> profile [unoptimized + debuginfo] target<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="er">in</span> <span class="ex">0.00s</span></span>
<span id="cb22-9"><a></a>     <span class="ex">Running</span> <span class="kw">`</span><span class="ex">target/debug/scratch</span> 40 f<span class="kw">`</span></span>
<span id="cb22-10"><a></a></span>
<span id="cb22-11"><a></a><span class="ex">real</span>    0m0.043s</span>
<span id="cb22-12"><a></a><span class="ex">user</span>    0m0.033s</span>
<span id="cb22-13"><a></a><span class="ex">sys</span>     0m0.012s</span>
<span id="cb22-14"><a></a><span class="ex">$</span> echo <span class="va">$((</span><span class="dv">1041</span><span class="op">/</span><span class="dv">43</span><span class="va">))</span></span>
<span id="cb22-15"><a></a><span class="ex">24</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="results" class="slide level2">
<h2>Results</h2>
<ul>
<li>~24x speed-up, even with the memory costs and constant start-up time.
<ul>
<li>By the way - how much memory is used?</li>
</ul></li>
<li>Make sure you comment out the prints or they will dominate the time cost.
<ul>
<li>Printing is much harder than adding!</li>
</ul></li>
</ul>
</section>
<section id="embed" class="slide level2">
<h2>Embed</h2>
<style>
/* https://github.com/lonekorean/gist-syntax-themes */
@import url('https://cdn.rawgit.com/lonekorean/gist-syntax-themes/d49b91b3/stylesheets/idle-fingers.css');

@import url('https://fonts.googleapis.com/css?family=Open+Sans');
body {
  font: 16px 'Open Sans', sans-serif;
}
body .gist .gist-file {
  border-color: #555 #555 #444
}
body .gist .gist-data {
  border-color: #555
}
body .gist .gist-meta {
  color: #ffffff;
  background: #373737; 
}
body .gist .gist-meta a {
  color: #ffffff
}
body .gist .gist-data .pl-s .pl-s1 {
  color: #a5c261
}
</style>
<script src="your-gist-embed"></script>
<script src="https://gist.github.com/cd-public/be1eb1297832bde71dc276990fb18ee8.js"></script>
</section>
<section id="today-1" class="slide level2">
<h2>Today</h2>
<ul class="task-list">
<li><label><input type="checkbox" checked="">Dynamic Programming</label></li>
<li><label><input type="checkbox" checked="">Memoization</label>
<ul class="task-list">
<li><label><input type="checkbox" checked="">Cacheing</label></li>
</ul></li>
<li><label><input type="checkbox" checked="">More on Graphs</label></li>
</ul>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p><a href="index.html">Home</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>